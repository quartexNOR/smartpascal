<!DOCTYPE html>
<html>
<head>	
  <meta charset="UTF-8" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="format-detection" content="telephone=yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<meta name="viewport" content="width=device-width, maximum-scale=1.0, initial-scale=1.0, user-scalable=no"/>
  
  
<link rel="icon" sizes="64x64" href="res/icon_128-64x64.png">

	<title>Amibian.js Amiga Cloud Desktop</title>

	<style type="text/css">/*
 * Windows Phone 8 theme for Smart Mobile Studio
 * --
 * Colors:
 * --
 * ButtonFace: #1ba1e2
 * Dialog: #1f1f1f
 * --
 */

@import url('https://fonts.googleapis.com/css?family=Ubuntu');

:focus {
    outline: 0;
}

/* Apply to all elements */
* {
  margin: 0;
  padding: 0;
  border: 0;
  outline: none;

  /* Define "normal" boxing */
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
      -ms-box-sizing: border-box;
       -o-box-sizing: border-box;
          box-sizing: border-box;


  /* no tap highlight color */
  -webkit-tap-highlight-color: transparent;
     -moz-tap-highlight-color: transparent;
      -ms-tap-highlight-color: transparent;
       -o-tap-highlight-color: transparent;
          tap-highlight-color: transparent;

  /* no border style by default */
  -webkit-border-style: none;
     -moz-border-style: none;
      -ms-border-style: none;
       -o-border-style: none;
          border-style: none;

  /* Turn off font resizing */
  -webkit-text-size-adjust: none;
     -moz-text-size-adjust: none;
      -ms-text-size-adjust: none;
          text-size-adjust: none;

    -webkit-font-smoothing: always;
       -moz-font-smoothing: always;
        -ms-font-smoothing: always;
            font-smoothing: always;

  font-family: "Ubuntu", Helvetica, sans-serif;
}


html, body {
  /* default to black screen */
  background-color: #000;
  cursor: default;


  /* No overflow, means no scrolling */
  overflow: hidden;
}


/* -------------------- */
/* Window ZORDER BUTTON */
.TWbWindowZOrderGlyph {
  cursor: default;
  background-image: url("res/window.header.zorder.disabled.png");
}

.TWbWindowZOrderGlyph_focused {
  background-image: url("res/window.header.zorder.enabled.png");
}

/* -------------------- */
/* Window CLOSE BUTTON */
.TWbWindowCloseGlyph {
  cursor: default;
  background-image: url("res/window.header.closer.disabled.png");
}

.TWbWindowCloseGlyph_focused {
  background-image: url("res/window.header.closer.enabled.png");
}

/* -------------------- */
/* Window SIZE BUTTON */
.TWbWindowSizerGlyph {
  cursor: default;
  background-image: url("res/window.footer.sizer.disabled.png");
}

.TWbWindowSizerGlyph_focused {
  background-image: url("res/window.footer.sizer.enabled.png");
}

/* -------------------- */
/* Window Minimize BUTTON */
.TWbWindowMinimizeGlyph {
  cursor: default;
  background-image: url("res/window.header.edge.minimize.disabled.png");
 }

.TWbWindowMinimizeGlyph_focused {
  background-image: url("res/window.header.edge.minimize.enabled.png");
}

/* -------------------- */
/* Window HEADER AREA   */
.TWbWindowHeader {
  cursor: default;
  background-image: url("res/window_header_unselected.png");
  box-shadow: 0 5px 5px -5px #333;
}

.TWbWindowHeader_focused {
  background-image: url("res/window_header_selected.png");
}

.TWbWindowHeader: disabled {
  background-image: url("res/window_header_unselected.png");
}


.TWbWindowContent {
  overflow-x: hidden;
  overflow-y: hidden;
}

.TWbWindow {
  overflow-x: hidden;
  overflow-y: hidden;
}

.TWbIconView {
  /* background-color: #FF0000; */
  overflow-x: hidden;
  overflow-y: hidden;
}


/* ------------------------------------------------- */

.TW3Button {
  cursor: default;

  border-top: 1px solid #E0E0E0;
  border-left: 1px solid #E0E0E0;
  border-bottom: 1px solid #979797;
  border-right: 1px solid #979797;

  outline: 1px solid #42415A;
  outline-offset: 0px;

  background-image: -ms-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to bottom, #B0B0B0 0%, #D7D7D7 100%);

  font-size: normal;
  text-align: center;
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

.TW3Button:active {
  border-top: 1px solid #979797;
  border-left: 1px solid #979797;
  border-bottom: 1px solid #E0E0E0;
  border-right: 1px solid #E0E0E0;

  background-image: -ms-linear-gradient(bottom left, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(bottom left, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(bottom left, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left bottom, right top, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(bottom left, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to top right, #B0B0B0 0%, #D7D7D7 100%);
}

.TW3Button:focus {
       color: #618ECE;
  font-color: #618ECE;
  text-decoration: underline;
 }

.TW3Button:disabled {
  cursor: wait;
	opacity: 0.5;
}

/* ------------------------------------------------- */




ul {
  cursor: default;
  list-style: none;
  font-size: small;
}

ul li {
  color: #fff;
  margin: 0 0 2px 0;
  cursor: hand;

  padding: 8px;
  background: #1ba1e2;
}

ul li:active { }

/**
 * TW3CustomControl
 * @purpose TW3CustomControl control style
 * @status done
 */
.TW3CustomControl {
  cursor: default;
  background-color: #fff;
}

/**
 * TW3ScrollContentIndicator
 * @purpose TW3ScrollContentIndicator style
 * @status done
 */
.TW3ScrollContentIndicator {
  background-color: #9e2b83;
  border: solid 1px #9A9A9A;
}

/**
 * TW3CustomForm
 * @purpose TW3CustomForm control style
 * @status done
 */
.TW3CustomForm, .TW3Form {
  /* This forces the browsers that support it to
     use the GPU rather than CPU for movement */
  -webkit-transform: translateZ(0);
     -moz-transform: translateZ(0);
      -ms-transform: translateZ(0);
       -o-transform: translateZ(0);

   background: #000;
}

/**
 * TW3BlockBox:
 * In order to emulate modal dialogs we use
 * a single DIV to cover the active form.
 * This div prevents the user from clicking
 * on the underlying controls - thus forcing
 * the user to deal with the dialog, which is
 * hosted as a child of the TW3BlockBox control
 */

.TW3BlockBox {
  overflow: hidden;
  -webkit-touch-callout: none;
  background-color: rgba(0, 0, 0, 0.5);
}

/**
 * @purpose TW3AlertDialog control
 * @status done
 */
.TW3AlertDialog {
  font-size: medium;
  background: #1f1f1f;

  z-index: 1000;
  padding: 10px;

  text-align: center;
}

/**
 * @purpose TW3AlertDialog title & text
 * @status done
 * @todo It will be nice if there will be a style
 *       for title separated from text
 */
.TW3AlertDialog .TW3LabelText {
  color: #fff;
  font-size: medium;
  font-weight: normal;
}

/**
 * TW3Label
 * @purpose TW3Label control style
 * @status done
 */
.TW3Label, TW3LabelText {
  color: #fff;
  font-size: small;
	cursor: default;
}

.TW3Label:disabled,
.TW3LabelText:disabled {
  opacity: 0.5;
}


.TW3AlertButton {
  color: #fff;
  font-size: normal;

  border: 2px solid #fff;

  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

.TW3AlertButton:active:enabled {
  background: #1ba1e2;
}

/**
 * TW3EditBox
 * TW3EditBox
 * TW3ComboBox
 * @purpose 
 * @status done
 */
.TW3Memo,
.TW3EditBox,
.TW3ComboBox {
  border: 1px solid #fff;
  border-radius: 0;

  background-color: #CFCFCF;

  border-top: 1px solid #979797;
  border-left: 1px solid #979797;
  border-bottom: 1px solid #E0E0E0;
  border-right: 1px solid #E0E0E0;

  outline: 1px solid #42415A;
  outline-offset: 0px;
  outline-bottom: 1px solid #000;
	-webkit-user-select: auto;
}

.TW3EditBox:focus {
}

/**
 * TW3ToolButton
 * @purpose TW3ToolButton control style
 * @status done
 */
.TW3ToolButton {
  cursor: default;
  padding: 2px;
  border-bottom: 1px solid #4F6EAA;

  background-image: -ms-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to bottom, #B0B0B0 0%, #D7D7D7 100%);

  font-size: normal;
  /* border: 2px solid #fff; */
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

.TW3ToolbarButton {
  cursor: default;
  padding: 2px;

  border-top: 1px solid #E0E0E0;
  border-left: 1px solid #E0E0E0;
  border-bottom: 1px solid #979797;
  border-right: 1px solid #979797;

  outline: 1px solid #42415A;
  outline-offset: 0px;
  outline-bottom: 1px solid #000;

  background-image: -ms-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to bottom, #B0B0B0 0%, #D7D7D7 100%);

  font-size: normal;
  text-align: center;
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

.TW3ToolbarButton:active {
  border-top: 1px solid #979797;
  border-left: 1px solid #979797;
  border-bottom: 1px solid #E0E0E0;
  border-right: 1px solid #E0E0E0;

  background-image: -ms-linear-gradient(bottom, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(bottom, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(bottom, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(bottom, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to top, #B0B0B0 0%, #D7D7D7 100%);

}

.TW3ToolbarButton:focus {
  color: #618ECE;
  text-decoration: underline;
 }

.TW3ToolbarButton:disabled {
  cursor: wait;
	opacity: 0.5;
}

.TW3ToolbarButtonSelected {
  background-image: -ms-linear-gradient(top, #A8A8A8 60%, #EDEDED 100%);
  background-image: -moz-linear-gradient(top, #A8A8A8 60%, #EDEDED 100%);
  background-image: -o-linear-gradient(top, #A8A8A8 60%, #EDEDED 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(60, #A8A8A8), color-stop(100, #EDEDED));
  background-image: -webkit-linear-gradient(top, #A8A8A8 60%, #EDEDED 100%);
  background-image: linear-gradient(to bottom, #A8A8A8 60%, #EDEDED 100%);
}


/**
 * TW3Toolbar
 * @purpose TW3Toolbar control
 * @status done
 */
.TW3Toolbar {
  cursor: default;
  padding: 2px;
  background-color: #EFECE9;
  border-bottom: 1px solid #979797;
}


/**
 * TW3ToolButton
 * @purpose TW3Toolbar control
 * @status done
 */
.TW3ToolButton {
}

.TW3ToolButton:active:enabled {
}

.TW3ToolButton:disabled {
  cursor: wait;
	opacity: 0.5;
}



.ButtonDown {
  border: 2px inset;
}

.TWbPathPanel {
  cursor: default;
  padding: 2px;

  border-top: 1px solid #FFFFFF;
  background-color: #EFECE9;

  font-size: normal;
  text-align: center;
  text-transform: uppercase;
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}


/**
 * TW3Panel
 * @purpose TW3Panel control style
 * @status done
 */
.TW3Panel {
  cursor: default;
  padding: 2px;

  border-top: 1px solid #FFFFFF;
  border-left: 1px solid #FFFFFF;   /* ECECEC */
  border-bottom: 1px solid #979797;
  border-right: 1px solid #979797;


  background-color: #EFECE9;

  font-size: normal;
  text-align: center;
  text-transform: uppercase;
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

/**
 * TW3ToggleSwitch
 * @purpose TW3ToggleSwitch control style
 * @status done
 */
.TW3ToggleSwitch {
  border: 1px solid;

  border-top: 1px solid #979797;
  border-left: 1px solid #979797;
  border-bottom: 1px solid #E0E0E0;
  border-right: 1px solid #E0E0E0;

  background: #000;
  font-size: small;
	overflow: hidden;
}

.TW3ToggleOnLabel .TW3LabelText { color: #1ba1e2; }

.TW3ToggleOnLabel,

.TW3ToggleOffLabel {
  text-align: center;
  cursor: default;
  background-image: -ms-linear-gradient(top, #000000 0%, #293D69 100%);
  background-image: -moz-linear-gradient(top, #000000 0%, #293D69 100%);
  background-image: -o-linear-gradient(top, #000000 0%, #293D69 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #000000), color-stop(100, #293D69));
  background-image: -webkit-linear-gradient(top, #000000 0%, #293D69 100%);
  background-image: linear-gradient(to bottom, #000000 0%, #293D69 100%);
}

.TW3ToggleOnLabel {
  text-align: center;
  cursor: default;
  background: #618ECE;
  background-image: -webkit-linear-gradient(top, #2B5897 0%, #5B88C7 100%);
  background-image:    -moz-linear-gradient(top, #2B5897 0%, #5B88C7 100%);
  background-image:     -ms-linear-gradient(top, #2B5897 0%, #5B88C7 100%);
  background-image:      -o-linear-gradient(top, #2B5897 0%, #5B88C7 100%);
  background-image:        -webkit-gradient(linear, left top, left bottom, color-stop(0, #2B5897), color-stop(100, #5B88C7));
  background-image:         linear-gradient(to bottom, #2B5897 0%, #5B88C7 100%);

  -webkit-box-shadow: inset 0 0 10px #000000;
     -moz-box-shadow: inset 0 0 10px #000000;
       -o-box-shadow: inset 0 0 10px #000000;
          box-shadow: inset 0 0 10px #000000;
 }

.TW3ToggleKnob {
  cursor: default;

  border-top: 1px solid #E0E0E0;
  border-left: 1px solid #E0E0E0;
  border-bottom: 1px solid #979797;
  border-right: 1px solid #979797;

  outline: 1px solid #42415A;
  outline-offset: 0px;

  background-image: -ms-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -moz-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -o-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #B0B0B0), color-stop(100, #D7D7D7));
  background-image: -webkit-linear-gradient(top, #B0B0B0 0%, #D7D7D7 100%);
  background-image: linear-gradient(to bottom, #B0B0B0 0%, #D7D7D7 100%);

  font-size: normal;
  text-align: center;
  -webkit-text-size-adjust: auto;
     -moz-text-size-adjust: auto;
      -ms-text-size-adjust: auto;
       -o-text-size-adjust: auto;
}

  .TW3ToggleKnob:hover { }

/**
 * TW3ListBox
 * @purpose TW3ListBox control style
 * @status done
 */
.TW3Listbox {
  padding: 1px;
  border: 2px solid #fff;
  font-size: normal;
}

.TW3Listbox .TW3LabelText { color: #000; }

.TW3ListBoxItemSelected {
  color: #fff;
  font-size: small;
  background: #1ba1e2;
}

.TW3ListBoxItemSelected .TW3LabelText { color: #fff; }

/**
 * TW3HeaderControl
 * @purpose Style for TW3HeaderControl
 * @status done
 */
.TW3HeaderControl {
  cursor: default;
  background: #1f1f1f;
}

.TW3HeaderControl:disabled {
  cursor: wait;
  opacity: 0.5;
}

/**
 * TW3ProgressBar
 * @purpose ProgressBar
 * @status done
 */
.TW3ProgressBar,
.TW3ProgressMeter {
  overflow: hidden;
  -webkit-touch-callout: none;
}

.TW3ProgressBar { background: #292929; }

/**
 * TW3ProgressMeter
 * @purpose Content of ProgressBar
 * @status done
 */
.TW3ProgressMeter { background: #1ba1e2; }

/**
 * TW3Scrollbar
 * @purpose Style for TW3Scrollbar
 * @status done
 */
.TW3ScrollBar {
  background: #1f1f1f;
}

.TW3ScrollbarUpBtn,
.TW3ScrollbarDownBtn,
.TW3ScrollbarLeftBtn,
.TW3ScrollbarRightBtn {
  overflow: hidden;
}

.TW3ScrollbarUpBtn:active,
.TW3ScrollbarDownBtn:active,
.TW3ScrollbarLeftBtn:active,
.TW3ScrollbarRightBtn:active {
  background: #1ba1e2;
}

.TW3ScrollbarDownBtn:hover,
.TW3ScrollbarUpBtn:hover,
.TW3ScrollbarLeftBtn:hover,
.TW3ScrollbarRightBtn:hover {
  cursor: pointer;
}

.TW3ScrollbarHandle {
  background: #1ba1e2;
  overflow: hidden;
}

.TW3ScrollbarHandle:active { }

.TW3ScrollbarHandsle:Hover {
  cursor: pointer;
}

.TW3HorizontalScrollbar,
.TW3VerticalScrollbar {
  background: white;

  overflow: hidden;
  -webkit-touch-callout: none;
}

.TW3HorizontalScrollbar,
.TW3VerticalScrollbar {
  padding: 0;
  background: #1f1f1f;
}

.TW3VerticalScrollbar:disabled,
.TW3HorizontalScrollbar:disabled {
  cursor: wait;
  opacity: 0.5;
}

/* =============================================
 * Page Animation: BACKSCROLL
 * ============================================= */

@-webkit-keyframes BACKSCROLL {
  0% {
    -webkit-transform: translateZ(0);
    background-position: 0% 0%;
  }
  100% {
    background-position: -557px 0%;
    -webkit-transform: translateZ(0);
  }
}

@-moz-keyframes BACKSCROLL {
  0% {
    -webkit-transform: translateZ(0);
    background-position: 0% 0%;
  }
  100% {
    background-position: -557px 0%;
    -webkit-transform: translateZ(0);
  }
}

/* =============================================
 * Page Animation: MOVE-LEFT
 * ============================================= */

@-webkit-keyframes MOVE-LEFT {
    0% {
        -webkit-transform: translateX(100%);
    }
    100% {
        -webkit-transform: translateX(0px);
    }
}

@-webkit-keyframes MOVE-OUT-LEFT {
    0% {
        -webkit-transform: translateX(0%);
    }
    100% {
        -webkit-transform: translateX(-100%);
    }
}

@-moz-keyframes MOVE-LEFT {
    0% {
        -moz-transform: translateX(100%);
    }
    100% {
        -moz-transform: translateX(0px);
    }
}


@-moz-keyframes MOVE-OUT-LEFT {
    0% {
      -moz-transform: translateX(0%);
      }
    100% {
      -moz-transform: translateX(-100%);
      }
}

/* =============================================
 * Page Animation: MOVE-Right
 * ============================================= */

@-webkit-keyframes MOVE-RIGHT {
    0% {
        -webkit-transform: translateX(-100%);
    }
    100% {
        -webkit-transform: translateX(0%);
        visibility: none;
    }
}

@-webkit-keyframes MOVE-OUT-RIGHT {
    0% {
        -webkit-transform: translateX(0%);
    }
    100% {
        -webkit-transform: translateX(100%);
        visibility: none;
    }
}

@-moz-keyframes MOVE-RIGHT {
    0% {
        -moz-transform: translateX(-100%);
    }
    100% {
        -moz-transform: translateX(0%);
    }
}

@-moz-keyframes MOVE-OUT-RIGHT {
    0% {
        -moz-transform: translateX(0%);
    }
    100% {
        -moz-transform: translateX(100%);
        visibility: none;
    }
}

/* =============================================
 * Page Animation: ROTATE-FOREVER
 * ============================================= */

@-webkit-keyframes ROTATE-FOREVER {
  from {
    -webkit-transform: none;
  }
  to {
    -webkit-transform: rotate(360deg);
  }
}

@-moz-keyframes ROTATE-FOREVER {
  from {
    -moz-transform: none;
  }
  to {
    -moz-transform: rotate(360deg);
  }
}</style>
<script src="lib/nicEdit.js" type="text/javascript"></script>
<script src="lib/require.js" type="text/javascript"></script>
<script src="lib/object.keys.shim.js" type="text/javascript"></script>
<script src="lib/polyfill.object.watch.js" type="text/javascript"></script>
<script src="lib/polyfill.object.observe.js" type="text/javascript"></script>
<script src="lib/polyfill.msie.legacy.js" type="text/javascript"></script>


  	<script type="text/javascript">	document.ontouchmove = function(e) { e.preventDefault(); }

	function bootstrap() { 
var $R=["Method %s in class %s threw exception [%s]","Procedure %s threw exception [%s]","Host classtype was rejected as unsuitable","Invalid handle for operation, reference was null error","Invalid stream style for operation, expected memorystream","Method not implemented","stream operation failed, system threw exception: %s","write failed, system threw exception: %s","read failed, system threw exception: %s","operation failed, invalid handle error","Invalid length, %s bytes exceeds storage boundaries error","Write failed, invalid signature error [%s]","Write failed, invalid datasize [%d] error","Invalid length, %s bytes exceeds storage medium error","Read failed, invalid signature error [%s]","Structure %s error, method %s.%s threw exception [%s] error","Structure storage failed, structure contains function reference error","Structure storage failed, structure contains symbol reference error","Structure storage failed, structure contains uknown datatype error","Failed to read structure, method %s.%s threw exception [%s] error","Failed to write structure, method %s.%s threw exception [%s] error","Structure data contains invalid or damaged data signature error","Handle reference is null error","Failed to create html element","Invalid html element handle error","Invalid html element attributename error","Invalid html element propertyname error","Invalid html element stylename error","Failed to attach html element to owner","Owner element handle is null error","invalid owner handle error","Failed to load script-file [%s] error","Failed to load image.file [%s] error","Failed to load CSS file [%s] error","Failed to load binary file [%s] error","Invalid component registration","Failed to create attribute storage object, invalid handle error","Failed to read element attribute, system threw exception: %s","Failed to write element attribute, system threw exception: %s","Failed to examine element attribute, system threw exception: %s","Failed to delete element-attribute [%s], system threw exception: %s","data-","invalid owner handle error","Failed to initialize from graphics-context: ","Storage object already active error","Storage object not active error","Browser does not support storage error","Storage object was NIL error","Read failed, invalid offset [%d], expected %d..%d","Write operation failed, target stream is nil error","Read operation failed, source stream is nil error","'Invalid handle for object (%s), reference rejected error"];function TrimLeft(s){return s.replace(/^\s\s*/,"")}
function Trim$_String_Integer_Integer_(s,a,b){if(a<0)a=0;if(b<0)b=0;return s.substr(a,s.length-a-b)}
function Trim$_String_(s){return s.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}
var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s.prop},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrReplace(s,o,n){return o?s.replace(new RegExp(StrRegExp(o),"g"),n):s}
function StrRegExp(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}
function StrEndsWith(s,e){return s.substr(s.length-e.length)==e}
function StrDeleteRight(s,n){return s.substr(0,s.length-n)}
function StrBeginsWith(s,b){return s.substr(0,b.length)==b}
function SameText(a,b){return a.toUpperCase()==b.toUpperCase()}
function RightStr(s,n){return s.substr(s.length-n)}
function RandomInt(i){return Math.floor(Random()*i)}
function $alea(){return(function(args){var s0=0;var s1=0;var s2=0;var c=1;if(args.length==0){args=[+new Date]}
var mash=function(){var n=0xefc8249d;var mash=function(data){data=data.toString();for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=0.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*0x100000000}
return(n>>>0)*2.3283064365386963e-10};return mash}();s0=mash(' ');s1=mash(' ');s2=mash(' ');for(var i=0;i<args.length;i++){s0-=mash(args[i]);if(s0<0){s0+=1}
s1-=mash(args[i]);if(s1<0){s1+=1}
s2-=mash(args[i]);if(s2<0){s2+=1}}
mash=null;var random=function(){var t=2091639*s0+c*2.3283064365386963e-10;s0=s1;s1=s2;return s2=t-(c=t|0)};random.args=args;return random}(Array.prototype.slice.call(arguments)))};var Random=$alea();function IntToHex2(v){var r=v.toString(16);return(r.length==1)?"0"+r:r}
function IntToHex(v,d){var r=v.toString(16);return"00000000".substr(0,d-r.length)+r}
var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('')}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i])}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]))}
arg=arg[match[2][k]]}}
else if(match[1]){arg=argv[match[1]]}
else{arg=argv[cursor++]}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)))}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=String(parseInt(arg,10));if(match[7]){arg=str_repeat('0',match[7]-arg.length)+arg}break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg)}}
return output.join('')};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%')}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}
else{throw('[sprintf] huh?')}}}
else{throw('[sprintf] huh?')}
match[2]=field_list}
else{arg_names|=2}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported')}
parse_tree.push(match)}
else{throw('[sprintf] huh?')}
_fmt=_fmt.substring(match[0].length)}
return parse_tree};return str_format})();function Format(f,a){a.unshift(f);return sprintf.apply(null,a)}
function FloatToStr$_Float_(i){return i.toString()}
function FloatToStr$_Float_Integer_(i,p){return(p==99)?i.toString():i.toFixed(p)}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(){FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
var EAssertionFailed={$ClassName:"EAssertionFailed",$Parent:Exception,$Init:Exception.$Init}
function Delete(s,i,n){var v=s.v;if((i<=0)||(i>v.length)||(n<=0))return;s.v=v.substr(0,i-1)+v.substr(i+n-1)}
function ClampInt(v,mi,ma){return v<mi?mi:v>ma?ma:v}
function $W(e){return e.ClassType?e:Exception.Create($New(Exception),e.constructor.name+", "+e.message)}
function $SetInc(s,v,m,n){v-=m;if(v>=0&&v<n)s[v>>5]|=1<<(v&31)}
function $SetIn(s,v,m,n){v-=m;return(v<0&&v>=n)?false:(s[v>>5]&(1<<(v&31)))!=0}
function $SetExc(s,v,m,n){v-=m;if(v>=0&&v<n)s[v>>5]&=~(1<<(v&31))}
Array.prototype.pusha=function(e){this.push.apply(this,e);return this}
function $NewDyn(c,z){if(c==null)throw Exception.Create($New(Exception),"ClassType is nil"+z);var i={ClassType:c};c.$Init(i);return i}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Is(o,c){if(o===null)return false;return $Inh(o.ClassType,c)};function $IntfAsClass(i,c){if(i===null)return null;if($Is(i.O,c))return i.O;else throw Exception.Create($New(Exception),"Cannot cast interface of \""+i.O.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")};function $Inh(s,c){if(s===null)return false;while((s)&&(s!==c))s=s.$Parent;return(s)?true:false};function $Extend(base,sub,props){function F(){};F.prototype=base.prototype;sub.prototype=new F();sub.prototype.constructor=sub;for(var n in props){if(props.hasOwnProperty(n)){sub.prototype[n]=props[n]}}}
function $Event2(i,f){var li=i,lf=f;return function(a,b){return lf.call(li,li,a,b)}}
function $Event1(i,f){var li=i,lf=f;return function(a){return lf.call(li,li,a)}}
function $Event0(i,f){var li=i,lf=f;return function(){return lf.call(li,li)}}
function $Event(i,f){var li=i,lf=f;return function(){var arg=Array.prototype.slice.call(arguments);arg.unshift(li);return lf.apply(li,arg)}}
function $Div(a,b){var r=a/b;return(r>=0)?Math.floor(r):Math.ceil(r)}
function $Assert(b,m,z){if(!b)throw Exception.Create($New(EAssertionFailed),"Assertion failed"+z+((m=="")?"":" : ")+m)}
function $AsIntf(o,i){if(o===null)return null;var r=o.ClassType.$Intf[i].map(function(e){return function(){var arg=Array.prototype.slice.call(arguments);arg.splice(0,0,o);return e.apply(o,arg)}});r.O=o;return r};function $AsClass(s,c){if((s===null)||$Inh(s,c))return s;throw Exception.Create($New(Exception),"Cannot cast class \""+s.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function $As(o,c){if((o===null)||$Is(o,c))return o;throw Exception.Create($New(Exception),"Cannot cast instance of type \""+o.ClassType.$ClassName+"\" to class \""+c.$ClassName+"\"")}
function $ArraySwap(a,i1,i2){var t=a[i1];a[i1]=a[i2];a[i2]=t}
function $ArraySetLenC(a,n,d){var o=a.length;if(o==n)return;if(o>n)a.length=n;else for(;o<n;o++)a.push(d())}
function WriteLn(value$16){var items$2=[],a$297=0;var litem="";if(window.console){if(TW3VariantHelper$Isstring(value$16)){if(((String(value$16)).indexOf("\r")+1)>0){items$2=TString.Explode(TString,(String(value$16)),"\r");var $t1;for(a$297=0,$t1=items$2.length;a$297<$t1;a$297++){litem=items$2[a$297];window.console.log(litem)}
return}}
window.console.log(value$16)}};function w3_SetStyle(tagRef,aStyleName,aStyleValue){tagRef.style[aStyleName]=aStyleValue};function w3_setProperty(tagRef$1,aPropName,aValue){tagRef$1[aPropName]=aValue};function w3_setElementParentByRef(aElement,aParent){aParent.appendChild(aElement)};function w3_setAttrib(tagRef$2,aAttribName,aValue$1){tagRef$2.setAttribute(aAttribName,aValue$1)};function w3_RemoveEvent(a_tagRef,a_eventName,a_callback,a_useCapture){if(a_eventName=="mousewheel")a_eventName="DOMMouseScroll";a_tagRef.removeEventListener(a_eventName,a_callback,a_useCapture)};function w3_RemoveElementByRef(aElement$1,aParent$1){aParent$1.removeChild(aElement$1)};function w3_RegisterBrowserAPI(BrowserAPIDriver){vDriver=BrowserAPIDriver};function w3_NameToUrlStr(aUrl){var R="";R="url("+aUrl+")";return R};function w3_GetStyleAsStr(tagRef$3,aStyleName$1){var R="";var mObj=undefined;var mData;mObj=document.defaultView.getComputedStyle(tagRef$3,null);if(mObj)
mData=(mObj).getPropertyValue(aStyleName$1);if(mData==null){mData=(tagRef$3).style[aStyleName$1]}
if(mData)
{if(typeof(mData)==="number"){R=String(mData)}else{if(typeof(mData)==="string")
R=mData}}
return R};function w3_GetStyleAsInt(tagRef$4,aStyleName$2){var R=0;var mObj$1=undefined;var mData$1;mObj$1=document.defaultView.getComputedStyle(tagRef$4,null);if(mObj$1)
mData$1=(mObj$1).getPropertyValue(aStyleName$2);if(mData$1)
{if(typeof(mData$1)==="number")
{R=mData$1}else{if(typeof(mData$1)==="string")
{mData$1=parseInt(mData$1);if(typeof(mData$1)==="number")
R=mData$1}}}
return R};function w3_GetStyleAsFloat(tagRef$5,aStyleName$3){var R=0;var mObj$2=undefined;var mData$2;mObj$2=document.defaultView.getComputedStyle(tagRef$5,null);if(mObj$2)
mData$2=(mObj$2).getPropertyValue(aStyleName$3);if(mData$2)
{if(typeof(mData$2)==="number"){R=mData$2}else{if(typeof(mData$2)==="string")
{mData$2=parseFloat(mData$2);if(!isNaN(mData$2))
R=mData$2}}}
return R};function w3_GetStyle(tagRef$6,aStyleName$4){var R=undefined;var mObj$3=undefined;mObj$3=document.defaultView.getComputedStyle(tagRef$6,null);if(mObj$3)
R=(mObj$3).getPropertyValue(aStyleName$4);return R};function w3_getPropertyAsStr(tagRef$7,aPropName$1){var R="";R=String(tagRef$7[aPropName$1]);return R};function w3_getPropertyAsInt(tagRef$8,aPropName$2){var R=0;R=parseInt(tagRef$8[aPropName$2],10);return R};function w3_getIsSafari(){var R=false;if(navigator.userAgent.match(/Safari/i))R=true;return R};function w3_getIsOpera(){var R=false;if(navigator.userAgent.match(/Opera/i))R=true;return R};function w3_getIsIPod(){var R=false;if(navigator.userAgent.match(/iPod/i))R=true;return R};function w3_getIsIPhone(){var R=false;if(navigator.userAgent.match(/iPhone/i))R=true;return R};function w3_getIsIPad(){var R=false;if(navigator.userAgent.match(/iPad/i))R=true;return R};function w3_getIsInternetExplorer(){var R=false;var ua;function IE_Edge(){var R=false;var edge;edge=(ua).indexOf('Edge/');R=(edge>0);return R};function IE_11(){var R=false;var trident;trident=(ua).indexOf('Trident/');R=(trident>0);return R};function IE_10_Or_Older(){var R=false;var msie;msie=(ua).indexOf('MSIE ');R=(msie>0);return R};ua=window.navigator.userAgent;R=IE_Edge()||IE_11()||IE_10_Or_Older();return R};function w3_getIsFirefox(){var R=false;if(navigator.userAgent.match(/Firefox/i))R=true;return R};function w3_getIsChrome(){var R=false;if(navigator.userAgent.match(/Chrome/i))R=true;return R};function w3_getIsAndroid(){var R=false;if(navigator.userAgent.match(/Android/i))R=true;return R};function w3_getAttribAsStr(tagRef$9,aAttribName$1){var R="";R=String(tagRef$9.getAttribute(aAttribName$1,0));return R};function w3_getAttrib(tagRef$10,aAttribName$2){var R=undefined;R=tagRef$10.getAttribute(aAttribName$2);return R};function w3_createHtmlElement(aTypeName){var R=undefined;R=document.createElement(aTypeName);return R};function w3_AddEvent(a_tagRef$1,a_eventName$1,a_callback$1,a_useCapture$1){if(a_eventName$1=="mousewheel")a_eventName$1="DOMMouseScroll";a_tagRef$1.addEventListener(a_eventName$1,a_callback$1,a_useCapture$1)};var TW3CustomBrowserAPI={$ClassName:"TW3CustomBrowserAPI",$Parent:TObject,$Init:function($){TObject.$Init($);$.FCSSAnimation=$.FCSSBackgroundColor=$.FCSSBackgroundImage=$.FCSSBackgroundPos=$.FCSSBackgroundSize=$.FCSSToken=$.FCSSTransform=""},DevicePixelRatio:function(){var R=0;R=window.devicePixelRatio||1;return R},Prefix:function(S,aCSS){var R="";R=S.FCSSToken+aCSS;return R},PrefixDef:function(S,aCss){var R="";R="-"+S.FCSSToken+"-"+aCss;return R},Destroy:TObject.Destroy};var TW3WebkitBrowserAPI={$ClassName:"TW3WebkitBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$97:function(S){S.FCSSToken="webkit";S.FCSSBackgroundImage="background-image";S.FCSSBackgroundSize="webkitbackgroundSize";S.FCSSBackgroundPos="webkitbackgroundPosition";S.FCSSBackgroundColor="webkitbackgroundColor";S.FCSSTransform="webkitTransform";S.FCSSAnimation="webkitAnimation";return S},Destroy:TObject.Destroy};var TW3URLObject={$ClassName:"TW3URLObject",$Parent:TObject,$Init:function($){TObject.$Init($)},RevokeObjectURL:function(S,ObjectUrl){if(ObjectUrl.length>0){var encdec=window.URL||window.webkitURL||window.mozURL||window.msURL;if(encdec){encdec.revokeObjectURL(ObjectUrl)}else
throw"window URL-object could not be obtained error"}else{throw Exception.Create($New(EAllocation),"Failed to revoke object URL, reference string was empty error")}},Destroy:TObject.Destroy};var TW3OperaBrowserAPI={$ClassName:"TW3OperaBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$98:function(S){S.FCSSToken="O";S.FCSSBackgroundImage="OBackgroundImage";S.FCSSBackgroundSize="OBackgroundSize";S.FCSSBackgroundPos="OBackgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="OTransform";S.FCSSAnimation="OAnimation";return S},Destroy:TObject.Destroy};var TW3MouseCursor={$ClassName:"TW3MouseCursor",$Parent:TObject,$Init:function($){TObject.$Init($)},CursorByName:function(S,CursorName){var R=0;R=TVariant.Asinteger(__CURSOR_NAME_LUT[(Trim$_String_(CursorName)).toLocaleLowerCase()]);return R},NameByCursor:function(S,Cursor$1){var R="";R=TVariant.Asstring(__CURSOR_DATA_LUT[Cursor$1]);return R},GetCursorFromElement:function(S,Handle$16){var R=0;if(TControlHandleHelper$Valid$2(Handle$16)){if(Handle$16.style["cursor"]){R=TW3MouseCursor.CursorByName(S,(String(Handle$16.style["cursor"])))}else R=1}
return R},SetCursorForElement:function(S,Handle$17,Cursor$2){if(TControlHandleHelper$Valid$2(Handle$17)){Handle$17.style["cursor"]=TW3MouseCursor.NameByCursor(S,Cursor$2)}},Destroy:TObject.Destroy};var TW3IEBrowserAPI={$ClassName:"TW3IEBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$99:function(S){S.FCSSToken="ms";S.FCSSBackgroundImage="msBackgroundImage";S.FCSSBackgroundSize="msBackgroundSize";S.FCSSBackgroundPos="msBackgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="msTransform";S.FCSSAnimation="msAnimation";return S},Destroy:TObject.Destroy};var TW3FirefoxBrowserAPI={$ClassName:"TW3FirefoxBrowserAPI",$Parent:TW3CustomBrowserAPI,$Init:function($){TW3CustomBrowserAPI.$Init($)},Create$100:function(S){S.FCSSToken="Moz";S.FCSSBackgroundImage="backgroundImage";S.FCSSBackgroundSize="backgroundSize";S.FCSSBackgroundPos="backgroundPosition";S.FCSSBackgroundColor="backgroundColor";S.FCSSTransform="MozTransform";S.FCSSAnimation="MozAnimation";return S},Destroy:TObject.Destroy};var TW3DOMEventMode=["dmCapture","dmBubble"];var TW3DOMEventAPI={$ClassName:"TW3DOMEventAPI",$Parent:TObject,$Init:function($){TObject.$Init($)},EventObject$1:function(e$1){var R=null;R=e$1||window.event;return R},RegisterEvent:function(Handle$18,EventName$1,EventHandler,Mode$1){if(Handle$18){if(Handle$18.addEventListener){Handle$18.addEventListener(EventName$1,EventHandler,Mode$1==0)}else{Handle$18.attachEvent("on"+EventName$1,EventHandler,Mode$1==0)}}else{throw Exception.Create($New(Exception),"Register event failed, invalid handle error")}},UnRegisterEvent:function(Handle$19,EventName$2,EventHandler$1,Mode$2){if(Handle$19){if(Handle$19.removeEventListener){Handle$19.removeEventListener(EventName$2,EventHandler$1,Mode$2==0)}else{Handle$19.detachEvent("on"+EventName$2,EventHandler$1,Mode$2==0)}}else{throw Exception.Create($New(Exception),"Unregister event failed, invalid handle error")}},Destroy:TObject.Destroy};var TW3CustomDeviceCapabilities={$ClassName:"TW3CustomDeviceCapabilities",$Parent:TObject,$Init:function($){TObject.$Init($)},Destroy:TObject.Destroy,GetGamePadSupport$:function($){return $.ClassType.GetGamePadSupport($)},GetKeyboardSupported$:function($){return $.ClassType.GetKeyboardSupported($)},GetMouseSupport$:function($){return $.ClassType.GetMouseSupport($)},GetTouchSupport$:function($){return $.ClassType.GetTouchSupport($)}};var TW3DOMDeviceCapabilities={$ClassName:"TW3DOMDeviceCapabilities",$Parent:TW3CustomDeviceCapabilities,$Init:function($){TW3CustomDeviceCapabilities.$Init($)},GetGamePadSupport:function(S){var R=false;var LNavigator=undefined;LNavigator=navigator;R=((LNavigator.getGamepads||LNavigator.webkitGetGamepads||LNavigator.mozGetGamepads||LNavigator.msGetGamepads)?true:false);return R},GetKeyboardSupported:function(S){var R=false;R=true;return R},GetMouseSupport:function(S){var R=false;R=(('onmousedown'in window)&&('onmouseup'in window)&&('onmousemove'in window)&&('onclick'in window)&&('ondblclick'in window)&&('onmousemove'in window)&&('onmouseover'in window)&&('onmouseout'in window)&&('oncontextmenu'in window));return R},GetTouchSupport:function(S){var R=false;try{document.createEvent("TouchEvent");R=true}catch($e){var e$2=$W($e)}
R=(("ontouchstart"in window)||(navigator.maxTouchPoints)||(navigator.maxTouchPoints>0));if(!R){R=("onmsgesturechange"in window)}
return R},Destroy:TObject.Destroy,GetGamePadSupport$:function($){return $.ClassType.GetGamePadSupport($)},GetKeyboardSupported$:function($){return $.ClassType.GetKeyboardSupported($)},GetMouseSupport$:function($){return $.ClassType.GetMouseSupport($)},GetTouchSupport$:function($){return $.ClassType.GetTouchSupport($)}};var TW3BrowserVendor=["bvUnknown","bviOS","bvAndroid","bvChrome","bvSafari","bvFirefox","bvOpera","bvIE"];function Copy$TPixelsPerInch(s,d){return d}
function Clone$TPixelsPerInch($){return{}}
var TCursor=["crAuto","crDefault","crInherited","crURL","crCrossHair","crHelp","crMove","crPointer","crProgress","crText","crWait","crNResize","crSResize","crEResize","crWResize","crNEResize","crNWResize","crNSResize","crSEResize","crSWResize","crEWResize"];function TControlHandleHelper$Equals$1(Self$1,Source){var R=false;R=(Self$1==Source);return R}
function TControlHandleHelper$GetChildById(Self$2,TagId$1){var R=undefined;R=Self$2.getElementById(TagId$1);return R}
function TControlHandleHelper$GetChildren(Self$3){var R=[];var x$35=0;var LCount=0;var LLongs=0;var LSingles=0;x$35=0;LCount=parseInt(Self$3.children.length,10);LLongs=LCount>>>3;LSingles=LCount-(LLongs<<3);while(LLongs>0){R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;--LLongs}
switch(LSingles){case 1:R.push(Self$3.children[x$35]);++x$35;break;case 2:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break;case 3:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break;case 4:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break;case 5:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break;case 6:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break;case 7:R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;R.push(Self$3.children[x$35]);++x$35;break}
return R}
function TControlHandleHelper$Ready$3(Self$4){var R=false;R=document.body.contains(Self$4);return R}
function TControlHandleHelper$ReadyExecute(Self$5,OnReady){var LExists=false;LExists=document.body.contains(Self$5);if(LExists){OnReady()}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TControlHandleHelper$ReadyExecute(Self$5,OnReady)},100)}
function TControlHandleHelper$ReadyExecuteAnimFrame(Self$6,OnReady$1){var LExists$1=false;LExists$1=document.body.contains(Self$6);if(LExists$1){TW3Dispatch.RequestAnimationFrame(TW3Dispatch,OnReady$1)}else{TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TControlHandleHelper$ReadyExecuteAnimFrame(Self$6,OnReady$1)},100)}}
function TControlHandleHelper$ReadyExecuteEx(Self$7,Tag,OnReady$2){var LExists$2=false;LExists$2=document.body.contains(Self$7);if(LExists$2){OnReady$2(Tag)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TControlHandleHelper$ReadyExecuteEx(Self$7,Tag,OnReady$2)},100)}
function TControlHandleHelper$Valid$2(Self$8){var R=false;R=(Self$8?true:false);return R}
function BrowserAPI(){var R=null;if(vDriver===null)InternalInitVendorInfo();R=vDriver;return R};function SetupMouseCursorTable(){__CURSOR_NAME_LUT=TVariant.CreateObject();__CURSOR_NAME_LUT["default"]=1;__CURSOR_NAME_LUT["auto"]=0;__CURSOR_NAME_LUT["inherited"]=2;__CURSOR_NAME_LUT["url"]=3;__CURSOR_NAME_LUT["crosshair"]=4;__CURSOR_NAME_LUT["help"]=5;__CURSOR_NAME_LUT["move"]=6;__CURSOR_NAME_LUT["pointer"]=7;__CURSOR_NAME_LUT["progress"]=8;__CURSOR_NAME_LUT["text"]=9;__CURSOR_NAME_LUT["wait"]=10;__CURSOR_NAME_LUT["n-resize"]=11;__CURSOR_NAME_LUT["s-resize"]=12;__CURSOR_NAME_LUT["e-resize"]=13;__CURSOR_NAME_LUT["w-resize"]=14;__CURSOR_NAME_LUT["ne-resize"]=15;__CURSOR_NAME_LUT["nw-resize"]=16;__CURSOR_NAME_LUT["se-resize"]=18;__CURSOR_NAME_LUT["sw-resize"]=19;__CURSOR_NAME_LUT["ew-resize"]=20;__CURSOR_NAME_LUT["ns-resize"]=17;__CURSOR_DATA_LUT=TVariant.CreateObject();__CURSOR_DATA_LUT[1]="default";__CURSOR_DATA_LUT[0]="auto";__CURSOR_DATA_LUT[2]="inherited";__CURSOR_DATA_LUT[3]="url";__CURSOR_DATA_LUT[4]="crosshair";__CURSOR_DATA_LUT[5]="help";__CURSOR_DATA_LUT[6]="move";__CURSOR_DATA_LUT[7]="pointer";__CURSOR_DATA_LUT[8]="progress";__CURSOR_DATA_LUT[9]="text";__CURSOR_DATA_LUT[10]="wait";__CURSOR_DATA_LUT[11]="n-resize";__CURSOR_DATA_LUT[12]="s-resize";__CURSOR_DATA_LUT[13]="e-resize";__CURSOR_DATA_LUT[14]="w-resize";__CURSOR_DATA_LUT[15]="ne-resize";__CURSOR_DATA_LUT[16]="nw-resize";__CURSOR_DATA_LUT[18]="se-resize";__CURSOR_DATA_LUT[19]="sw-resize";__CURSOR_DATA_LUT[20]="ew-resize";__CURSOR_NAME_LUT[17]="ns-resize"};function InternalInitVendorInfo(){if(w3_getIsAndroid()){vVendor=2}else if(w3_getIsSafari()){vVendor=4}else if(w3_getIsFirefox()){vVendor=5}else if(w3_getIsChrome()){vVendor=3}else if(w3_getIsInternetExplorer()){vVendor=7}else if(w3_getIsOpera())vVendor=6;if(vVendor==0){if(w3_getIsIPhone()||w3_getIsIPad()||w3_getIsIPod())vVendor=1}
switch(vVendor){case 1:case 4:case 3:case 2:w3_RegisterBrowserAPI(TW3WebkitBrowserAPI.Create$97($New(TW3WebkitBrowserAPI)));break;case 5:w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$100($New(TW3FirefoxBrowserAPI)));break;case 7:w3_RegisterBrowserAPI(TW3IEBrowserAPI.Create$99($New(TW3IEBrowserAPI)));break;case 6:w3_RegisterBrowserAPI(TW3OperaBrowserAPI.Create$98($New(TW3OperaBrowserAPI)));break;default:w3_RegisterBrowserAPI(TW3FirefoxBrowserAPI.Create$100($New(TW3FirefoxBrowserAPI)))}};var JMouseButton=["Left","Middle","Right"];function TW3VariantHelper$DataType(Self$9){var R=1;var LType="";if(TW3VariantHelper$Valid$3(Self$9)){LType=typeof(Self$9);switch((LType).toLocaleLowerCase()){case"object":if(!Self$9.length){R=8}else R=9;break;case"function":R=7;break;case"symbol":R=6;break;case"boolean":R=2;break;case"string":R=5;break;case"number":if(Math.round(Number(Self$9))!=Self$9){R=4}else R=3;break;case"array":R=9;break;default:R=1}}else{if(Self$9==null){R=10}else R=1}
return R}
function TW3VariantHelper$Defined(Self$10){var R=false;R=!(Self$10==undefined);return R}
function TW3VariantHelper$IsObject(Self$11){var R=false;R=((Self$11)!==undefined)&&(Self$11!==null)&&(typeof Self$11==="object")&&((Self$11).length===undefined);return R}
function TW3VariantHelper$Isstring(Self$12){var R=false;R=(Self$12!==undefined)&&(Self$12!==null)&&(typeof Self$12==="string");return R}
function TW3VariantHelper$Valid$3(Self$13){var R=false;R=!((Self$13==undefined)||(Self$13==null));return R}
var TW3VariantDataType={1:"vdUnknown",2:"vdBoolean",3:"vdinteger",4:"vdfloat",5:"vdstring",6:"vdSymbol",7:"vdFunction",8:"vdObject",9:"vdArray",10:"vdVariant"};var TW3OwnedObject={$ClassName:"TW3OwnedObject",$Parent:TObject,$Init:function($){TObject.$Init($);$.FOwner=null},GetOwner:function(S){var R=null;R=S.FOwner;return R},SetOwner:function(S,NewOwner){if(NewOwner!==S.FOwner){if(TW3OwnedObject.AcceptOwner$(S,NewOwner)){S.FOwner=NewOwner}else{throw EW3Exception.CreateFmt($New(EW3OwnedObject),$R[0],["TW3OwnedObject.SetOwner",TObject.ClassName(S.ClassType),$R[2]])}}},AcceptOwner:function(S,CandidateObject){var R=false;R=true;return R},Create$10:function(S,AOwner){TObject.Create(S);TW3OwnedObject.SetOwner(S,AOwner);return S},Destroy:TObject.Destroy,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3OwnedObject.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Identifiers={$ClassName:"TW3Identifiers",$Parent:TObject,$Init:function($){TObject.$Init($)},GenerateUniqueComponentName$1:function(S){var R="";++__UNIQUE;R="Component"+__UNIQUE.toString();return R},GenerateUniqueObjectId:function(S){var R="";++__UNIQUE;R="OBJ"+__UNIQUE.toString();return R},GenerateUniqueNumber:function(S){var R=0;++__UNIQUE;R=__UNIQUE;return R},Destroy:TObject.Destroy};var TVariant={$ClassName:"TVariant",$Parent:TObject,$Init:function($){TObject.$Init($)},Asfloat:function(aValue$2){var R=0;if(aValue$2!=undefined&&aValue$2!=null)R=Number(aValue$2);return R},Asinteger:function(aValue$3){var R=0;if(aValue$3!=undefined&&aValue$3!=null)R=parseInt(aValue$3,10);return R},AsObject:function(aValue$4){var R=null;if(aValue$4!=undefined&&aValue$4!=null){R=aValue$4}
return R},Asstring:function(aValue$5){var R="";if(aValue$5!=undefined&&aValue$5!=null)R=String(aValue$5);return R},CreateObject:function(){var R=undefined;R=new Object();return R},ForEachProperty:function(Data$4,CallBack$1){var LObj={};var Keys$2=[],a$298=0;var LName="";if(CallBack$1){Keys$2=TVariant.Properties(Data$4);var $t2;for(a$298=0,$t2=Keys$2.length;a$298<$t2;a$298++){LName=Keys$2[a$298];LObj=Keys$2[LName];if(CallBack$1(LName,LObj)==1){Data$4[LName]=LObj.v}else break}}},IsNAN:function(aValue$6){var R=false;R=isNaN(Number(aValue$6));return R},IsNumber:function(aValue$7){var R=false;R=typeof(aValue$7)==__TYPE_MAP.Number$1;return R},IsString:function(aValue$8){var R=false;R=typeof(aValue$8)==__TYPE_MAP.String$1;return R},Properties:function(Data$5){var R=[];if(Data$5){if(Object.keys!==undefined){R=Object.keys(Data$5);return R}
if(Object.getOwnPropertyNames!==undefined){R=Object.getOwnPropertyNames(Data$5)}
return R;for(var qtxenum in Data$5){if((Data$5).hasOwnProperty(qtxenum)==true)
(R).push(qtxenum)}
return R}
return R},ValidRef:function(aValue$9){var R=false;R=aValue$9!=undefined&&aValue$9!=null;return R},Destroy:TObject.Destroy};var TTextFormation={256:"tfHex",257:"tfOrdinal",258:"tfFloat",259:"tfQuote"};function TStringHelper$ContainsHex(Self$14){var R=false;var x$36=0;var LStart=0;var LItem="";var LLen=0;R=false;LLen=Self$14.length;if(LLen>=1){LStart=1;if(Self$14.charAt(0)=="$"){++LStart;--LLen}else{LItem=(Self$14.substr(0,1)).toLocaleUpperCase();R=("0123456789ABCDEF".indexOf(LItem)+1)>0;if(!R)return R}
if(LLen>=1){var $t3;for(x$36=LStart,$t3=Self$14.length;x$36<=$t3;x$36++){LItem=(Self$14.charAt(x$36-1)).toLocaleUpperCase();R=("0123456789ABCDEF".indexOf(LItem)+1)>0;if(!R)break}}}
return R}
function TStringHelper$ContainsOrdinal(Self$15){var R=false;var x$37=0;var LItem$1="";var LLen$1=0;R=false;LLen$1=Self$15.length;if(LLen$1>=1){var $t4;for(x$37=1,$t4=LLen$1;x$37<=$t4;x$37++){LItem$1=Self$15.charAt(x$37-1);R=("0123456789".indexOf(LItem$1)+1)>0;if(!R)break}}
return R}
function TStringHelper$ContainsFloat(Self$16){var R=false;var x$38=0;var LItem$2="";var LLen$2=0;var LLine=false;R=false;LLen$2=Self$16.length;if(LLen$2>=1){LLine=false;var $t5;for(x$38=1,$t5=LLen$2;x$38<=$t5;x$38++){LItem$2=Self$16.charAt(x$38-1);if(LItem$2=="."){if(x$38==1&&LLen$2==1){break}
if(x$38==1&&LLen$2>1){LLine=true;continue}
if(x$38>1&&x$38<LLen$2){if(!LLine){LLine=true;continue}else break}else break}
R=("0123456789".indexOf(LItem$2)+1)>0;if(!R)break}}
return R}
function TStringHelper$ContainsQuote(Self$17){var R=false;var LLen$3=0;var LStart$1=0;var LFound=false;var LQuote=["",""];R=false;LLen$3=Self$17.length;if(LLen$3>=2){LStart$1=1;while(LStart$1<=LLen$3){if(Self$17.charAt(LStart$1-1)==" "){++LStart$1;continue}else break}
LQuote[false?1:0]="'";LQuote[true?1:0]="\"";if(Self$17.charAt(LStart$1-1)!=LQuote[true?1:0]||Self$17.charAt(LStart$1-1)!=LQuote[false?1:0]){return R}
if(LStart$1>=LLen$3){return R}
++LStart$1;LFound=false;while(LStart$1<=LLen$3){if(Self$17.charAt(LStart$1-1)!=LQuote[true?1:0]||Self$17.charAt(LStart$1-1)!=LQuote[false?1:0]){LFound=true}
++LStart$1}
if(!LFound)return R;if(LStart$1==LLen$3){R=true;return R}
while(LStart$1<=LLen$3){if(Self$17.charAt(LStart$1-1)!=" "){LFound=false;break}else++LStart$1}
R=LFound}
return R}
var TString={$ClassName:"TString",$Parent:TObject,$Init:function($){TObject.$Init($)},CharCodeFor:function(S,Character){var R=0;R=(Character).charCodeAt(0);return R},DecodeBase64:function(S,TextToDecode){var R="";var chr1=0;var chr2=0;var chr3=0;var enc1=0;var enc2=0;var enc3=0;var enc4=0;var x$39=0;TextToDecode=TString.ForEach$1(S,TextToDecode,function(Sample){var R=false;R=(((Sample>="A")&&(Sample<="Z"))||((Sample>="a")&&(Sample<="z"))||((Sample>="0")&&(Sample<="9"))||Sample=="+"||Sample=="\/"||Sample=="=");return R});x$39=1;while(x$39<TextToDecode.length){enc1=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".indexOf(TextToDecode.charAt(x$39-1))+1);++x$39;enc2=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".indexOf(TextToDecode.charAt(x$39-1))+1);++x$39;enc3=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".indexOf(TextToDecode.charAt(x$39-1))+1);++x$39;enc4=("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".indexOf(TextToDecode.charAt(x$39-1))+1);++x$39;chr1=(enc1<<2)|(enc2>>>4);chr2=((enc2&15)<<4)|(enc3>>>2);chr3=((enc3&3)<<6)|enc4;R+=TString.FromCharCode(TString,chr1);if(enc3!=64)R+=TString.FromCharCode(TString,chr2);if(enc4!=64)R+=TString.FromCharCode(TString,chr3)}
return R},DecodeUTF8:function(S,BytesToDecode){var R="";var i=0;var c$1=0;var c2=0;var c3=0;i=0;while(i<BytesToDecode.length){c$1=BytesToDecode[i];if(c$1<128){R+=TString.FromCharCode(TString,c$1);++i}else if(c$1>191&&c$1<224){c2=BytesToDecode[i+1];R+=TString.FromCharCode(TString,(((c$1&31)<<6)|(c2&63)));(i+=2)}else{c2=BytesToDecode[i+1];c3=BytesToDecode[i+2];R+=TString.FromCharCode(TString,(((c$1&15)<<12)|(((c2&63)<<6)|(c3&63))));(i+=3)}}
return R},EncodeBase64:function(S,TextToEncode){var R="";var LBytes=[],chr1$1=0;var chr2$1=0;var chr3$1=0;var enc1$1=0;var enc2$1=0;var enc3$1=0;var enc4$1=0;var i$1=0;LBytes=TString.EncodeUTF8(S,TextToEncode);i$1=0;while(i$1<LBytes.length){chr1$1=LBytes[i$1];++i$1;chr2$1=LBytes[i$1];++i$1;chr3$1=LBytes[i$1];++i$1;enc1$1=chr1$1>>>2;enc2$1=((chr1$1&3)<<4)|(chr2$1>>>4);enc3$1=((chr2$1&15)<<2)|(chr3$1>>>6);enc4$1=chr3$1&63;if(TVariant.IsNAN(chr2$1)){enc3$1=enc4$1=64}else if(TVariant.IsNAN(chr3$1)){enc4$1=64}
R+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".charAt(enc1$1-1)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".charAt(enc2$1-1)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".charAt(enc3$1-1)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/=".charAt(enc4$1-1)}
return R},EncodeUTF8:function(S,TextToEncode$1){var R=[];var n=0;var c$2=0;TextToEncode$1=StrReplace(TextToEncode$1,"\r\n","\r");if(TextToEncode$1.length>0){var $t6;for(n=1,$t6=TextToEncode$1.length;n<=$t6;n++){c$2=TString.CharCodeFor(TString,TextToEncode$1.charAt(n-1));if(c$2<128){R.push(c$2)}else if(c$2>127&&c$2<2048){R.push(((c$2>>>6)|192));R.push(((c$2&63)|128))}else{R.push(((c$2>>>12)|224));R.push((((c$2>>>6)&63)|128));R.push(((c$2&63)|128))}}}
return R},Explode:function(S,Value$1,Delimiter){var R=[];R=(Value$1).split(Delimiter);return R},ForEach$1:function(S,Text$8,Callback$1){var R="";var x$40=0;var LSample="";if(Callback$1){var $t7;for(x$40=1,$t7=Text$8.length;x$40<=$t7;x$40++){LSample=Text$8.charAt(x$40-1);if(Callback$1(LSample))R+=LSample}}else R=Text$8;return R},FromCharCode:function(S,CharCode$1){var R="";R=String.fromCharCode(CharCode$1);return R},Destroy:TObject.Destroy};var TInteger={$ClassName:"TInteger",$Parent:TObject,$Init:function($){TObject.$Init($)},Diff:function(Primary,Secondary){var R=0;if(Primary!=Secondary){if(Primary>Secondary){R=Primary-Secondary}else R=Secondary-Primary;if(R<0)R=(R-1)^(-1)}else R=0;return R},EnsureRange:function(aValue$10,aMin,aMax){var R=0;R=ClampInt(aValue$10,aMin,aMax);return R},FromPxStr:function(aValue$11){var R=0;var LText="";if(StrEndsWith((aValue$11).toLocaleLowerCase(),"px")){LText=aValue$11.substr(0,(aValue$11.length-2));if(TVariant.IsNumber(LText))R=parseInt(LText,10)}
return R},SubtractSmallest:function(First,Second){var R=0;if(First<Second){R=Second-First}else R=First-Second;return R},ToNearest:function(Value$2,Factor){var R=0;var FTemp=0;R=Value$2;FTemp=Value$2%Factor;if(FTemp>0)(R+=(Factor-FTemp));return R},ToPxStr:function(aValue$12){var R="";R=aValue$12.toString()+"px";return R},WrapRange:function(aValue$13,aLowRange,aHighRange){var R=0;if(aValue$13>aHighRange){R=aLowRange+TInteger.Diff(aHighRange,(aValue$13-1));if(R>aHighRange)R=TInteger.WrapRange(R,aLowRange,aHighRange)}else if(aValue$13<aLowRange){R=aHighRange-TInteger.Diff(aLowRange,(aValue$13+1));if(R<aLowRange)R=TInteger.WrapRange(R,aLowRange,aHighRange)}else R=aValue$13;return R},Destroy:TObject.Destroy};function THandleHelper$Valid$4(Self$18){var R=false;R=!((Self$18==undefined)||(Self$18==null));return R}
var TFileAccessMode=["fmOpenRead","fmOpenWrite","fmOpenReadWrite"];var TEnumState={1:"esContinue",0:"esAbort"};var TEnumResult={160:"erContinue",16:"erBreak"};function Copy$TDataTypeMap(s,d){d.Boolean=s.Boolean;d.Number$1=s.Number$1;d.String$1=s.String$1;d.Object$2=s.Object$2;d.Undefined=s.Undefined;d.Function$1=s.Function$1;return d}
function Clone$TDataTypeMap($){return{Boolean:$.Boolean,Number$1:$.Number$1,String$1:$.String$1,Object$2:$.Object$2,Undefined:$.Undefined,Function$1:$.Function$1}}
var EW3Exception={$ClassName:"EW3Exception",$Parent:Exception,$Init:function($){Exception.$Init($)},CreateFmt:function(S,aText,aValues){Exception.Create(S,Format(aText,aValues.slice(0)));return S},Create$16:function(S,MethodName,Instance$3,ErrorText){var LCallerName="";LCallerName=(Instance$3)?TObject.ClassName(Instance$3.ClassType):"Anonymous";EW3Exception.CreateFmt(S,$R[0],[MethodName,LCallerName,ErrorText]);return S},Destroy:Exception.Destroy};var EW3OwnedObject={$ClassName:"EW3OwnedObject",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function SetupTypeLUT(){__TYPE_MAP.Boolean=typeof(true);__TYPE_MAP.Number$1=typeof(0);__TYPE_MAP.String$1=typeof("");__TYPE_MAP.Object$2=typeof(TVariant.CreateObject());__TYPE_MAP.Undefined=typeof(undefined);__TYPE_MAP.Function$1=typeof(function(){})};var TW3OwnedErrorObject={$ClassName:"TW3OwnedErrorObject",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FOptions$4=null},Create$10:function(S,AOwner$1){TW3OwnedObject.Create$10(S,AOwner$1);S.FOptions$4=TObject.Create($New(TW3ErrorObjectOptions));return S},Destroy:function(S){TObject.Free(S.FOptions$4);TObject.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3OwnedErrorObject.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CustomComponent={$ClassName:"TW3CustomComponent",$Parent:TW3OwnedErrorObject,$Init:function($){TW3OwnedErrorObject.$Init($);$.TagValue=0;$.Name="";$.FInitialized=false},Create$10:function(S,AOwner$2){TW3OwnedErrorObject.Create$10(S,AOwner$2);S.FInitialized=true;TW3CustomComponent.InitializeObject$(S);return S},CreateEx:function(S,AOwner$3){TW3OwnedErrorObject.Create$10(S,AOwner$3);S.FInitialized=false;return S},Destroy:function(S){if(S.FInitialized)TW3CustomComponent.FinalizeObject$(S);TW3OwnedErrorObject.Destroy(S)},FinalizeObject:function(S){},InitializeObject:function(S){},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)},FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)}};TW3CustomComponent.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Component={$ClassName:"TW3Component",$Parent:TW3CustomComponent,$Init:function($){TW3CustomComponent.$Init($)},Destroy:TW3CustomComponent.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3CustomComponent.Create$10,FinalizeObject:TW3CustomComponent.FinalizeObject,InitializeObject:TW3CustomComponent.InitializeObject};TW3Component.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Dispatch={$ClassName:"TW3Dispatch",$Parent:TObject,$Init:function($){TObject.$Init($)},CancelRequestAnimationFrame:function(S,Reference){if(!vCancelAnimFrame)InitAnimationFrameShim();vCancelAnimFrame(Reference)},ClearTimeOut:function(S,Handle$20){clearTimeout(Handle$20)},Execute:function(S,EntryPoint,WaitForInMs){var R=undefined;R=setTimeout(EntryPoint,WaitForInMs);return R},ExecuteDocumentReady:function(S,OnReady$3){if(TW3Dispatch.Ready(TW3Dispatch)){OnReady$3()}else{TW3Dispatch.Execute(TW3Dispatch,function(){if(TW3Dispatch.Ready(TW3Dispatch)){OnReady$3()}else TW3Dispatch.ExecuteDocumentReady(S,OnReady$3)},10)}},Ready:function(S){var R=false;R=(document.readyState=="complete");return R},RepeatExecute:function(S,Entrypoint$1,RepeatCount,IntervalInMs){if(Entrypoint$1){if(RepeatCount>0){Entrypoint$1();if(RepeatCount>1)TW3Dispatch.Execute(S,function(){TW3Dispatch.RepeatExecute(S,Entrypoint$1,(RepeatCount-1),IntervalInMs)},IntervalInMs)}else{Entrypoint$1();TW3Dispatch.Execute(S,function(){TW3Dispatch.RepeatExecute(S,Entrypoint$1,(-1),IntervalInMs)},IntervalInMs)}}},RequestAnimationFrame:function(S,Entrypoint$2){var R=undefined;if(!vRequestAnimFrame)InitAnimationFrameShim();R=vRequestAnimFrame(Entrypoint$2);return R},SetTimeOut:function(S,Entrypoint$3,WaitForInMs$1){var R=undefined;R=setTimeout(Entrypoint$3,WaitForInMs$1);return R},Destroy:TObject.Destroy};var TW3ErrorObjectOptions={$ClassName:"TW3ErrorObjectOptions",$Parent:TObject,$Init:function($){TObject.$Init($)},Destroy:TObject.Destroy};var TRTLDatatype=["itUnknown","itBoolean","itByte","itChar","itWord","itLong","itInt16","itInt32","itFloat32","itFloat64","itString"];var TDatatype={$ClassName:"TDatatype",$Parent:TObject,$Init:function($){TObject.$Init($)},BooleanToBytes:function(S,Value$3){var R=[];if(Value$3){R.push(1)}else{R.push(0)}
return R},BytesToBase64:function(S,Bytes$1){var R="";var binary='';var bytes=new Uint8Array(Bytes$1);var len=bytes.byteLength;for(var i=0;i<len;i++){binary+=String.fromCharCode(bytes[i])}
R=window.btoa(binary);return R},BytesToBoolean:function(S,Data$6){var R=false;if(Data$6.length>=1){R=Data$6[0]>0}else{throw Exception.Create($New(EDatatype),"Byte conversion [Bool] failed, insufficient source")}
return R},BytesToFloat32:function(S,Data$7){var R=0;if(Data$7.length>=4){__CONV_VIEW.setUint8(0,Data$7[0]);__CONV_VIEW.setUint8(1,Data$7[1]);__CONV_VIEW.setUint8(2,Data$7[2]);__CONV_VIEW.setUint8(3,Data$7[3]);R=__CONV_VIEW.getFloat32(0,a$7)}else{throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source")}
return R},BytesToFloat64:function(S,Data$8){var R=0;if(Data$8.length>=8){__CONV_VIEW.setUint8(0,Data$8[0]);__CONV_VIEW.setUint8(1,Data$8[1]);__CONV_VIEW.setUint8(2,Data$8[2]);__CONV_VIEW.setUint8(3,Data$8[3]);__CONV_VIEW.setUint8(4,Data$8[4]);__CONV_VIEW.setUint8(5,Data$8[5]);__CONV_VIEW.setUint8(6,Data$8[6]);__CONV_VIEW.setUint8(7,Data$8[7]);R=__CONV_VIEW.getFloat64(0,a$7)}else{throw Exception.Create($New(EDatatype),"Byte conversion [float32] failed, insufficient source")}
return R},BytesToInt16:function(S,Data$9){var R=0;if(Data$9.length>=2){__CONV_VIEW.setUint8(0,Data$9[0]);__CONV_VIEW.setUint8(1,Data$9[1]);R=__CONV_VIEW.getInt16(0,a$7)}else{throw Exception.Create($New(EDatatype),"Byte conversion [int16] failed, insufficient source")}
return R},BytesToInt32:function(S,Data$10){var R=0;if(Data$10.length>=4){__CONV_VIEW.setUint8(0,Data$10[0]);__CONV_VIEW.setUint8(1,Data$10[1]);__CONV_VIEW.setUint8(2,Data$10[2]);__CONV_VIEW.setUint8(3,Data$10[3]);R=__CONV_VIEW.getUint32(0,a$7)}else{throw Exception.Create($New(EDatatype),"Byte conversion [int32] failed, insufficient source")}
return R},BytesToString:function(S,Data$11){var R="";var x$41=0;var LChar="";if(Data$11.length>0){var $t8;for(x$41=0,$t8=Data$11.length;x$41<$t8;x$41++){LChar=TString.FromCharCode(TString,Data$11[x$41]);R+=LChar}}
return R},BytesToTypedArray:function(S,Values$9){var R=undefined;var mLen=0;mLen=Values$9.length;if(mLen>0){R=new Uint8Array(mLen);(R).set(Values$9,0)}else R=null;return R},BytesToVariant:function(S,Data$12){var R=undefined;switch(TDatatype.BytesToInt32(S,Data$12)){case 4027514882:Data$12.splice(0,4);R=TDatatype.BytesToBoolean(S,Data$12);break;case 4027514883:Data$12.splice(0,4);R=Data$12[0];break;case 4027514884:Data$12.splice(0,4);R=TDatatype.BytesToInt16(S,Data$12);break;case 4027514885:Data$12.splice(0,4);R=TDatatype.BytesToInt32(S,Data$12);break;case 4027514886:Data$12.splice(0,4);R=TDatatype.BytesToFloat32(S,Data$12);break;case 4027514887:Data$12.splice(0,4);R=TDatatype.BytesToFloat64(S,Data$12);break;case 4027514888:Data$12.splice(0,4);try{R=TString.DecodeUTF8(TString,Data$12)}catch($e){var e$3=$W($e);throw Exception.Create($New(EW3Exception),e$3.FMessage)}
break;default:throw Exception.Create($New(EDatatype),"Failed to convert bytes[] to intrinsic type, unknown identifier error")}
return R},ByteToChar:function(S,Value$4){var R="";R=String.fromCharCode(Value$4);return R},CharToByte:function(S,Value$5){var R=0;R=(Value$5).charCodeAt(0);return R},CreateGUID:function(S){var R="";var s=[];var hexDigits="0123456789abcdef";for(var i=0;i<36;i++){s[i]=hexDigits.substr(Math.floor(Math.random()*0x10),1)}
s[14]="4";s[19]=hexDigits.substr((s[19]&0x3)|0x8,1);s[8]=s[13]=s[18]=s[23]="-";R=s.join("");R=(R).toUpperCase();return R},Float32ToBytes:function(S,Value$6){var R=[];__CONV_VIEW.setFloat32(0,Value$6,a$7);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));return R},Float64ToBytes:function(S,Value$7){var R=[];__CONV_VIEW.setFloat64(0,Number(Value$7),a$7);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));R.push(__CONV_VIEW.getUint8(4));R.push(__CONV_VIEW.getUint8(5));R.push(__CONV_VIEW.getUint8(6));R.push(__CONV_VIEW.getUint8(7));return R},Int16ToBytes:function(S,Value$8){var R=[];__CONV_VIEW.setInt16(0,Value$8,a$7);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));return R},Int32ToBytes:function(S,Value$9){var R=[];__CONV_VIEW.setUint32(0,Value$9,a$7);R.push(__CONV_VIEW.getUint8(0));R.push(__CONV_VIEW.getUint8(1));R.push(__CONV_VIEW.getUint8(2));R.push(__CONV_VIEW.getUint8(3));return R},SizeOfType:function(S,Kind){var R=0;R=__SIZES[Kind];return R},StringToBytes:function(S,Value$10){var R=[];var x$42=0;var LCode=0;var LLen$4=0;LLen$4=Value$10.length;if(LLen$4>0){var $t9;for(x$42=0,$t9=LLen$4;x$42<$t9;x$42++){LCode=(Value$10).charCodeAt(x$42);R.push(LCode)}}
return R},TypedArrayToBytes:function(S,Value$11){var R=[];if(TVariant.ValidRef(Value$11)){R=Array.prototype.slice.call(Value$11)}
return R},TypedArrayToUInt32:function(S,Value$12){var R=0;var mTemp$1=null;mTemp$1=new Uint32Array((Value$12).buffer);R=mTemp$1[0];return R},VariantToBytes:function(S,Value$13){var R=[];var chunk=[];function IsFloat32(x$43){var R=false;R=isFinite(x$43)&&x$43==Math.fround(x$43);return R};switch(TW3VariantHelper$DataType(Value$13)){case 2:R=TDatatype.Int32ToBytes(S,4027514882);R.pusha(TDatatype.BooleanToBytes(S,(Value$13?true:false)));break;case 3:if(Value$13>=0&&Value$13<=255){R=TDatatype.Int32ToBytes(S,4027514883);R.push(parseInt(Value$13,10))}else if(Value$13>=0&&Value$13<65536){R=TDatatype.Int32ToBytes(S,4027514884);R.pusha(TDatatype.Int16ToBytes(S,parseInt(Value$13,10)))}else{R=TDatatype.Int32ToBytes(S,4027514885);R.pusha(TDatatype.Int32ToBytes(S,parseInt(Value$13,10)))}
break;case 4:if(IsFloat32(Value$13)){R=TDatatype.Int32ToBytes(S,4027514886);R.pusha(TDatatype.Float32ToBytes(S,Number(Value$13)))}else{R=TDatatype.Int32ToBytes(S,4027514887);R.pusha(TDatatype.Float64ToBytes(S,Number(Value$13)))}
break;case 5:R=TDatatype.Int32ToBytes(S,4027514888);chunk=TString.EncodeUTF8(TString,String(Value$13));R.pusha(chunk);break;default:throw Exception.Create($New(EDatatype),"Invalid datatype, byte conversion failed error")}
return R},Destroy:TObject.Destroy};var EDatatype={$ClassName:"EDatatype",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function SetupConversionLUT(){try{__CONV_BUFFER=new ArrayBuffer(16);__CONV_VIEW=new DataView(__CONV_BUFFER);__CONV_ARRAY=new Uint8Array(__CONV_BUFFER,0,15)}catch($e){var e$4=$W($e)}};var TUnManaged={$ClassName:"TUnManaged",$Parent:TObject,$Init:function($){TObject.$Init($)},AllocMemA:function(S,Size$9){var R=undefined;if(Size$9>0){R=new Uint8Array(Size$9)}else R=null;return R},ReAllocMemA:function(S,Memory$1,Size$10){var R=undefined;if(Memory$1){if(Size$10>0){R=new Uint8Array(Size$10);TMarshal.Move$1(TMarshal,Memory$1,0,R,0,Size$10)}}else R=TUnManaged.AllocMemA(S,Size$10);return R},ReadMemoryA:function(S,Memory$2,Offset$4,Size$11){var R=undefined;var mTotal=0;if(Memory$2){if(Offset$4>=0){mTotal=Offset$4+Size$11;if(mTotal>Memory$2.length)Size$11=parseInt((Memory$2.length-mTotal),10);if(Size$11>0)R=new Uint8Array(Memory$2.buffer.slice(Offset$4,Size$11))}}
return R},WriteMemoryA:function(S,Memory$3,Offset$5,Data$13){var R=0;var mTotal$1=0;var mChunk=null,mTemp$2=null;if(Memory$3){if(Data$13){mTotal$1=parseInt((Offset$5+Data$13.length),10);if(mTotal$1>Memory$3.length){R=parseInt((Memory$3.length-mTotal$1),10)}else R=parseInt(Data$13.length,10);if(R>0){if(Offset$5+Data$13.length<=Memory$3.length){Memory$3.set(Data$13,Offset$5)}else{mChunk=Data$13.buffer.slice(0,R-1);mTemp$2=new Uint8Array(mChunk);Memory$3.set(mTemp$2,Offset$5)}}}}
return R},Destroy:TObject.Destroy};function TMemoryHandleHelper$Valid$5(Self$19){var R=false;R=!((Self$19==undefined)||(Self$19==null));return R}
function TMemoryHandleHelper$Defined$1(Self$20){var R=false;R=!(self==undefined);return R}
var TMarshal={$ClassName:"TMarshal",$Parent:TObject,$Init:function($){TObject.$Init($)},Move$1:function(S,Source$1,SourceStart,Target$1,TargetStart,Size$12){var mRef=null;if(TMemoryHandleHelper$Valid$5(Source$1)&&SourceStart>=0&&TMemoryHandleHelper$Valid$5(Target$1)&&TargetStart>=0&&Size$12>0){mRef=Source$1.subarray(SourceStart,SourceStart+Size$12);Target$1.set(mRef,TargetStart)}},Move:function(S,Source$2,Target$2,Size$13){if(Source$2!==null){if(Target$2!==null){if(Size$13>0)TMarshal.Move$1(S,Source$2.FBuffer,Source$2.FOffset,Target$2.FBuffer,Target$2.FOffset,Size$13)}}},Destroy:TObject.Destroy};var TAddress={$ClassName:"TAddress",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBuffer=undefined;$.FOffset=0},Create$19:function(S,Memory$4){if(Memory$4!==null&&TAllocation.GetSize$4(Memory$4)>0){TAddress.Create$17(S,TAllocation.GetHandle(Memory$4),0)}else{throw Exception.Create($New(Exception),"Invalid memory object error")}
return S},Create$18:function(S,Stream){var mRef$1=undefined;if($Is(Stream,TMemoryStream)){mRef$1=TAllocation.GetHandle($As(Stream,TMemoryStream).FBuffer$1);if(mRef$1){TAddress.Create$17(S,mRef$1,0)}else{throw Exception.Create($New(EAddress),$R[3])}}else{throw Exception.Create($New(EAddress),$R[4])}
return S},Create$17:function(S,aSegment,aEntrypoint){TObject.Create(S);if(TMemoryHandleHelper$Defined$1(aSegment)&&TMemoryHandleHelper$Valid$5(aSegment)){S.FBuffer=aSegment}else{throw Exception.Create($New(EAddress),"Failed to derive address, invalid segment error")}
if(aEntrypoint>=0){S.FOffset=aEntrypoint}else{throw Exception.Create($New(EAddress),"Failed to derive address, invalid entrypoint error")}
return S},Destroy:function(S){S.FBuffer=null;S.FOffset=0;TObject.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)}};var EAddress={$ClassName:"EAddress",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TStreamSeekOrigin=["soFromBeginning","soFromCurrent","soFromEnd"];var TStream={$ClassName:"TStream",$Parent:TObject,$Init:function($){TObject.$Init($)},CopyFrom:function(S,Source$3,Count$14){var R=0;R=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},DataGetSize:function(S){var R=0;R=TStream.GetSize$2$(S);return R},DataOffset:function(S){var R=0;R=TStream.GetPosition$(S);return R},DataRead:function(S,Offset$6,ByteCount){var R=[];R=TStream.ReadBuffer$(S,Offset$6,ByteCount);return R},DataWrite:function(S,Offset$7,Bytes$2){TStream.WriteBuffer$(S,Bytes$2,Offset$7)},GetPosition:function(S){var R=0;R=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},GetSize$2:function(S){var R=0;R=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},Read:function(S,Count$15){var R=[];R=TStream.ReadBuffer$(S,TStream.GetPosition$(S),Count$15);return R},ReadBuffer:function(S,Offset$8,Count$16){var R=[];R.length=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},Seek:function(S,Offset$9,Origin){var R=0;R=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},SetPosition:function(S,NewPosition){throw Exception.Create($New(EStreamNotImplemented),$R[5])},SetSize$1:function(S,NewSize){throw Exception.Create($New(EStreamNotImplemented),$R[5])},Skip:function(S,Amount){var R=0;R=0;throw Exception.Create($New(EStreamNotImplemented),$R[5]);return R},Write$1:function(S,Buffer$1){var R=0;TStream.WriteBuffer$(S,Buffer$1,TStream.GetPosition$(S));R=Buffer$1.length;return R},WriteBuffer:function(S,Buffer$2,Offset$10){throw Exception.Create($New(EStreamNotImplemented),$R[5])},Destroy:TObject.Destroy,CopyFrom$:function($){return $.ClassType.CopyFrom.apply($.ClassType,arguments)},GetPosition$:function($){return $.ClassType.GetPosition($)},GetSize$2$:function($){return $.ClassType.GetSize$2($)},ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType,arguments)},Seek$:function($){return $.ClassType.Seek.apply($.ClassType,arguments)},SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType,arguments)},SetSize$1$:function($){return $.ClassType.SetSize$1.apply($.ClassType,arguments)},Skip$:function($){return $.ClassType.Skip.apply($.ClassType,arguments)},WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType,arguments)}};TStream.$Intf={IBinaryTransport:[TStream.DataOffset,TStream.DataGetSize,TStream.DataRead,TStream.DataWrite]}
var TMemoryStream={$ClassName:"TMemoryStream",$Parent:TStream,$Init:function($){TStream.$Init($);$.FBuffer$1=null;$.FPos=0},CopyFrom:function(S,Source$4,Count$17){var R=0;var LData=[];LData=TStream.ReadBuffer$(Source$4,TStream.GetPosition$(Source$4),Count$17);TStream.WriteBuffer$(S,LData,TStream.GetPosition$(S));R=LData.length;return R},Create$23:function(S){TObject.Create(S);S.FBuffer$1=TAllocation.Create$26($New(TAllocation));return S},Destroy:function(S){TObject.Free(S.FBuffer$1);TObject.Destroy(S)},GetPosition:function(S){var R=0;R=S.FPos;return R},GetSize$2:function(S){var R=0;R=TAllocation.GetSize$4(S.FBuffer$1);return R},ReadBuffer:function(S,Offset$11,Count$18){var R=[];var mTemp$3=undefined;var mLen$1=0;var LBytesToMove=0;if(TStream.GetPosition$(S)<TStream.GetSize$2$(S)){mLen$1=TStream.GetSize$2$(S)-TStream.GetPosition$(S)}else mLen$1=0;if(mLen$1>0){try{LBytesToMove=Count$18;if(LBytesToMove>mLen$1)LBytesToMove=mLen$1;mTemp$3=new Uint8Array(LBytesToMove);TMarshal.Move$1(TMarshal,TAllocation.GetHandle(S.FBuffer$1),Offset$11,mTemp$3,0,LBytesToMove);R=TDatatype.TypedArrayToBytes(TDatatype,mTemp$3);TStream.SetPosition$(S,Offset$11+R.length)}catch($e){var e$5=$W($e);throw EW3Exception.CreateFmt($New(EStreamReadError),$R[8],[e$5.FMessage])}}
return R},Seek:function(S,Offset$12,Origin$1){var R=0;var mSize=0;mSize=TStream.GetSize$2$(S);if(mSize>0){switch(Origin$1){case 0:if(Offset$12>-1){TStream.SetPosition$(S,Offset$12);R=Offset$12}
break;case 1:R=TInteger.EnsureRange((TStream.GetPosition$(S)+Offset$12),0,mSize);TStream.SetPosition$(S,R);break;case 2:R=TInteger.EnsureRange((TStream.GetSize$2$(S)-Math.abs(Offset$12)),0,mSize);TStream.SetPosition$(S,R);break}}
return R},SetPosition:function(S,NewPosition$1){var LSize=0;LSize=TStream.GetSize$2$(S);if(LSize>0)S.FPos=TInteger.EnsureRange(NewPosition$1,0,LSize)},SetSize$1:function(S,NewSize$1){var mSize$1=0;var mDiff=0;mSize$1=TStream.GetSize$2$(S);if(NewSize$1>0){if(NewSize$1>mSize$1){mDiff=NewSize$1-mSize$1;if(TAllocation.GetSize$4(S.FBuffer$1)+mDiff>0){TAllocation.Grow(S.FBuffer$1,mDiff)}else TAllocation.Release(S.FBuffer$1)}else{mDiff=mSize$1-NewSize$1;if(TAllocation.GetSize$4(S.FBuffer$1)-mDiff>0){TAllocation.Shrink(S.FBuffer$1,mDiff)}else TAllocation.Release(S.FBuffer$1)}}else TAllocation.Release(S.FBuffer$1);S.FPos=TInteger.EnsureRange(S.FPos,0,TStream.GetSize$2$(S))},Skip:function(S,Amount$1){var R=0;var mTotal$2=0;var mSize$2=0;mSize$2=TStream.GetSize$2$(S);if(mSize$2>0){mTotal$2=TStream.GetPosition$(S)+Amount$1;if(mTotal$2>mSize$2)mTotal$2=mSize$2-mTotal$2;(S.FPos+=mTotal$2);R=mTotal$2}
return R},WriteBuffer:function(S,Buffer$3,Offset$13){var mData$3=undefined;try{if(TAllocation.a$30(S.FBuffer$1)&&Offset$13<1){TAllocation.Allocate(S.FBuffer$1,Buffer$3.length);mData$3=TDatatype.BytesToTypedArray(TDatatype,Buffer$3);TMarshal.Move$1(TMarshal,mData$3,0,TAllocation.GetHandle(S.FBuffer$1),0,Buffer$3.length);TMarshal.Move$1(TMarshal,mData$3,0,TAllocation.GetHandle(S.FBuffer$1),0,Buffer$3.length)}else{if(TStream.GetPosition$(S)==TStream.GetSize$2$(S)){TAllocation.Grow(S.FBuffer$1,Buffer$3.length);mData$3=TDatatype.BytesToTypedArray(TDatatype,Buffer$3);TMarshal.Move$1(TMarshal,mData$3,0,TAllocation.GetHandle(S.FBuffer$1),Offset$13,Buffer$3.length)}else TMarshal.Move$1(TMarshal,TDatatype.BytesToTypedArray(TDatatype,Buffer$3),0,TAllocation.GetHandle(S.FBuffer$1),Offset$13,Buffer$3.length)}
TStream.SetPosition$(S,Offset$13+Buffer$3.length)}catch($e){var e$6=$W($e);throw EW3Exception.CreateFmt($New(EStreamWriteError),$R[7],[e$6.FMessage])}},Destroy$:function($){return $.ClassType.Destroy($)},CopyFrom$:function($){return $.ClassType.CopyFrom.apply($.ClassType,arguments)},GetPosition$:function($){return $.ClassType.GetPosition($)},GetSize$2$:function($){return $.ClassType.GetSize$2($)},ReadBuffer$:function($){return $.ClassType.ReadBuffer.apply($.ClassType,arguments)},Seek$:function($){return $.ClassType.Seek.apply($.ClassType,arguments)},SetPosition$:function($){return $.ClassType.SetPosition.apply($.ClassType,arguments)},SetSize$1$:function($){return $.ClassType.SetSize$1.apply($.ClassType,arguments)},Skip$:function($){return $.ClassType.Skip.apply($.ClassType,arguments)},WriteBuffer$:function($){return $.ClassType.WriteBuffer.apply($.ClassType,arguments)}};TMemoryStream.$Intf={IBinaryTransport:[TStream.DataOffset,TStream.DataGetSize,TStream.DataRead,TStream.DataWrite]}
var EStream={$ClassName:"EStream",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EStreamWriteError={$ClassName:"EStreamWriteError",$Parent:EStream,$Init:function($){EStream.$Init($)},Destroy:Exception.Destroy};var EStreamReadError={$ClassName:"EStreamReadError",$Parent:EStream,$Init:function($){EStream.$Init($)},Destroy:Exception.Destroy};var EStreamNotImplemented={$ClassName:"EStreamNotImplemented",$Parent:EStream,$Init:function($){EStream.$Init($)},Destroy:Exception.Destroy};var TAllocationOptions={$ClassName:"TAllocationOptions",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FCacheSize=0;$.FUseCache=false},a$29:function(S){return $As(TW3OwnedObject.GetOwner(S),TAllocation)},Create$25:function(S,AOwner$4){TW3OwnedObject.Create$10(S,AOwner$4);S.FCacheSize=4096;S.FUseCache=true;return S},GetCacheFree:function(S){var R=0;R=S.FCacheSize-TAllocationOptions.GetCacheUsed(S);return R},GetCacheUsed:function(S){var R=0;if(S.FUseCache){R=parseInt((S.FCacheSize-(TAllocation.GetHandle(TAllocationOptions.a$29(S)).length-TAllocation.GetSize$4(TAllocationOptions.a$29(S)))),10)}else R=0;return R},SetCacheSize:function(S,value$17){S.FCacheSize=TInteger.EnsureRange(value$17,1024,(1024*1024))},SetUseCache:function(S,value$18){S.FUseCache=value$18},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10};TAllocationOptions.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TAllocation={$ClassName:"TAllocation",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle=undefined;$.FOptions$1=null;$.FSize$1=0},a$30:function(S){return((!S.FHandle)?true:false)},Allocate:function(S,Bytes$3){var LSize$1=0;if(S.FHandle)TAllocation.Release(S);if(Bytes$3>0){LSize$1=TInteger.ToNearest(Bytes$3,16);if(S.FOptions$1.FUseCache)LSize$1=TInteger.ToNearest(LSize$1,S.FOptions$1.FCacheSize);S.FHandle=TUnManaged.AllocMemA(TUnManaged,LSize$1);S.FSize$1=Bytes$3;TAllocation.HandleAllocated$(S)}},Create$27:function(S,ByteSize){TAllocation.Create$26(S);if(ByteSize>0)TAllocation.Allocate(S,ByteSize);return S},Create$26:function(S){TObject.Create(S);S.FOptions$1=TAllocationOptions.Create$25($New(TAllocationOptions),S);return S},DataGetSize$1:function(S){var R=0;R=TAllocation.GetSize$4(S);return R},DataOffset$1:function(S){var R=0;R=0;return R},DataRead$1:function(S,Offset$14,ByteCount$1){var R=[];var LRef=undefined;LRef=TUnManaged.ReadMemoryA(TUnManaged,TAllocation.GetHandle(S),Offset$14,ByteCount$1);R=TDatatype.TypedArrayToBytes(TDatatype,LRef);return R},DataWrite$1:function(S,Offset$15,Bytes$4){TUnManaged.WriteMemoryA(TUnManaged,TAllocation.GetHandle(S),Offset$15,TDatatype.BytesToTypedArray(TDatatype,Bytes$4))},Destroy:function(S){if(S.FHandle)TAllocation.Release(S);TObject.Free(S.FOptions$1);TObject.Destroy(S)},GetBufferHandle:function(S){var R=undefined;if(S.FHandle){R=S.FHandle.buffer}else R=null;return R},GetHandle:function(S){var R=undefined;R=S.FHandle;return R},GetSize$4:function(S){var R=0;R=S.FSize$1;return R},GetTotalSize$1:function(S){var R=0;if(S.FHandle)R=parseInt(S.FHandle.length,10);return R},GetTransport:function(S){var R=null;R=$AsIntf(S,"IBinaryTransport");return R},Grow:function(S,NumberOfBytes){var LNewSize=0;if(S.FHandle){if(S.FOptions$1.FUseCache){if(NumberOfBytes<TAllocationOptions.GetCacheFree(S.FOptions$1)){(S.FSize$1+=NumberOfBytes)}else{LNewSize=TInteger.ToNearest((S.FSize$1+NumberOfBytes),S.FOptions$1.FCacheSize);TAllocation.ReAllocate(S,LNewSize)}
return}
LNewSize=TInteger.ToNearest((S.FSize$1+NumberOfBytes),16);TAllocation.ReAllocate(S,LNewSize)}else TAllocation.Allocate(S,NumberOfBytes)},HandleAllocated:function(S){},HandleReleased:function(S){},ReAllocate:function(S,NewSize$2){var LSizeToSet=0;if(S.FHandle){if(NewSize$2!=TAllocation.GetSize$4(S)){NewSize$2=TInteger.EnsureRange(NewSize$2,0,2147483647);if(NewSize$2<1){TAllocation.Release(S);return}
TAllocation.HandleReleased$(S);LSizeToSet=TInteger.ToNearest(NewSize$2,16);if(S.FOptions$1.FUseCache){LSizeToSet=TInteger.ToNearest(NewSize$2,S.FOptions$1.FCacheSize)}
S.FHandle=TUnManaged.ReAllocMemA(TUnManaged,S.FHandle,LSizeToSet);S.FSize$1=NewSize$2}}else TAllocation.Allocate(S,NewSize$2);TAllocation.HandleAllocated$(S)},Release:function(S){if(S.FHandle){S.FHandle.buffer=null;S.FHandle=null;S.FSize$1=0;TAllocation.HandleReleased$(S)}},Shrink:function(S,Bytes$5){var mSize$3=0;if(S.FHandle){if(S.FOptions$1.FUseCache){mSize$3=TInteger.EnsureRange((TAllocation.GetSize$4(S)-Bytes$5),0,2147483647);if(mSize$3>0){if(mSize$3>S.FSize$1+S.FOptions$1.FCacheSize){TAllocation.ReAllocate(S,mSize$3)}else{S.FSize$1=mSize$3}}else TAllocation.Release(S);return}
mSize$3=TInteger.EnsureRange((TAllocation.GetSize$4(S)-Bytes$5),0,2147483647);if(mSize$3>0){TAllocation.ReAllocate(S,mSize$3)}else TAllocation.Release(S)}},Transport:function(S,Target$3){var Data$14=[];if(Target$3){if(!TAllocation.a$30(S)){try{Data$14=TDatatype.TypedArrayToBytes(TDatatype,TAllocation.GetHandle(S));Target$3[3](Target$3[0](),Data$14)}catch($e){var e$7=$W($e);throw EW3Exception.CreateFmt($New(EAllocation),"Data transport failed, mechanism threw exception %s with error [%s]",[TObject.ClassName(e$7.ClassType),e$7.FMessage])}}}else{throw Exception.Create($New(EAllocation),"Invalid transport interface, reference was NIL error")}},Destroy$:function($){return $.ClassType.Destroy($)},HandleAllocated$:function($){return $.ClassType.HandleAllocated($)},HandleReleased$:function($){return $.ClassType.HandleReleased($)}};TAllocation.$Intf={IBinaryTransport:[TAllocation.DataOffset$1,TAllocation.DataGetSize$1,TAllocation.DataRead$1,TAllocation.DataWrite$1],IAllocation:[TAllocation.GetHandle,TAllocation.GetTotalSize$1,TAllocation.GetSize$4,TAllocation.GetTransport,TAllocation.Allocate,TAllocation.Release,TAllocation.Grow,TAllocation.Shrink,TAllocation.ReAllocate,TAllocation.Transport]}
function a$299(S){return((!S[0]())?true:false)}var EAllocation={$ClassName:"EAllocation",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3CustomWriter={$ClassName:"TW3CustomWriter",$Parent:TObject,$Init:function($){TObject.$Init($);$.FAccess=null;$.FOffset$1=$.FTotalSize=0;$.FOptions=[0]},Create$22:function(S,Access){TObject.Create(S);S.FAccess=Access;S.FOffset$1=S.FAccess[0]();S.FTotalSize=S.FAccess[1]();S.FOptions=[3];return S},GetOffset:function(S){var R=0;switch($SetIn(S.FOptions,0,0,2)){case true:R=S.FOffset$1;break;case false:R=S.FAccess[0]();break}
return R},GetTotalFree:function(S){var R=0;R=S.FAccess[1]()-TW3CustomWriter.GetOffset(S);return R},GetTotalSize:function(S){var R=0;switch($SetIn(S.FOptions,0,0,2)){case true:R=2147483647;break;case false:R=S.FAccess[1]();break}
return R},QueryBreachOfBoundary:function(S,BytesToFit){var R=false;if(BytesToFit>=1){switch($SetIn(S.FOptions,1,0,2)){case true:R=false;break;case false:R=TW3CustomWriter.GetTotalFree(S)<BytesToFit;break}}
return R},SetAccessOptions:function(S,NewOptions){S.FOptions=NewOptions.slice(0)},Write:function(S,Data$15){var R=0;var LBytesToWrite=0;var LBytesLeft=0,LBytesMissing=0;LBytesToWrite=Data$15.length;if(LBytesToWrite>0){if($SetIn(S.FOptions,1,0,2)){S.FAccess[3](TW3CustomWriter.GetOffset(S),Data$15);if($SetIn(S.FOptions,0,0,2))(S.FOffset$1+=Data$15.length)}else{if(TW3CustomWriter.QueryBreachOfBoundary(S,LBytesToWrite)){LBytesLeft=TW3CustomWriter.GetTotalSize(S)-TW3CustomWriter.GetOffset(S);LBytesMissing=Math.abs(LBytesLeft-LBytesToWrite);(LBytesToWrite-=LBytesMissing);$ArraySetLenC(Data$15,LBytesToWrite,function(){return 0})}
if(LBytesToWrite>1){S.FAccess[3](TW3CustomWriter.GetOffset(S),Data$15);if($SetIn(S.FOptions,0,0,2))(S.FOffset$1+=Data$15.length)}else{throw EW3Exception.Create$16($New(EW3WriteError),"TW3CustomWriter.Write",S,Format($R[10],[Data$15.length]))}}
R=Data$15.length}else{throw EW3Exception.Create$16($New(EW3WriteError),"TW3CustomWriter.Write",S,Format($R[12],[LBytesToWrite]))}
return R},WriteInteger:function(S,Value$14){var LBytesToWrite$1=0;LBytesToWrite$1=TDatatype.SizeOfType(TDatatype,7);if(!TW3CustomWriter.QueryBreachOfBoundary(S,LBytesToWrite$1)){TW3CustomWriter.Write(S,TDatatype.Int32ToBytes(TDatatype,Value$14))}else{throw EW3Exception.Create$16($New(EW3WriteError),"TW3CustomWriter.WriteInteger",S,Format($R[10],[LBytesToWrite$1]))}},WriteString:function(S,Value$15){var LBytes$1=[],LTotal=0;(LTotal+=TDatatype.SizeOfType(TDatatype,7));(LTotal+=TDatatype.SizeOfType(TDatatype,7));LBytes$1=TDatatype.StringToBytes(TDatatype,Value$15);(LTotal+=LBytes$1.length);if(!TW3CustomWriter.QueryBreachOfBoundary(S,LTotal)){try{TW3CustomWriter.WriteInteger(S,3131756270);TW3CustomWriter.WriteInteger(S,LBytes$1.length);if(LBytes$1.length>0)TW3CustomWriter.Write(S,LBytes$1)}catch($e){var e$8=$W($e);throw EW3Exception.Create$16($New(EW3WriteError),"TW3CustomWriter.WriteString",S,e$8.FMessage)}}else{throw EW3Exception.Create$16($New(EW3WriteError),"TW3CustomWriter.WriteString",S,Format($R[10],[LTotal]))}},Destroy:TObject.Destroy};var TStreamWriter={$ClassName:"TStreamWriter",$Parent:TW3CustomWriter,$Init:function($){TW3CustomWriter.$Init($)},Create$28:function(S,Stream$1){TW3CustomWriter.Create$22(S,$AsIntf(Stream$1,"IBinaryTransport"));TW3CustomWriter.SetAccessOptions(S,[3]);return S},Destroy:TObject.Destroy};var TWriter={$ClassName:"TWriter",$Parent:TW3CustomWriter,$Init:function($){TW3CustomWriter.$Init($)},Destroy:TObject.Destroy};var EW3WriteError={$ClassName:"EW3WriteError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3CustomReader={$ClassName:"TW3CustomReader",$Parent:TObject,$Init:function($){TObject.$Init($);$.FAccess$2=null;$.FOffset$2=$.FTotalSize$1=0;$.FOptions$2=[0]},Create$29:function(S,Access$1){TObject.Create(S);S.FAccess$2=Access$1;S.FOffset$2=S.FAccess$2[0]();S.FTotalSize$1=S.FAccess$2[1]();S.FOptions$2=[1];return S},GetReadOffset:function(S){var R=0;if($SetIn(S.FOptions$2,0,0,1)){R=S.FOffset$2}else R=S.FAccess$2[0]();return R},GetTotalSize$2:function(S){var R=0;if($SetIn(S.FOptions$2,0,0,1)){R=S.FTotalSize$1}else R=S.FAccess$2[1]();return R},QueryBreachOfBoundary$1:function(S,NumberOfBytes$1){var R=false;R=TW3CustomReader.GetTotalSize$2(S)-TW3CustomReader.GetReadOffset(S)<NumberOfBytes$1;return R},Read$1:function(S,BytesToRead){var R=[];if(BytesToRead>0){R=S.FAccess$2[2](TW3CustomReader.GetReadOffset(S),BytesToRead);if($SetIn(S.FOptions$2,0,0,1))(S.FOffset$2+=R.length)}else{throw EW3Exception.Create$16($New(EW3ReadError),"TW3CustomReader.Read",S,("Invalid read length ("+BytesToRead.toString()+")"))}
return R},ReadInteger:function(S){var R=0;var LBytesToRead=0,Data$16=[];LBytesToRead=TDatatype.SizeOfType(TDatatype,7);if(!TW3CustomReader.QueryBreachOfBoundary$1(S,LBytesToRead)){Data$16=TW3CustomReader.Read$1(S,LBytesToRead);R=TDatatype.BytesToInt32(TDatatype,Data$16)}else{throw EW3Exception.Create$16($New(EW3ReadError),"TW3CustomReader.ReadInteger",S,Format($R[13],[LBytesToRead]))}
return R},ReadStr:function(S,BytesToRead$1){var R="";var LData$1=[];if(!TW3CustomReader.QueryBreachOfBoundary$1(S,BytesToRead$1)){if(BytesToRead$1>0){LData$1=TW3CustomReader.Read$1(S,BytesToRead$1);R=TDatatype.BytesToString(TDatatype,LData$1)}}else{throw EW3Exception.Create$16($New(EW3ReadError),"TW3CustomReader.ReadStr",S,Format($R[13],[BytesToRead$1]))}
return R},ReadString:function(S){var R="";var LSignature=0;var LLength=0;LSignature=TW3CustomReader.ReadInteger(S);if(LSignature==3131756270){LLength=TW3CustomReader.ReadInteger(S);if(LLength>0)R=TW3CustomReader.ReadStr(S,LLength)}else{throw EW3Exception.Create$16($New(EW3ReadError),"TW3CustomReader.ReadString",S,Format($R[14],["string"]))}
return R},SetUpdateOption:function(S,NewUpdateMode){S.FOptions$2=NewUpdateMode.slice(0)},Destroy:TObject.Destroy};var TStreamReader={$ClassName:"TStreamReader",$Parent:TW3CustomReader,$Init:function($){TW3CustomReader.$Init($)},Create$30:function(S,Stream$2){TW3CustomReader.Create$29(S,$AsIntf(Stream$2,"IBinaryTransport"));TW3CustomReader.SetUpdateOption(S,[1]);return S},Destroy:TObject.Destroy};var TReader={$ClassName:"TReader",$Parent:TW3CustomReader,$Init:function($){TW3CustomReader.$Init($)},Destroy:TObject.Destroy};var EW3ReadError={$ClassName:"EW3ReadError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function DateTimeToJDate(Present){var R=null;R=new Date();R.setTime(Math.round((Present-25569)*86400000));return R};var CNT_DaysInMonthData=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];var TW3CustomApplication={$ClassName:"TW3CustomApplication",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBody$1=$.FCurrentForm=$.FDisplay=$.FEnterAnim=$.FLeaveAnim=$.FMainForm=$.FOnBeforeUnload=$.FOnUnload=$.FTransDst=$.FTransSrc=null;$.FEntryEffect=0;$.FFormChangeActive=$.FTerminated=false;$.FForms=[]},AdjustScreen:function(S){TW3ScrollInfo.ScrollTo(TW3CustomControl.GetScrollInfo(S.FDisplay),0,0);TW3MovableControl.SetBounds(S.FDisplay,0,0,TDocumentBody.GetWidth$1(S.FBody$1),TDocumentBody.GetHeight$1(S.FBody$1))},ApplicationClosing:function(S){},ApplicationStarted:function(S){},ApplicationStarting:function(S){TW3CustomApplication.AdjustScreen(S)},CBOnBeforeUnload:function(S){if(S.FOnBeforeUnload)S.FOnBeforeUnload(S)},CBOnOrientationChange:function(S){var mOrientation=0;var mTemp$4=0;var mEntry=null;mTemp$4=parseInt(window.orientation,10);switch(mTemp$4){case 0:mOrientation=0;break;case 90:mOrientation=1;break;case(-90):mOrientation=2;break;case 180:mOrientation=3;break}
try{if(S.FDisplay){mEntry=S.FDisplay.FOnOrient;if(mEntry)mEntry(S.FDisplay,mOrientation,mTemp$4)}}finally{TW3CustomApplication.AdjustScreen(S)}},CBOnReSize:function(S){TW3CustomApplication.AdjustScreen(S)},CBOnUnLoad:function(S){try{if(S.FOnUnload)S.FOnUnload(S)}finally{if(!S.FTerminated)TW3CustomApplication.Terminate(S)}},Create$134:function(S){TObject.Create(S);S.FBody$1=TW3TagContainer.Create$41$($New(TDocumentBody),null);S.FDisplay=TW3TagContainer.Create$41$($New(TW3Display),S.FBody$1);if(!Instance$1)Instance$1=S;return S},Destroy:function(S){if(!S.FTerminated)TW3CustomApplication.Terminate(S);TObject.Free(S.FDisplay);TObject.Free(S.FBody$1);Instance$1=null;TObject.Destroy(S)},GotoFormByRef:function(S,aForm,Effect){var mIndex=0;if(S.FTerminated)return;if(S.FFormChangeActive){throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"A form transition is already active error"])}
if(aForm===null){throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}
mIndex=S.FForms.indexOf(aForm);if(mIndex<0){throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.GotoFormByRef",TObject.ClassName(S.ClassType),"Form not registered error"])}
if(aForm===S.FCurrentForm)return;if(S.FCurrentForm===null){S.FCurrentForm=aForm;TW3Display.PositionFormInView(S.FDisplay,aForm);TW3MovableControl.SetVisible(aForm,true);TW3CustomForm.FormActivated(aForm);return}
if(Effect==0){TW3CustomForm.FormDeactivated(S.FCurrentForm);TW3MovableControl.SetVisible(S.FCurrentForm,false);TW3MovableControl.SetVisible(aForm,true);TW3Display.PositionFormInView(S.FDisplay,aForm);TW3CustomForm.FormActivated(aForm);S.FCurrentForm=aForm;return}
S.FFormChangeActive=true;S.FEntryEffect=Effect;TW3TagContainer.BringToFront(aForm);TW3CustomForm.FormDeactivated(S.FCurrentForm);S.FTransSrc=S.FCurrentForm;S.FTransDst=aForm;TW3MovableControl.SetVisible(aForm,true);TW3Display.PositionFormInView(S.FDisplay,aForm);if(S.FEnterAnim===null||S.FLeaveAnim===null){S.FEnterAnim=TW3CustomAnimation.Create$139$($New(TW3NamedAnimation));TW3CustomAnimation.SetDuration(S.FEnterAnim,0.3);S.FLeaveAnim=TW3CustomAnimation.Create$139$($New(TW3NamedAnimation));TW3CustomAnimation.SetDuration(S.FLeaveAnim,0.3)}
switch(Effect){case 1:S.FEnterAnim.FName$3="MOVE-LEFT";S.FLeaveAnim.FName$3="MOVE-OUT-LEFT";break;case 2:S.FEnterAnim.FName$3="MOVE-RIGHT";S.FLeaveAnim.FName$3="MOVE-OUT-RIGHT";break}
TW3CustomAnimation.ExecuteEx(S.FEnterAnim,aForm,null,$Event1(S,TW3CustomApplication.HandleEnterAnimEnds));TW3CustomAnimation.ExecuteEx(S.FLeaveAnim,S.FCurrentForm,null,$Event1(S,TW3CustomApplication.HandleLeaveAnimEnds))},HandleEnterAnimEnds:function(S,Sender){var mAnim=null;mAnim=$As(Sender,TW3NamedAnimation);switch(S.FEntryEffect){case 1:TW3MovableControl.MoveTo(S.FTransDst,0,0);S.FCurrentForm=S.FTransDst;TW3CustomForm.FormActivated(S.FCurrentForm);S.FFormChangeActive=false;break;case 2:TW3MovableControl.MoveTo(S.FTransDst,0,0);S.FCurrentForm=S.FTransDst;TW3CustomForm.FormActivated(S.FCurrentForm);TW3MovableControl.SetVisible(S.FTransSrc,false);TW3Display.PositionFormInView(S.FDisplay,S.FTransSrc);S.FFormChangeActive=false;break}
TObject.Free(mAnim);mAnim=null},HandleLeaveAnimEnds:function(S,Sender$1){var mAnim$1=null;mAnim$1=$As(Sender$1,TW3NamedAnimation);TW3MovableControl.SetVisible(S.FTransSrc,false);TObject.Free(mAnim$1)},HookWindowEvents:function(S){document.body.onunload=$Event0(S,TW3CustomApplication.CBOnUnLoad);document.body.onbeforeunload=$Event0(S,TW3CustomApplication.CBOnBeforeUnload);window.onresize=$Event0(S,TW3CustomApplication.CBOnReSize);window.onorientationchange=$Event0(S,TW3CustomApplication.CBOnOrientationChange)},ReadySync$1:function(S){var Temp$1=null;if(S.FMainForm){if($SetIn(S.FMainForm.FComponentState,2,0,6)){if($SetIn(S.FDisplay.FComponentState,2,0,6)){TW3MovableControl.Resize$(S.FDisplay);WriteLn("Setting up mainform, exiting application.ReadySync");Temp$1=S.FMainForm;S.FMainForm=null;TW3CustomApplication.GotoFormByRef(S,Temp$1,0);TW3CustomApplication.ApplicationStarted$(S)}else{WriteLn("Round-trip for Application.ReadySync, displayt not yet in ready-state");TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3CustomApplication.ReadySync$1),30)}}else{WriteLn("Round-trip for Application.ReadySync, mainform not yet in ready-state");TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3CustomApplication.ReadySync$1),30)}}else{WriteLn("Round-trip for Application.ReadySync, mainform not yet created");TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3CustomApplication.ReadySync$1),30)}},RegisterFormInstance:function(S,aForm$1,isMainForm){if(S.FTerminated)return;if(aForm$1){if(S.FForms.indexOf(aForm$1)<0){try{S.FForms.push(aForm$1)}catch($e){var e$9=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),e$9.FMessage])}
TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(aForm$1,TW3MovableControl.AdjustToParentBox));if(isMainForm){S.FMainForm=aForm$1}else TW3MovableControl.SetVisible(aForm$1,false)}else{throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),"Form already registered"])}}else{throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.RegisterFormInstance",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}},RunApp:function(S){TW3CustomApplication.HookWindowEvents(S);TW3Dispatch.ExecuteDocumentReady(TW3Dispatch,function(){TW3CustomApplication.ApplicationStarting$(S);TApplicationFormsList.AutoCreateForms(FormsFactory(),S.FDisplay.FView);if(!$Is(S,TW3CustomGameApplication)){TW3CustomApplication.ReadySync$1(S)}else{TW3MovableControl.Resize$(S.FDisplay);TW3CustomApplication.ApplicationStarted$(S)}})},Terminate:function(S){var x$44=0;if(S.FTerminated)return;S.FTerminated=true;TW3CustomApplication.ApplicationClosing$(S);try{var $tA;for(x$44=0,$tA=S.FForms.length;x$44<$tA;x$44++){TObject.Free(S.FForms[x$44]);S.FForms[x$44]=null}
S.FForms.length=0}finally{TObject.Free(S)}},UnRegisterFormInstance:function(S,aForm$2){var mIndex$1=0;if(!S.FTerminated){if(aForm$2){mIndex$1=S.FForms.indexOf(aForm$2);if(mIndex$1>=0){if(S.FMainForm!==aForm$2){if(S.FCurrentForm===aForm$2)TW3CustomApplication.GotoFormByRef(S,S.FMainForm,0);S.FForms.splice(mIndex$1,1);try{TObject.Free(aForm$2)}catch($e){var e$10=$W($e);throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),e$10.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),"Main form cannot be removed error"])}}else{throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),"Form is not registered"])}}else{throw EW3Exception.CreateFmt($New(EW3Application$1),$R[0],["TW3CustomApplication.UnRegisterFormInstance",TObject.ClassName(S.ClassType),"Form parameter is NIL error"])}}},Destroy$:function($){return $.ClassType.Destroy($)},ApplicationClosing$:function($){return $.ClassType.ApplicationClosing($)},ApplicationStarted$:function($){return $.ClassType.ApplicationStarted($)},ApplicationStarting$:function($){return $.ClassType.ApplicationStarting($)},Create$134$:function($){return $.ClassType.Create$134($)}};var TApplication={$ClassName:"TApplication",$Parent:TW3CustomApplication,$Init:function($){TW3CustomApplication.$Init($);$.FDevices=$.FHeader$2=null},ApplicationStarted:function(S){TW3CustomApplication.ApplicationStarted(S);S.FHeader$2=TW3TagContainer.Create$41$($New(TW3WorkbenchMenuBar),Application().FDisplay);TW3MovableControl.MoveTo(S.FHeader$2,0,(-100));TW3CustomControl.Invalidate$(S.FDisplay);TW3CustomControl._setContextPopup(S.FHeader$2,function(sender,mousePos,handled){handled.v=true});TW3MovableControl._SetOnResized(S.FDisplay,function(Sender$2){TW3MovableControl.MoveTo(S.FHeader$2,0,(-100));TW3CustomControl.Invalidate$(S.FDisplay)});TW3Dispatch.Execute(TW3Dispatch,function(){TW3MovableControl.MoveTo(S.FHeader$2,0,(-100));TW3CustomControl.Invalidate$(S.FDisplay)},1000)},Create$134:function(S){TW3CustomApplication.Create$134(S);S.FDevices=TObject.Create($New(TWbDeviceManager));TWbDeviceManager.RegisterDevice(S.FDevices,TWbStorageDeviceRamDisk);TWbDeviceManager.RegisterDevice(S.FDevices,TWbStorageDeviceCache);return S},Destroy:function(S){TObject.Free(S.FHeader$2);TObject.Free(S.FDevices);TW3CustomApplication.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)},ApplicationClosing:TW3CustomApplication.ApplicationClosing,ApplicationStarted$:function($){return $.ClassType.ApplicationStarted($)},ApplicationStarting:TW3CustomApplication.ApplicationStarting,Create$134$:function($){return $.ClassType.Create$134($)}};function Copy$TRectF(s,d){d.Bottom=s.Bottom;d.Left$2=s.Left$2;d.Right=s.Right;d.Top$2=s.Top$2;return d}
function Clone$TRectF($){return{Bottom:$.Bottom,Left$2:$.Left$2,Right:$.Right,Top$2:$.Top$2}}
function CreateBounded(x1$6,y1$6,x2$6,y2$6){var R={Bottom:0,Left$2:0,Right:0,Top$2:0};if(x1$6<x2$6){R.Left$2=x1$6;R.Right=x2$6}else{R.Left$2=x2$6;R.Right=x1$6}
if(y1$6<y2$6){R.Top$2=y1$6;R.Bottom=y2$6}else{R.Top$2=y2$6;R.Bottom=y1$6}
return R}
function TRectF$Height$2(Self$21){var R=0;R=Self$21.Bottom-Self$21.Top$2;return R}
function TRectF$Width$2(Self$22){var R=0;R=Self$22.Right-Self$22.Left$2;return R}
function Copy$TRect(s,d){d.Bottom$1=s.Bottom$1;d.Left$3=s.Left$3;d.Right$1=s.Right$1;d.Top$3=s.Top$3;return d}
function Clone$TRect($){return{Bottom$1:$.Bottom$1,Left$3:$.Left$3,Right$1:$.Right$1,Top$3:$.Top$3}}
function TRect$Compare$1(Self$23,aRect){var R=false;R=Self$23.Left$3==aRect.Left$3&&Self$23.Top$3==aRect.Top$3&&Self$23.Right$1==aRect.Right$1&&Self$23.Bottom$1==aRect.Bottom$1;return R}
function TRect$ContainsPos$1(Self$24,aLeft,aTop){var R=false;R=aLeft>=Self$24.Left$3&&aLeft<=Self$24.Right$1&&aTop>=Self$24.Top$3&&aTop<=Self$24.Bottom$1;return R}
function Create$45(aLeft$1,aTop$1,aRight,aBottom){var R={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};R.Left$3=aLeft$1;R.Top$3=aTop$1;R.Right$1=aRight;R.Bottom$1=aBottom;return R}
function TRect$Empty$2(Self$25){var R=false;R=Self$25.Left$3==Self$25.Right$1&&Self$25.Top$3==Self$25.Bottom$1;return R}
function TRect$Height$3(Self$26){var R=0;R=Self$26.Bottom$1-Self$26.Top$3;return R}
function TRect$Width$3(Self$27){var R=0;R=Self$27.Right$1-Self$27.Left$3;return R}
function Copy$TPointF(s,d){d.X=s.X;d.Y=s.Y;return d}
function Clone$TPointF($){return{X:$.X,Y:$.Y}}
function Copy$TPoint(s,d){d.X$1=s.X$1;d.Y$1=s.Y$1;return d}
function Clone$TPoint($){return{X$1:$.X$1,Y$1:$.Y$1}}
function Create$48(aCol,aRow){var R={X$1:0,Y$1:0};R.X$1=aCol;R.Y$1=aRow;return R}
var TExposure=["esVisible","esPartly","esNone"];function OffsetPoint(a$300,b$3){var R={X$1:0,Y$1:0};R.X$1=a$300.X$1+b$3.X$1;R.Y$1=a$300.Y$1+b$3.Y$1;return R};function OffsetPoint$1(a$301,b$4){var R={X$1:0,Y$1:0};R.X$1=a$301.X$1+b$4;R.Y$1=a$301.Y$1+b$4;return R};function OffsetPoint$2(a$302,b$5){var R={X:0,Y:0};R.X=a$302.X+b$5.X;R.Y=a$302.Y+b$5.Y;return R};function OffsetPoint$3(a$303,b$6){var R={X:0,Y:0};R.X=a$303.X+b$6;R.Y=a$303.Y+b$6;return R};function OffsetPoint$4(a$304,b$7){var R={X:0,Y:0};R.X=a$304.X+b$7;R.Y=a$304.Y+b$7;return R};function MinusPoint(a$305,b$8){var R={X$1:0,Y$1:0};R.X$1=a$305.X$1-b$8.X$1;R.Y$1=a$305.Y$1-b$8.Y$1;return R};function MinusPoint$1(a$306,b$9){var R={X$1:0,Y$1:0};R.X$1=a$306.X$1-b$9;R.Y$1=a$306.Y$1-b$9;return R};function MinusPoint$2(a$307,b$10){var R={X:0,Y:0};R.X=a$307.X-b$10.X;R.Y=a$307.Y-b$10.Y;return R};function MinusPoint$3(a$308,b$11){var R={X:0,Y:0};R.X=a$308.X-b$11;R.Y=a$308.Y-b$11;return R};function MinusPoint$4(a$309,b$12){var R={X:0,Y:0};R.X=a$309.X-b$12;R.Y=a$309.Y-b$12;return R};function ExpandPoint(a$310,b$13){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$310.X$1*b$13.X$1);R.Y$1=Math.round(a$310.Y$1*b$13.Y$1);return R};function ExpandPoint$1(a$311,b$14){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$311.X$1*b$14);R.Y$1=Math.round(a$311.Y$1*b$14);return R};function ExpandPoint$2(a$312,b$15){var R={X$1:0,Y$1:0};R.X$1=Math.round(a$312.X$1*b$15);R.Y$1=Math.round(a$312.Y$1*b$15);return R};function ExpandPoint$3(a$313,b$16){var R={X:0,Y:0};R.X=a$313.X*b$16.X;R.Y=a$313.Y*b$16.Y;return R};function ExpandPoint$4(a$314,b$17){var R={X:0,Y:0};R.X=a$314.X*b$17;R.Y=a$314.Y*b$17;return R};function ExpandPoint$5(a$315,b$18){var R={X:0,Y:0};R.X=a$315.X*b$18;R.Y=a$315.Y*b$18;return R};var TWbStorageDevice={$ClassName:"TWbStorageDevice",$Parent:TObject,$Init:function($){TObject.$Init($);$.FId=$.FName$4="";$.FManager=null;$.FMounted=false;$.FOptions$9=[0]},Create$151:function(S,Manager){TObject.Create(S);S.FManager=Manager;return S},Destroy:function(S){TObject.Destroy(S)},Mount:function(S,Success$1){if(S.FMounted)TWbStorageDevice.UnMount(S);TWbStorageDevice.DoMount$(S);S.FMounted=true;if(Success$1){TW3Dispatch.Execute(TW3Dispatch,function(){Success$1(S)},100)}},SetIdentifier:function(S,NewId){S.FId=NewId},SetName$4:function(S,NewName){S.FName$4=NewName},SetOptions$1:function(S,NewOptions$1){S.FOptions$9=NewOptions$1.slice(0)},UnMount:function(S){if(S.FMounted){TWbStorageDevice.DoUnMount$(S);S.FMounted=false}},Destroy$:function($){return $.ClassType.Destroy($)},ChDir$1$:function($){return $.ClassType.ChDir$1.apply($.ClassType,arguments)},Create$151$:function($){return $.ClassType.Create$151.apply($.ClassType,arguments)},Dir$:function($){return $.ClassType.Dir.apply($.ClassType,arguments)},DirExists$:function($){return $.ClassType.DirExists.apply($.ClassType,arguments)},DoMount$:function($){return $.ClassType.DoMount($)},DoUnMount$:function($){return $.ClassType.DoUnMount($)},FileExists$2$:function($){return $.ClassType.FileExists$2.apply($.ClassType,arguments)},GetPath$2$:function($){return $.ClassType.GetPath$2.apply($.ClassType,arguments)},Load$:function($){return $.ClassType.Load.apply($.ClassType,arguments)},MakeDir$:function($){return $.ClassType.MakeDir.apply($.ClassType,arguments)},RemoveDir$:function($){return $.ClassType.RemoveDir.apply($.ClassType,arguments)},Save$2$:function($){return $.ClassType.Save$2.apply($.ClassType,arguments)}};TWbStorageDevice.$Intf={IWbFileSystem:[TWbStorageDevice.GetPath$2,TWbStorageDevice.FileExists$2,TWbStorageDevice.DirExists,TWbStorageDevice.MakeDir,TWbStorageDevice.RemoveDir,TWbStorageDevice.Dir,TWbStorageDevice.ChDir$1,TWbStorageDevice.Load,TWbStorageDevice.Save$2]}
var TWbBrowserStorageDevice={$ClassName:"TWbBrowserStorageDevice",$Parent:TWbStorageDevice,$Init:function($){TWbStorageDevice.$Init($);$.FFileIndex=$.FStorage=null},ChDir$1:function(S,Path$2,CB){if(CB){TW3Dispatch.Execute(TW3Dispatch,function(){TW3VirtualFileSystem.ChDir(S.FFileIndex,Path$2);CB(Path$2,true)},(10+RandomInt(200)))}},Create$151:function(S,Manager$1){TWbStorageDevice.Create$151(S,Manager$1);S.FStorage=TWbBrowserStorageDevice.GetStorageObj$(S);return S},Destroy:function(S){TObject.Free(S.FStorage);S.FStorage=null;TWbStorageDevice.Destroy(S)},Dir:function(S,Path$3,CB$1){if(CB$1){TW3Dispatch.Execute(TW3Dispatch,function(){var LEntry=null;if(Path$3==""){CB$1(Path$3,TW3VirtualFileSystemFolder.GetDirList(S.FFileIndex))}else{LEntry=TW3VirtualFileSystemFolder.FindFileObject(S.FFileIndex,Path$3);if(LEntry!==null){if($Is(LEntry,TW3VirtualFileSystemFolder)){CB$1(Path$3,TW3VirtualFileSystemFolder.GetDirList($As(LEntry,TW3VirtualFileSystemFolder)))}else{throw Exception.Create($New(Exception),"Expected filetype <"+Path$3+"> to be folder, not file error")}}else{throw Exception.Create($New(Exception),"Folder not found <"+Path$3+"> error")}}},(10+RandomInt(200)))}},DirExists:function(S,Path$4,CB$2){if(CB$2){TW3Dispatch.Execute(TW3Dispatch,function(){CB$2(Path$4,TW3VirtualFileSystemFolder.GetValidPath(S.FFileIndex,Path$4))},(10+RandomInt(200)))}},DoMount:function(S){try{TW3CustomStorage.Open(S.FStorage,S.FName$4)}catch($e){var e$11=$W($e);throw Exception.Create($New(Exception),"Failed to open storage error: "+e$11.FMessage)}
S.FFileIndex=TW3VirtualFileSystem.Create$21($New(TW3VirtualFileSystem));try{TWbBrowserStorageDevice.ReadFileSystem(S)}catch($e){var e$12=$W($e);throw Exception.Create($New(Exception),"Failed to read file-system error: "+e$12.FMessage)}},DoUnMount:function(S){try{TWbBrowserStorageDevice.WriteFileSystem(S);TW3CustomStorage.Close(S.FStorage)}finally{TObject.Free(S.FFileIndex);S.FFileIndex=null}},FileExists$2:function(S,Filename$1,CB$3){if(CB$3){TW3Dispatch.Execute(TW3Dispatch,function(){CB$3(Filename$1,TW3VirtualFileSystemFolder.FileExists$(S.FFileIndex,Filename$1))},(10+RandomInt(200)))}},GetPath$2:function(S,CB$4){if(CB$4){TW3Dispatch.Execute(TW3Dispatch,function(){CB$4(TW3VirtualFileSystemObject.GetPath$(S.FFileIndex),null)},(10+RandomInt(200)))}},Load:function(S,Filename$2,CB$5){if(CB$5){TW3Dispatch.Execute(TW3Dispatch,function(){var LItem$3=null;LItem$3=TW3VirtualFileSystemFolder.FindFileObject(S.FFileIndex,Filename$2);if(LItem$3!==null){if($Is(LItem$3,TW3VirtualFileSystemFile)){CB$5(Filename$2,TW3VirtualFileSystemFile.FetchData($As(LItem$3,TW3VirtualFileSystemFile)))}else{throw Exception.Create($New(Exception),"Expected filetype <"+Filename$2+"> to be file, not folder error")}}else{throw Exception.Create($New(Exception),"File not found <"+Filename$2+"> error")}},(10+RandomInt(200)))}},MakeDir:function(S,Path$5,CB$6){if(CB$6){TW3Dispatch.Execute(TW3Dispatch,function(){var LRes=false;LRes=TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,Path$5)!==null;if(LRes)TWbBrowserStorageDevice.WriteFileSystem(S);CB$6(Path$5,LRes)},(10+RandomInt(200)))}},ReadFileSystem:function(S){var LFileName="";var LText$1="";var LBytes$2=[],LStream=null;function SetupInitial(){WriteLn("Filesystem data invalid or not found, using default");WriteLn("Setting up initial directory structure ..");TW3VirtualFileSystemFolder.Clear$2(S.FFileIndex);TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"System");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"Storage");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"Utilities");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"Prefs");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"Devs");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"Libs");TW3VirtualFileSystemFolder.MKDir$(S.FFileIndex,"S");TW3VirtualFileSystem.ChDir(S.FFileIndex,"s");TW3VirtualFileSystemFolder.MKFile$(S.FFileIndex,"startup-sequence","startup sequence here");TW3VirtualFileSystem.ChDir(S.FFileIndex,"");TW3VirtualFileSystemFolder.MKFile$(S.FFileIndex,"info.txt","This is so cool!");WriteLn("Storing filesystem data");TWbBrowserStorageDevice.WriteFileSystem(S)};LFileName=S.FName$4+".directory";if(TW3CustomStorage.GetKeyExists(S.FStorage,LFileName)==false){SetupInitial()}
LText$1=TW3CustomStorage.GetKeyStr(S.FStorage,LFileName,"");if(LText$1.length>0){LStream=TMemoryStream.Create$23($New(TMemoryStream));try{LBytes$2=TDatatype.StringToBytes(TDatatype,LText$1);TStream.Write$1(LStream,LBytes$2);TStream.SetPosition$(LStream,0);try{TW3VirtualFileSystemObject.LoadFromStream(S.FFileIndex,LStream)}catch($e){var e$13=$W($e);WriteLn("** Failed to re-create filesystem, re-making from scratch");SetupInitial()}}finally{TObject.Free(LStream)}}else{WriteLn("Filesystem info exists, but it was empty");SetupInitial()}},RemoveDir:function(S,Path$6,CB$7){},Save$2:function(S,Filename$3,Data$17,CB$8){if(CB$8){TW3Dispatch.Execute(TW3Dispatch,function(){var LRes$1=false;LRes$1=TW3VirtualFileSystemFolder.MKFile$(S.FFileIndex,Filename$3,TDatatype.BytesToBase64(TDatatype,TStream.Read(Data$17,(TStream.GetSize$2$(Data$17)-TStream.GetPosition$(Data$17)))))!==null;if(LRes$1)TWbBrowserStorageDevice.WriteFileSystem(S);CB$8(Filename$3,LRes$1)},(10+RandomInt(200)))}},WriteFileSystem:function(S){var LFileName$1="";var LText$2="";var LBytes$3=[],LStream$1=null;LFileName$1=S.FName$4+".directory";LStream$1=TMemoryStream.Create$23($New(TMemoryStream));try{TW3VirtualFileSystemObject.SaveToStream(S.FFileIndex,LStream$1);TStream.SetPosition$(LStream$1,0);LBytes$3=TStream.Read(LStream$1,TStream.GetSize$2$(LStream$1));LText$2=TDatatype.BytesToString(TDatatype,LBytes$3);TW3CustomStorage.SetKeyStr(S.FStorage,LFileName$1,LText$2)}finally{TObject.Free(LStream$1)}},Destroy$:function($){return $.ClassType.Destroy($)},ChDir$1$:function($){return $.ClassType.ChDir$1.apply($.ClassType,arguments)},Create$151$:function($){return $.ClassType.Create$151.apply($.ClassType,arguments)},Dir$:function($){return $.ClassType.Dir.apply($.ClassType,arguments)},DirExists$:function($){return $.ClassType.DirExists.apply($.ClassType,arguments)},DoMount$:function($){return $.ClassType.DoMount($)},DoUnMount$:function($){return $.ClassType.DoUnMount($)},FileExists$2$:function($){return $.ClassType.FileExists$2.apply($.ClassType,arguments)},GetPath$2$:function($){return $.ClassType.GetPath$2.apply($.ClassType,arguments)},Load$:function($){return $.ClassType.Load.apply($.ClassType,arguments)},MakeDir$:function($){return $.ClassType.MakeDir.apply($.ClassType,arguments)},RemoveDir$:function($){return $.ClassType.RemoveDir.apply($.ClassType,arguments)},Save$2$:function($){return $.ClassType.Save$2.apply($.ClassType,arguments)},GetStorageObj$:function($){return $.ClassType.GetStorageObj($)}};TWbBrowserStorageDevice.$Intf={IWbFileSystem:[TWbBrowserStorageDevice.GetPath$2,TWbBrowserStorageDevice.FileExists$2,TWbBrowserStorageDevice.DirExists,TWbBrowserStorageDevice.MakeDir,TWbBrowserStorageDevice.RemoveDir,TWbBrowserStorageDevice.Dir,TWbBrowserStorageDevice.ChDir$1,TWbBrowserStorageDevice.Load,TWbBrowserStorageDevice.Save$2]}
var TWbStorageDeviceRamDisk={$ClassName:"TWbStorageDeviceRamDisk",$Parent:TWbBrowserStorageDevice,$Init:function($){TWbBrowserStorageDevice.$Init($)},GetStorageObj:function(S){var R=null;R=TW3SessionStorage.Create$62($New(TW3SessionStorage));return R},Create$151:function(S,Manager$2){TWbBrowserStorageDevice.Create$151(S,Manager$2);TWbStorageDevice.SetName$4(S,"Ram-Disk");TWbStorageDevice.SetIdentifier(S,"{2E6D58D0-A0C3-4D62-8AC4-0300619418A6}");TWbStorageDevice.SetOptions$1(S,[0]);return S},Destroy:TWbBrowserStorageDevice.Destroy,ChDir$1:TWbBrowserStorageDevice.ChDir$1,Create$151$:function($){return $.ClassType.Create$151.apply($.ClassType,arguments)},Dir:TWbBrowserStorageDevice.Dir,DirExists:TWbBrowserStorageDevice.DirExists,DoMount:TWbBrowserStorageDevice.DoMount,DoUnMount:TWbBrowserStorageDevice.DoUnMount,FileExists$2:TWbBrowserStorageDevice.FileExists$2,GetPath$2:TWbBrowserStorageDevice.GetPath$2,Load:TWbBrowserStorageDevice.Load,MakeDir:TWbBrowserStorageDevice.MakeDir,RemoveDir:TWbBrowserStorageDevice.RemoveDir,Save$2:TWbBrowserStorageDevice.Save$2,GetStorageObj$:function($){return $.ClassType.GetStorageObj($)}};TWbStorageDeviceRamDisk.$Intf={IWbFileSystem:[TWbBrowserStorageDevice.GetPath$2,TWbBrowserStorageDevice.FileExists$2,TWbBrowserStorageDevice.DirExists,TWbBrowserStorageDevice.MakeDir,TWbBrowserStorageDevice.RemoveDir,TWbBrowserStorageDevice.Dir,TWbBrowserStorageDevice.ChDir$1,TWbBrowserStorageDevice.Load,TWbBrowserStorageDevice.Save$2]}
var TWbStorageDeviceCache={$ClassName:"TWbStorageDeviceCache",$Parent:TWbBrowserStorageDevice,$Init:function($){TWbBrowserStorageDevice.$Init($)},GetStorageObj:function(S){var R=null;R=TW3LocalStorage.Create$101($New(TW3LocalStorage));return R},Create$151:function(S,Manager$3){TWbBrowserStorageDevice.Create$151(S,Manager$3);TWbStorageDevice.SetName$4(S,"DH0");TWbStorageDevice.SetIdentifier(S,"{2D58F4D9-D8FE-434C-AC32-8B27EEC0AEE2}");TWbStorageDevice.SetOptions$1(S,[0]);return S},Destroy:TWbBrowserStorageDevice.Destroy,ChDir$1:TWbBrowserStorageDevice.ChDir$1,Create$151$:function($){return $.ClassType.Create$151.apply($.ClassType,arguments)},Dir:TWbBrowserStorageDevice.Dir,DirExists:TWbBrowserStorageDevice.DirExists,DoMount:TWbBrowserStorageDevice.DoMount,DoUnMount:TWbBrowserStorageDevice.DoUnMount,FileExists$2:TWbBrowserStorageDevice.FileExists$2,GetPath$2:TWbBrowserStorageDevice.GetPath$2,Load:TWbBrowserStorageDevice.Load,MakeDir:TWbBrowserStorageDevice.MakeDir,RemoveDir:TWbBrowserStorageDevice.RemoveDir,Save$2:TWbBrowserStorageDevice.Save$2,GetStorageObj$:function($){return $.ClassType.GetStorageObj($)}};TWbStorageDeviceCache.$Intf={IWbFileSystem:[TWbBrowserStorageDevice.GetPath$2,TWbBrowserStorageDevice.FileExists$2,TWbBrowserStorageDevice.DirExists,TWbBrowserStorageDevice.MakeDir,TWbBrowserStorageDevice.RemoveDir,TWbBrowserStorageDevice.Dir,TWbBrowserStorageDevice.ChDir$1,TWbBrowserStorageDevice.Load,TWbBrowserStorageDevice.Save$2]}
var TWbDeviceManager={$ClassName:"TWbDeviceManager",$Parent:TObject,$Init:function($){TObject.$Init($);$.FClasses=[];$.FObjects$2=[]},a$151:function(S){return S.FObjects$2.length},a$150:function(S,Index){return S.FObjects$2[Index]},Destroy:function(S){while(S.FObjects$2.length>0){TObject.Free(S.FObjects$2[0]);S.FObjects$2.shift()}
S.FClasses.length=0;TObject.Destroy(S)},RegisterDevice:function(S,DeviceClass){if(S.FClasses.indexOf(DeviceClass)<0){S.FClasses.push(DeviceClass);S.FObjects$2.push(TWbStorageDevice.Create$151$($NewDyn(DeviceClass,""),S))}},Destroy$:function($){return $.ClassType.Destroy($)}};function Copy$TW3RGBA(s,d){d.A$1=s.A$1;d.B=s.B;d.G=s.G;d.R$1=s.R$1;return d}
function Clone$TW3RGBA($){return{A$1:$.A$1,B:$.B,G:$.G,R$1:$.R$1}}
function StrToColor(aColorStr){aColorStr={v:aColorStr};var R={v:0};try{var mTemp="";var xpos=0;var r=0;var g=0;var b=0;aColorStr.v=Trim$_String_(aColorStr.v);if(aColorStr.v.length==0)return R.v;if((aColorStr.v).toLocaleLowerCase()=="transparent"){R.v=536870911;return R.v}
if(aColorStr.v.charAt(0)=="#"||aColorStr.v.charAt(0)=="$"){R.v=parseInt("0x"+Trim$_String_Integer_Integer_(aColorStr.v,1,0),16);return R.v}
if((aColorStr.v).substr(0,2)=="0x"){R.v=parseInt(aColorStr.v,16);return R.v}
if(((aColorStr.v).substr(0,4)).toLowerCase()=="rgb("){aColorStr.v=Trim$_String_Integer_Integer_(aColorStr.v,4,0);try{xpos=(aColorStr.v.indexOf(",")+1);if(xpos>1){mTemp=Trim$_String_(aColorStr.v.substr(0,(xpos-1)));Delete(aColorStr,1,xpos);if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);r=parseInt(mTemp,10)}
xpos=(aColorStr.v.indexOf(",")+1);if(xpos>1){mTemp=Trim$_String_(aColorStr.v.substr(0,(xpos-1)));Delete(aColorStr,1,xpos);if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);g=parseInt(mTemp,10)}
xpos=(aColorStr.v.indexOf(")")+1);if(xpos>1){mTemp=Trim$_String_(aColorStr.v.substr(0,(xpos-1)));if(mTemp.charAt(0)=="$")mTemp="0x"+Trim$_String_Integer_Integer_(mTemp,1,0);b=parseInt(mTemp,10)}
R.v=RGBToColor(r,g,b)}catch($e){var e$14=$W($e);return R.v}}}finally{return R.v}};function RGBToColor(aRed,aGreen,aBlue){var R=0;R=aRed*65536+aGreen*256+aBlue;return R};function ColorToWebStr(aColor,alpha){var R="";var r$1=0;var g$1=0;var b$1=0;r$1=(aColor>>16)&255;g$1=(aColor>>8)&255;b$1=aColor&255;if(alpha!=255){R="rgba("+r$1.toString()+","+g$1.toString()+","+b$1.toString()+","+FloatToStr$_Float_(alpha/255)+")"}else R="#"+IntToHex2(r$1)+IntToHex2(g$1)+IntToHex2(b$1);return R};function ColorToWebStr$1(r$4,g$2,b$19,a$316){var R="";R=(a$316==255)?"#"+IntToHex2(r$4)+IntToHex2(g$2)+IntToHex2(b$19):"rgba("+r$4.toString()+","+g$2.toString()+","+b$19.toString()+","+FloatToStr$_Float_(a$316/255)+")";return R};function ColorToStr(aColor$1){var R="";var rgb=0;rgb=(((aColor$1>>>16)&255)|(aColor$1&65280))|((aColor$1&255)<<16);R="0x"+IntToHex(rgb,6);return R};var TW3Structure={$ClassName:"TW3Structure",$Parent:TObject,$Init:function($){TObject.$Init($)},ReadBool:function(S,Name$11){var R=false;R=(TW3Structure.Read$3$(S,Name$11)?true:false);return R},ReadDateTime$1:function(S,Name$12){var R=0;R=Number(TW3Structure.Read$3$(S,Name$12));return R},ReadFloat:function(S,Name$13){var R=0;R=Number(TW3Structure.Read$3$(S,Name$13));return R},ReadInt:function(S,Name$14){var R=0;R=parseInt(TW3Structure.Read$3$(S,Name$14),10);return R},ReadString$1:function(S,Name$15){var R="";R=String(TW3Structure.Read$3$(S,Name$15));return R},WriteBool:function(S,Name$16,value$19){TW3Structure.Write$3$(S,Name$16,value$19)},WriteDateTime$1:function(S,Name$17,value$20){TW3Structure.Write$3$(S,Name$17,value$20)},WriteFloat:function(S,Name$18,value$21){TW3Structure.Write$3$(S,Name$18,value$21)},WriteInt:function(S,Name$19,value$22){TW3Structure.Write$3$(S,Name$19,value$22)},WriteString$1:function(S,Name$20,Value$16,Encode){if(Encode){Value$16=TString.EncodeBase64(TString,Value$16)}
TW3Structure.Write$3$(S,Name$20,Value$16)},Destroy:TObject.Destroy,Clear$4$:function($){return $.ClassType.Clear$4($)},LoadFromStream$2$:function($){return $.ClassType.LoadFromStream$2.apply($.ClassType,arguments)},Read$3$:function($){return $.ClassType.Read$3.apply($.ClassType,arguments)},SaveToStream$2$:function($){return $.ClassType.SaveToStream$2.apply($.ClassType,arguments)},Write$3$:function($){return $.ClassType.Write$3.apply($.ClassType,arguments)}};TW3Structure.$Intf={IW3StructureReadAccess:[TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TW3Structure.Read$3],IW3StructureWriteAccess:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TW3Structure.Write$3],IW3Structure:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TW3Structure.Read$3,TW3Structure.Write$3]}
var TJSONStructure={$ClassName:"TJSONStructure",$Parent:TW3Structure,$Init:function($){TW3Structure.$Init($);$.FObj=null},Clear$4:function(S){TJSONObject.Clear$3(S.FObj)},Create$56:function(S){TObject.Create(S);S.FObj=TJSONObject.Create$31($New(TJSONObject));return S},Destroy:function(S){TObject.Free(S.FObj);TObject.Destroy(S)},LoadFromStream$2:function(S,Stream$3){TJSONObject.LoadFromStream$1(S.FObj,Stream$3)},Read$3:function(S,Name$21){var R={v:undefined};try{if(TJSONObject.Exists(S.FObj,Name$21)){TJSONObject.Read$2(S.FObj,Name$21,R)}else R.v=undefined}finally{return R.v}},SaveToStream$2:function(S,Stream$4){TJSONObject.SaveToStream$1(S.FObj,Stream$4)},Write$3:function(S,Name$22,Value$17){TJSONObject.AddOrSet(S.FObj,Name$22,Value$17)},Destroy$:function($){return $.ClassType.Destroy($)},Clear$4$:function($){return $.ClassType.Clear$4($)},LoadFromStream$2$:function($){return $.ClassType.LoadFromStream$2.apply($.ClassType,arguments)},Read$3$:function($){return $.ClassType.Read$3.apply($.ClassType,arguments)},SaveToStream$2$:function($){return $.ClassType.SaveToStream$2.apply($.ClassType,arguments)},Write$3$:function($){return $.ClassType.Write$3.apply($.ClassType,arguments)},Create$56$:function($){return $.ClassType.Create$56($)}};TJSONStructure.$Intf={IW3StructureReadAccess:[TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TJSONStructure.Read$3],IW3StructureWriteAccess:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TJSONStructure.Write$3],IW3Structure:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TJSONStructure.Read$3,TJSONStructure.Write$3]}
var TJSONObject={$ClassName:"TJSONObject",$Parent:TObject,$Init:function($){TObject.$Init($);$.FInstance=undefined;$.FOptions$3=[0]},AddOrSet:function(S,PropertyName,Data$18){var R=null;R=S;if(!TJSONObject.Exists(S,PropertyName)){if($SetIn(S.FOptions$3,1,0,4)){S.FInstance[PropertyName]=Data$18}else{throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to add value [%s], instance does not allow new properties",[PropertyName])}}else{if($SetIn(S.FOptions$3,3,0,4)){S.FInstance[PropertyName]=Data$18}else{throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to set value[%s], instance does not allow alteration",[PropertyName])}}
return R},Clear$3:function(S){S.FInstance=TVariant.CreateObject()},Create$34:function(S,Instance$4,Options$6,Clone$2){TObject.Create(S);S.FOptions$3=Options$6.slice(0);if(TW3VariantHelper$Valid$3(Instance$4)){if(TW3VariantHelper$IsObject(Instance$4)){if(Clone$2){S.FInstance=TVariant.CreateObject();TVariant.ForEachProperty(Instance$4,function(Name$23,Data$19){var R=1;TJSONObject.AddOrSet(S,Name$23,Data$19.v);R=1;return R})}else S.FInstance=Instance$4}else{throw Exception.Create($New(EJSONObject),"Failed to clone instance, reference is not an object")}}else{if($SetIn(S.FOptions$3,0,0,4)){S.FInstance=TVariant.CreateObject()}else{throw Exception.Create($New(EJSONObject),"Instance was nil, provided options does not allow initialization error")}}
return S},Create$33:function(S,Instance$5,Options$7){TObject.Create(S);S.FOptions$3=Options$7.slice(0);if(TW3VariantHelper$Valid$3(Instance$5)&&TW3VariantHelper$IsObject(Instance$5)){S.FInstance=Instance$5}else{if($SetIn(S.FOptions$3,0,0,4)){S.FInstance=TVariant.CreateObject()}else{throw Exception.Create($New(EJSONObject),"Instance was nil, provided options does not allow initialization error")}}
return S},Create$32:function(S,Instance$6){TObject.Create(S);S.FOptions$3=[15];if(TW3VariantHelper$Valid$3(Instance$6)){if(TW3VariantHelper$IsObject(Instance$6)){S.FInstance=Instance$6}else{throw Exception.Create($New(EJSONObject),"Failed to inspect instance, reference is not an object")}}else S.FInstance=TVariant.CreateObject();return S},Create$31:function(S){TObject.Create(S);S.FOptions$3=[15];S.FInstance=TVariant.CreateObject();return S},Destroy$6:function(S){S.FInstance=null;TObject.Destroy(S)},Exists:function(S,PropertyName$1){var R=false;R=(Object.hasOwnProperty.call(S.FInstance,PropertyName$1)?true:false);return R},FromJSON:function(S,Text$9){S.FInstance=JSON.parse(Text$9)},LoadFromStream$1:function(S,Stream$5){var LReader=null;LReader=TW3CustomReader.Create$29($New(TReader),$AsIntf(Stream$5,"IBinaryTransport"));try{S.FInstance=JSON.parse(TString.DecodeBase64(TString,TW3CustomReader.ReadString(LReader)))}finally{TObject.Free(LReader)}},Read$2:function(S,PropertyName$2,Data$20){var R=null;R=S;if(TJSONObject.Exists(S,PropertyName$2)){Data$20.v=S.FInstance[PropertyName$2]}else{throw EW3Exception.CreateFmt($New(EJSONObject),"Failed to read value, property [%s] not found error",[PropertyName$2])}
return R},SaveToStream$1:function(S,Stream$6){var LWriter=null;LWriter=TW3CustomWriter.Create$22($New(TWriter),$AsIntf(Stream$6,"IBinaryTransport"));try{TW3CustomWriter.WriteString(LWriter,TString.EncodeBase64(TString,JSON.stringify(S.FInstance)))}finally{TObject.Free(LWriter)}},ToJSON:function(S){var R="";R=JSON.stringify(S.FInstance);return R},Destroy:TObject.Destroy};var EJSONObject={$ClassName:"EJSONObject",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TBinaryData={$ClassName:"TBinaryData",$Parent:TAllocation,$Init:function($){TAllocation.$Init($);$.FDataView=null},AppendBuffer:function(S,Raw){var mOffset=0;if(Raw){if(Raw.length>0){mOffset=TAllocation.GetSize$4(S);TAllocation.Grow(S,Raw.length);TBinaryData.Write$7(S,mOffset,Raw)}}else{throw Exception.Create($New(EBinaryData),"Append failed, invalid source handle error")}},AppendBytes:function(S,Bytes$6){var mLen$2=0;var mOffset$1=0;mLen$2=Bytes$6.length;if(mLen$2>0){mOffset$1=TAllocation.GetSize$4(S);TAllocation.Grow(S,mLen$2);TAllocation.GetHandle(S).set(Bytes$6,mOffset$1)}},AppendFloat32:function(S,Value$18){var mOffset$2=0;mOffset$2=TAllocation.GetSize$4(S);TAllocation.Grow(S,TDatatype.SizeOfType(TDatatype,8));TBinaryData.WriteFloat32(S,mOffset$2,Value$18)},AppendFloat64:function(S,Value$19){var mOffset$3=0;mOffset$3=TAllocation.GetSize$4(S);TAllocation.Grow(S,TDatatype.SizeOfType(TDatatype,9));TBinaryData.WriteFloat64(S,mOffset$3,Value$19)},AppendMemory:function(S,Buffer$4,ReleaseBufferOnExit){var mOffset$4=0;if(Buffer$4!==null){try{if(TAllocation.GetSize$4(Buffer$4)>0){mOffset$4=TAllocation.GetSize$4(S);TAllocation.Grow(S,TAllocation.GetSize$4(Buffer$4));TBinaryData.Write$6(S,mOffset$4,Buffer$4)}}finally{if(ReleaseBufferOnExit)TObject.Free(Buffer$4)}}else{throw Exception.Create($New(EBinaryData),"Append failed, Invalid source buffer error")}},AppendStr:function(S,Text$10){var mLen$3=0;var x$45=0;var mOffset$5=0;var LTemp=[];mLen$3=Text$10.length;if(mLen$3>0){mOffset$5=TAllocation.GetSize$4(S);LTemp=TString.EncodeUTF8(TString,Text$10);TAllocation.Grow(S,LTemp.length);var $tB;for(x$45=0,$tB=LTemp.length;x$45<$tB;x$45++){S.FDataView.setInt8(mOffset$5,LTemp[x$45]);++mOffset$5;console.log(LTemp[x$45])}}},Clone:function(S){var R=null;R=TBinaryData.Create$57($New(TBinaryData),TBinaryData.ToTypedArray(S));return R},CopyFrom$2:function(S,Buffer$5,Offset$16,ByteLen){if(Buffer$5!==null){TBinaryData.CopyFromMemory(S,TAllocation.GetHandle(Buffer$5),Offset$16,ByteLen)}else{throw Exception.Create($New(EBinaryData),"CopyFrom failed, source instance was NIL error")}},CopyFromMemory:function(S,Raw$1,Offset$17,ByteLen$1){if(TMemoryHandleHelper$Valid$5(Raw$1)){if(TBinaryData.OffsetInRange(S,Offset$17)){if(ByteLen$1>0)TMarshal.Move$1(TMarshal,Raw$1,0,TAllocation.GetHandle(S),Offset$17,ByteLen$1)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Cut memory failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$17])}}else{throw Exception.Create($New(EBinaryData),"CopyFrom failed, invalid source handle error")}},Create$57:function(S,aHandle){var mSignature="";TAllocation.Create$26(S);if(TMemoryHandleHelper$Defined$1(aHandle)&&TMemoryHandleHelper$Valid$5(aHandle)){if(aHandle.toString){mSignature=String(aHandle.toString());if(SameText(mSignature,"[object Uint8Array]")||SameText(mSignature,"[object Uint8ClampedArray]")){TAllocation.Allocate(S,parseInt(aHandle.length,10));TMarshal.Move$1(TMarshal,aHandle,0,TAllocation.GetHandle(S),0,parseInt(aHandle.length,10))}else{throw Exception.Create($New(EBinaryData),"Invalid buffer type, expected handle of type Uint8[clamped]Array")}}else{throw Exception.Create($New(EBinaryData),"Invalid buffer type, expected handle of type Uint8[clamped]Array")}}
return S},CutBinaryData:function(S,Offset$18,ByteLen$2){var R=null;var mNewBuffer=undefined;if(ByteLen$2>0){if(TBinaryData.OffsetInRange(S,Offset$18)){mNewBuffer=TAllocation.GetHandle(S).subarray(Offset$18,Offset$18+ByteLen$2-1);R=TBinaryData.Create$57($New(TBinaryData),mNewBuffer)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Cut memory failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$18])}}else R=TBinaryData.Create$57($New(TBinaryData),null);return R},CutStream:function(S,Offset$19,ByteLen$3){var R=null;R=TBinaryData.ToStream$1(TBinaryData.CutBinaryData(S,Offset$19,ByteLen$3));return R},CutTypedArray:function(S,Offset$20,ByteLen$4){var R=undefined;var mTemp$5=null;R=null;if(ByteLen$4>0){if(TBinaryData.OffsetInRange(S,Offset$20)){if(TAllocation.GetSize$4(S)-Offset$20>0){mTemp$5=S.FDataView.buffer.slice(Offset$20,Offset$20+ByteLen$4);R=new Uint8ClampedArray(mTemp$5)}}}
return R},FromBase64:function(S,FileData){var mRaw$2="";var x$46=0;TAllocation.Release(S);if(FileData.length>0){mRaw$2=atob(FileData);if(mRaw$2.length>0){TAllocation.Allocate(S,mRaw$2.length);var $tC;for(x$46=0,$tC=mRaw$2.length;x$46<$tC;x$46++){TBinaryData.SetByte(S,x$46,TDatatype.CharToByte(TDatatype,mRaw$2.charAt(x$46-1)))}}}},GetBit$1:function(S,bitIndex){var R=false;var mOffset$6=0;mOffset$6=bitIndex>>>3;if(TBinaryData.OffsetInRange(S,mOffset$6))R=TBitAccess.Get(TBitAccess,(bitIndex%8),TBinaryData.GetByte(S,mOffset$6));return R},GetBitCount:function(S){var R=0;R=TAllocation.GetSize$4(S)<<3;return R},GetByte:function(S,Index$1){var R=0;if(TAllocation.GetHandle(S)){if(TBinaryData.OffsetInRange(S,Index$1)){R=S.FDataView.getUint8(Index$1)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"invalid byte index, expected %d..%d, not %d",[0,TAllocation.GetHandle(S).length-1,Index$1])}}
return R},HandleAllocated:function(S){var mRef$2=undefined;mRef$2=TAllocation.GetBufferHandle(S);(S.FDataView)=new DataView(mRef$2)},HandleReleased:function(S){S.FDataView=null},OffsetInRange:function(S,Offset$21){var R=false;var mSize$4=0;mSize$4=TAllocation.GetSize$4(S);if(mSize$4>0){R=Offset$21>=0&&Offset$21<=mSize$4}else R=Offset$21==0;return R},ReadBool$1:function(S,Offset$22){var R=false;if(TBinaryData.OffsetInRange(S,Offset$22)){R=S.FDataView.getUint8(Offset$22)>0}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$22,0,TAllocation.GetSize$4(S)-1])}
return R},ReadBytes:function(S,Offset$23,ByteLen$5){var R=[];var x$47=0;if(TBinaryData.OffsetInRange(S,Offset$23)){if(Offset$23+ByteLen$5<=TAllocation.GetSize$4(S)){var $tD;for(x$47=0,$tD=ByteLen$5;x$47<$tD;x$47++){R.push(S.FDataView.getUint8(Offset$23+x$47))}}else{throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error")}}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$23,0,TAllocation.GetSize$4(S)-1])}
return R},ReadFloat32:function(S,Offset$24){var R=0;if(TBinaryData.OffsetInRange(S,Offset$24)){if(Offset$24+TDatatype.SizeOfType(TDatatype,8)<=TAllocation.GetSize$4(S)){R=S.FDataView.getFloat32(Offset$24,a$7)}else{throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error")}}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$24,0,TAllocation.GetSize$4(S)-1])}
return R},ReadFloat64:function(S,Offset$25){var R=0;if(TBinaryData.OffsetInRange(S,Offset$25)){if(Offset$25+TDatatype.SizeOfType(TDatatype,9)<=TAllocation.GetSize$4(S)){R=S.FDataView.getFloat64(Offset$25,a$7)}else{throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error")}}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$25,0,TAllocation.GetSize$4(S)-1])}
return R},ReadInt$1:function(S,Offset$26){var R=0;if(TBinaryData.OffsetInRange(S,Offset$26)){if(Offset$26+TDatatype.SizeOfType(TDatatype,7)<=TAllocation.GetSize$4(S)){R=S.FDataView.getUint32(Offset$26,a$7)}else{throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error")}}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$26,0,TAllocation.GetSize$4(S)-1])}
return R},ReadStr$1:function(S,Offset$27,ByteLen$6){var R="";var x$48=0;var LFetch=[];R="";if(TBinaryData.OffsetInRange(S,Offset$27)){if(Offset$27+ByteLen$6<=TAllocation.GetSize$4(S)){var $tE;for(x$48=0,$tE=ByteLen$6;x$48<$tE;x$48++){LFetch.push(TBinaryData.GetByte(S,(Offset$27+x$48)))}
R=TString.DecodeUTF8(TString,LFetch)}else{throw Exception.Create($New(EBinaryData),"Read failed, data length exceeds boundaries error")}}else{throw EW3Exception.CreateFmt($New(EBinaryData),$R[48],[Offset$27,0,TAllocation.GetSize$4(S)-1])}
return R},SetBit$1:function(S,bitIndex$1,value$23){TBinaryData.SetByte(S,(bitIndex$1>>>3),TBitAccess.Set$3(TBitAccess,(bitIndex$1%8),TBinaryData.GetByte(S,(bitIndex$1>>>3)),value$23))},SetByte:function(S,Index$2,Value$20){if(TAllocation.GetHandle(S)){if(TBinaryData.OffsetInRange(S,Index$2)){S.FDataView.setUint8(Index$2,Value$20)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Invalid byte index, expected %d..%d, not %d",[0,TAllocation.GetHandle(S).length-1,Index$2])}}},ToBase64:function(S){var R="";var mText="";var mRef$3=undefined;var CHUNK_SIZE=0,CHUNK_SIZE=32768;var index$1=0,index$1=0;var mLength=0;var slice$4;if(TAllocation.GetHandle(S)){mRef$3=TAllocation.GetHandle(S);mLength=(mRef$3).length;while(index$1<mLength)
{slice$4=(mRef$3).subarray(index$1,Math.min(index$1+CHUNK_SIZE,mLength));mText+=String.fromCharCode.apply(null,slice$4);index$1+=CHUNK_SIZE}
R=btoa(mText)}
return R},ToBytes:function(S){var R=[];var x$49=0;if(TAllocation.GetSize$4(S)>0){var $tF;for(x$49=0,$tF=TAllocation.GetSize$4(S);x$49<$tF;x$49++){R.push(TBinaryData.GetByte(S,x$49))}}else R=[];return R},ToHexDump:function(S,BytesPerRow,Options$8){var R="";var x$50=0;var y$32=0;var mCount=0;var mPad=0;var mDump=[];if(TAllocation.GetHandle(S)){BytesPerRow=TInteger.EnsureRange(BytesPerRow,2,64);mCount=0;R="";var $tG;for(x$50=0,$tG=TAllocation.GetSize$4(S);x$50<$tG;x$50++){mDump.push(TBinaryData.GetByte(S,x$50));if($SetIn(Options$8,0,0,2)){R+="$"+IntToHex2(TBinaryData.GetByte(S,x$50))}else R+=IntToHex2(TBinaryData.GetByte(S,x$50));++mCount;if(mCount>=BytesPerRow){if(mDump.length>0){R+=" ";var $tH;for(y$32=0,$tH=mDump.length;y$32<$tH;y$32++){if(function(v$){return(((v$>="A")&&(v$<="Z"))||((v$>="a")&&(v$<="z"))||((v$>="0")&&(v$<="9"))||v$==","||v$==";"||v$=="<"||v$==">"||v$=="{"||v$=="}"||v$=="["||v$=="]"||v$=="-"||v$=="_"||v$=="#"||v$=="$"||v$=="%"||v$=="&"||v$=="\/"||v$=="("||v$==")"||v$=="!"||v$=="§"||v$=="^"||v$==":"||v$==","||v$=="?")}(TDatatype.ByteToChar(TDatatype,mDump[y$32]))){R+=TDatatype.ByteToChar(TDatatype,mDump[y$32])}else R+="_"}}
mDump.length=0;R+="\r"+"\n";mCount=0}else R+=" "}
if($SetIn(Options$8,1,0,2)&&mCount>0){mPad=BytesPerRow-mCount;var $tI;for(x$50=1,$tI=mPad;x$50<=$tI;x$50++){R+="--";if($SetIn(Options$8,0,0,2))R+="-";++mCount;if(mCount>=BytesPerRow){R+="\r"+"\n";mCount=0}else R+=" "}}}
return R},ToStream$1:function(S){var R=null;R=TMemoryStream.Create$23($New(TMemoryStream));try{TStream.Write$1(R,TBinaryData.ToBytes(S));TStream.SetPosition$(R,0)}catch($e){var e$15=$W($e);TObject.Free(R);R=null;throw $e}
return R},ToString$2:function(S){var R="";var mRef$4=undefined;var CHUNK_SIZE$1=0,CHUNK_SIZE$1=32768;if(TAllocation.GetHandle(S)){mRef$4=TAllocation.GetHandle(S);var c=[];for(var i=0;i<(mRef$4).length;i+=CHUNK_SIZE$1){c.push(String.fromCharCode.apply(null,(mRef$4).subarray(i,i+CHUNK_SIZE$1)))}
R=c.join("")}
return R},ToTypedArray:function(S){var R=undefined;var mLen$4=0;var mTemp$6=null;R=null;mLen$4=TAllocation.GetSize$4(S);if(mLen$4>0){mTemp$6=S.FDataView.buffer.slice(0,mLen$4);R=new Uint8ClampedArray(mTemp$6)}
return R},Write$8:function(S,Offset$28,Data$21){var mGrowth=0;var x$51=0;var LTemp$1=[];if(Data$21.length>0){if(TBinaryData.OffsetInRange(S,Offset$28)){LTemp$1=TString.EncodeUTF8(TString,Data$21);if(Offset$28+LTemp$1.length>TAllocation.GetSize$4(S)-1)mGrowth=Offset$28+LTemp$1.length-TAllocation.GetSize$4(S);if(mGrowth>0)TAllocation.Grow(S,mGrowth);var $tJ;for(x$51=0,$tJ=LTemp$1.length;x$51<$tJ;x$51++){S.FDataView.setUint8(Offset$28+x$51,LTemp$1[x$51])}}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write string failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$28])}}},Write$7:function(S,Offset$29,Data$22){var mGrowth$1=0;if(Data$22){if(Data$22.length>0){if(TBinaryData.OffsetInRange(S,Offset$29)){if(Offset$29+Data$22.length>TAllocation.GetSize$4(S)-1)mGrowth$1=Offset$29+Data$22.length-TAllocation.GetSize$4(S);if(mGrowth$1>0)TAllocation.Grow(S,mGrowth$1);TMarshal.Move$1(TMarshal,Data$22,0,TAllocation.GetHandle(S),Offset$29,parseInt(TAllocation.GetHandle(S).length,10))}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write typed-handle failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$29])}}}else{throw Exception.Create($New(EBinaryData),"Write failed, invalid source handle error")}},Write$6:function(S,Offset$30,Data$23){var mGrowth$2=0;if(Data$23!==null){if(TAllocation.GetSize$4(Data$23)>0){if(TBinaryData.OffsetInRange(S,Offset$30)){if(Offset$30+TAllocation.GetSize$4(Data$23)>TAllocation.GetSize$4(S)-1)mGrowth$2=Offset$30+TAllocation.GetSize$4(Data$23)-TAllocation.GetSize$4(S);if(mGrowth$2>0)TAllocation.Grow(S,mGrowth$2);TMarshal.Move$1(TMarshal,TAllocation.GetHandle(Data$23),0,TAllocation.GetHandle(S),0,TAllocation.GetSize$4(Data$23))}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write string failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$30])}}}else{throw Exception.Create($New(EBinaryData),"Write failed, invalid source buffer [nil] error")}},Write$5:function(S,Offset$31,Data$24){var mGrowth$3=0;if(TBinaryData.OffsetInRange(S,Offset$31)){if(Data$24.length>0){if(Offset$31+Data$24.length>TAllocation.GetSize$4(S)-1)mGrowth$3=Offset$31+Data$24.length-TAllocation.GetSize$4(S);if(mGrowth$3>0)TAllocation.Grow(S,mGrowth$3);TAllocation.GetHandle(S).set(Data$24,Offset$31)}}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write bytearray failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$31])}},WriteFloat32:function(S,Offset$32,Data$25){var mGrowth$4=0;if(TBinaryData.OffsetInRange(S,Offset$32)){if(Offset$32+TDatatype.SizeOfType(TDatatype,8)>TAllocation.GetSize$4(S)-1)mGrowth$4=Offset$32+TDatatype.SizeOfType(TDatatype,8)-TAllocation.GetSize$4(S);if(mGrowth$4>0)TAllocation.Grow(S,mGrowth$4);S.FDataView.setFloat32(Offset$32,Data$25,a$7)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write float failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$32])}},WriteFloat64:function(S,Offset$33,Data$26){var mGrowth$5=0;if(TBinaryData.OffsetInRange(S,Offset$33)){if(Offset$33+TDatatype.SizeOfType(TDatatype,9)>TAllocation.GetSize$4(S)-1)mGrowth$5=Offset$33+TDatatype.SizeOfType(TDatatype,9)-TAllocation.GetSize$4(S);if(mGrowth$5>0)TAllocation.Grow(S,mGrowth$5);S.FDataView.setFloat64(Offset$33,Number(Data$26),a$7)}else{throw EW3Exception.CreateFmt($New(EBinaryData),"Write float failed, invalid offset. Expected %d..%d not %d",[0,TAllocation.GetSize$4(S)-1,Offset$33])}},Destroy:TAllocation.Destroy,HandleAllocated$:function($){return $.ClassType.HandleAllocated($)},HandleReleased$:function($){return $.ClassType.HandleReleased($)}};TBinaryData.$Intf={IBinaryDataWriteAccess:[TBinaryData.AppendBytes,TBinaryData.AppendStr,TBinaryData.AppendMemory,TBinaryData.AppendBuffer,TBinaryData.AppendFloat32,TBinaryData.AppendFloat64,TBinaryData.Write$5,TBinaryData.WriteFloat32,TBinaryData.WriteFloat64,TBinaryData.CopyFrom$2,TBinaryData.CopyFromMemory,TBinaryData.CutBinaryData,TBinaryData.CutStream,TBinaryData.CutTypedArray],IBinaryDataExport:[TBinaryData.ToBase64,TBinaryData.ToString$2,TBinaryData.ToTypedArray,TBinaryData.ToBytes,TBinaryData.ToHexDump,TBinaryData.ToStream$1,TBinaryData.Clone],IBinaryDataImport:[TBinaryData.FromBase64],IBinaryDataReadWriteAccess:[TBinaryData.ReadFloat32,TBinaryData.ReadFloat64,TBinaryData.ReadBool$1,TBinaryData.ReadInt$1,TBinaryData.ReadStr$1,TBinaryData.ReadBytes,TBinaryData.AppendBytes,TBinaryData.AppendStr,TBinaryData.AppendMemory,TBinaryData.AppendBuffer,TBinaryData.AppendFloat32,TBinaryData.AppendFloat64,TBinaryData.Write$5,TBinaryData.WriteFloat32,TBinaryData.WriteFloat64,TBinaryData.CopyFrom$2,TBinaryData.CopyFromMemory,TBinaryData.CutBinaryData,TBinaryData.CutStream,TBinaryData.CutTypedArray],IBinaryDataBitAccess:[TBinaryData.GetBitCount,TBinaryData.GetBit$1,TBinaryData.SetBit$1],IBinaryDataReadAccess:[TBinaryData.ReadFloat32,TBinaryData.ReadFloat64,TBinaryData.ReadBool$1,TBinaryData.ReadInt$1,TBinaryData.ReadStr$1,TBinaryData.ReadBytes],IBinaryTransport:[TAllocation.DataOffset$1,TAllocation.DataGetSize$1,TAllocation.DataRead$1,TAllocation.DataWrite$1],IAllocation:[TAllocation.GetHandle,TAllocation.GetTotalSize$1,TAllocation.GetSize$4,TAllocation.GetTransport,TAllocation.Allocate,TAllocation.Release,TAllocation.Grow,TAllocation.Shrink,TAllocation.ReAllocate,TAllocation.Transport]}
var EBinaryData={$ClassName:"EBinaryData",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TBitAccess={$ClassName:"TBitAccess",$Parent:TObject,$Init:function($){TObject.$Init($)},Get:function(S,index$2,Value$21){var R=false;var mMask=0;if(index$2>=0&&index$2<8){mMask=1<<index$2;R=(Value$21&mMask)!=0}else{throw EW3Exception.CreateFmt($New(EW3Exception),"Invalid bit index, expected 0..7 not %d",[index$2])}
return R},Set$3:function(S,Index$3,Value$22,Data$27){var R=0;var mSet=false;var mMask$1=0;R=Value$22;if(Index$3>=0&&Index$3<8){mMask$1=1<<Index$3;mSet=(Value$22&mMask$1)!=0;if(mSet!=Data$27){switch(Data$27){case true:R=R|mMask$1;break;case false:R=(R&(~mMask$1));break}}}
return R},Destroy:TObject.Destroy};var CNT_BitBuffer_ByteTable=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,3,4,4,5,4,5,5,6,4,5,5,6,5,6,6,7,4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];var TW3VirtualFileType={1911:"vftFile",2184:"vftFolder"};var TW3VirtualFileSystemObject={$ClassName:"TW3VirtualFileSystemObject",$Parent:TObject,$Init:function($){TObject.$Init($);$.FName="";$.FParent=null;$.FSize=0},Create$20:function(S,AOwner$5){TObject.Create(S);S.FParent=AOwner$5;return S},GetName:function(S){var R="";R=S.FName;return R},GetPath:function(S){var R="";var mItem=null;if(S.FParent!==null){R="";mItem=S.FParent;do{R=TW3VirtualFileSystemObject.GetName(mItem)+"\/"+R;mItem=mItem.FParent}while(!(mItem===null));R+=TW3VirtualFileSystemObject.GetName(S)}else R=TW3VirtualFileSystemObject.GetName(S);return R},LoadFromStream:function(S,Stream$7){var LReader$1=null;LReader$1=TStreamReader.Create$30($New(TStreamReader),Stream$7);try{TW3VirtualFileSystemObject.ReadData$(S,LReader$1)}finally{TObject.Free(LReader$1)}},ReadData:function(S,Reader){if(TW3CustomReader.ReadInteger(Reader)==3133065982){S.FSize=TW3CustomReader.ReadInteger(Reader);S.FName=TW3CustomReader.ReadString(Reader)}else{throw Exception.Create($New(Exception),"Expected filesystem object header error")}},SaveToStream:function(S,Stream$8){var LWriter$1=null;LWriter$1=TStreamWriter.Create$28($New(TStreamWriter),Stream$8);try{TW3VirtualFileSystemObject.WriteData$(S,LWriter$1)}finally{TObject.Free(LWriter$1)}},SetName:function(S,NewName$1){S.FName=NewName$1},WriteData:function(S,Writer){TW3CustomWriter.WriteInteger(Writer,3133065982);TW3CustomWriter.WriteInteger(Writer,S.FSize);TW3CustomWriter.WriteString(Writer,S.FName)},Destroy:TObject.Destroy,GetPath$:function($){return $.ClassType.GetPath($)},ReadData$:function($){return $.ClassType.ReadData.apply($.ClassType,arguments)},WriteData$:function($){return $.ClassType.WriteData.apply($.ClassType,arguments)}};var TW3VirtualFileSystemFolder={$ClassName:"TW3VirtualFileSystemFolder",$Parent:TW3VirtualFileSystemObject,$Init:function($){TW3VirtualFileSystemObject.$Init($);$.FChildren=[]},a$23:function(S){return S.FChildren.length},a$22:function(S,Index$4){return S.FChildren[Index$4]},Clear$2:function(S){var x$52=0;try{var $tK;for(x$52=0,$tK=S.FChildren.length;x$52<$tK;x$52++){TObject.Free(S.FChildren[x$52])}}finally{S.FChildren.length=0}},FileExists:function(S,FileName){var R=false;if(((FileName).indexOf("\/")>=0)){R=TW3VirtualFileSystemFolder.FindFileObject(S,FileName)!==null}else R=TW3VirtualFileSystemFolder.GetLocalFileObj(S,FileName)!==null;return R},FindFileObject:function(S,Filename$4){Filename$4={v:Filename$4};var R=null;var mList=[],mItems=[],x$53=0;var mItem$1=null;var mCurrent=null;var mFile="";Filename$4.v=Trim$_String_(Filename$4.v);if(Filename$4.v.length>0){while(Filename$4.v.length>0&&Filename$4.v.charAt(0)=="\/"){Delete(Filename$4,1,1)}
while(Filename$4.v.length>0&&Filename$4.v.charAt(Filename$4.v.length-1)=="\/"){Delete(Filename$4,Filename$4.v.length,1)}
while(((Filename$4.v).indexOf("\/"+"\/")>=0)){Filename$4.v=StrReplace(Filename$4.v,"\/"+"\/","\/")}
Filename$4.v=Trim$_String_(Filename$4.v);if(Filename$4.v.length==0)return R;mFile=TW3VirtualFileSystem.ExtractFileName(TW3VirtualFileSystem,Filename$4.v);if(TW3VirtualFileSystem.ExtractFileExt(TW3VirtualFileSystem,mFile).length>0){mItems=(Filename$4.v).split("\/");mItems.splice((mItems.length-1),1)}else{mFile="";mItems=(Filename$4.v).split("\/")}
mCurrent=S;if(mItems.length>0){var $tL;for(x$53=0,$tL=mItems.length;x$53<$tL;x$53++){mItem$1=TW3VirtualFileSystemFolder.GetLocalFileObj(mCurrent,mItems[x$53]);if(mItem$1!==null){if($Is(mItem$1,TW3VirtualFileSystemFolder)){mCurrent=$As(mItem$1,TW3VirtualFileSystemFolder)}else{mCurrent=null;break}}else{mCurrent=null;break}}}
if(mCurrent!==null){if(mFile.length>0){if(TW3VirtualFileSystemFolder.FileExists$(mCurrent,mFile))R=TW3VirtualFileSystemFolder.GetLocalFileObj(mCurrent,mFile)}else R=mCurrent}}
return R},GetDirList:function(S){var R=[];var x$54=0;var $tM;for(x$54=0,$tM=TW3VirtualFileSystemFolder.a$23(S);x$54<$tM;x$54++){if($Is(TW3VirtualFileSystemFolder.a$22(S,x$54),TW3VirtualFileSystemFolder)){R.push("[d] "+TW3VirtualFileSystemObject.GetName(TW3VirtualFileSystemFolder.a$22(S,x$54)))}else{R.push("[f] "+TW3VirtualFileSystemObject.GetName(TW3VirtualFileSystemFolder.a$22(S,x$54)))}}
return R},GetLocalFileObj:function(S,FileName$1){var R=null;var x$55=0;var $tN;for(x$55=0,$tN=TW3VirtualFileSystemFolder.a$23(S);x$55<$tN;x$55++){if(SameText(TW3VirtualFileSystemObject.GetName(TW3VirtualFileSystemFolder.a$22(S,x$55)),FileName$1)){R=TW3VirtualFileSystemFolder.a$22(S,x$55);break}}
return R},GetValidPath:function(S,Filename$5){var R=false;R=TW3VirtualFileSystemFolder.FindFileObject(S,Filename$5)!==null;return R},MKDir:function(S,FileName$2){var R=null;FileName$2=Trim$_String_((FileName$2).toLowerCase());if(FileName$2.length>0){if(!TW3VirtualFileSystemFolder.FileExists$(S,FileName$2)){R=TW3VirtualFileSystemObject.Create$20($New(TW3VirtualFileSystemFolder),S);TW3VirtualFileSystemObject.SetName(R,FileName$2);S.FChildren.push(R)}else{throw Exception.Create($New(Exception),"A filesystem object <"+TW3VirtualFileSystemObject.GetName(S)+"> already exists error")}}
return R},MKFile:function(S,FileName$3,Data$28){var R=null;FileName$3=Trim$_String_((FileName$3).toLowerCase());if(FileName$3.length>0){if(!TW3VirtualFileSystemFolder.FileExists$(S,FileName$3)){R=TW3VirtualFileSystemObject.Create$20($New(TW3VirtualFileSystemFile),S);TW3VirtualFileSystemObject.SetName(R,FileName$3);S.FChildren.push(R);if(TW3VariantHelper$Valid$3(Data$28)&&TW3VariantHelper$Defined(Data$28))TW3VirtualFileSystemFile.PutData(R,Data$28)}else{throw Exception.Create($New(Exception),"File <"+TW3VirtualFileSystemObject.GetName(S)+"> already exists error")}}
return R},ReadData:function(S,Reader$1){var LCount$1=0;var LClassType=0;var LChild=null;TW3VirtualFileSystemObject.ReadData(S,Reader$1);LCount$1=TW3CustomReader.ReadInteger(Reader$1);if(LCount$1>0){while(LCount$1>0){LClassType=TW3CustomReader.ReadInteger(Reader$1);if(LClassType==2184){LChild=TW3VirtualFileSystemObject.Create$20($New(TW3VirtualFileSystemFolder),S)}else LChild=TW3VirtualFileSystemObject.Create$20($New(TW3VirtualFileSystemFile),S);S.FChildren.push(LChild);TW3VirtualFileSystemObject.ReadData$(LChild,Reader$1);--LCount$1}}},WriteData:function(S,Writer$1){var x$56=0;TW3VirtualFileSystemObject.WriteData(S,Writer$1);TW3CustomWriter.WriteInteger(Writer$1,S.FChildren.length);var $tO;for(x$56=0,$tO=S.FChildren.length;x$56<$tO;x$56++){if($Is(S.FChildren[x$56],TW3VirtualFileSystemFolder)){TW3CustomWriter.WriteInteger(Writer$1,2184)}else TW3CustomWriter.WriteInteger(Writer$1,1911);TW3VirtualFileSystemObject.WriteData$(S.FChildren[x$56],Writer$1)}},Destroy:TObject.Destroy,GetPath:TW3VirtualFileSystemObject.GetPath,ReadData$:function($){return $.ClassType.ReadData.apply($.ClassType,arguments)},WriteData$:function($){return $.ClassType.WriteData.apply($.ClassType,arguments)},FileExists$:function($){return $.ClassType.FileExists.apply($.ClassType,arguments)},MKDir$:function($){return $.ClassType.MKDir.apply($.ClassType,arguments)},MKFile$:function($){return $.ClassType.MKFile.apply($.ClassType,arguments)}};var TW3VirtualFileSystemFile={$ClassName:"TW3VirtualFileSystemFile",$Parent:TW3VirtualFileSystemObject,$Init:function($){TW3VirtualFileSystemObject.$Init($);$.Data=undefined},FetchData:function(S){var R=undefined;R=S.Data;return R},PutData:function(S,Value$23){S.Data=Value$23},ReadData:function(S,Reader$2){var LBytes$4=[],LSize$2=0;TW3VirtualFileSystemObject.ReadData(S,Reader$2);LSize$2=TW3CustomReader.ReadInteger(Reader$2);if(LSize$2>0){LBytes$4=TW3CustomReader.Read$1(Reader$2,LSize$2);S.Data=TDatatype.BytesToVariant(TDatatype,LBytes$4)}},WriteData:function(S,Writer$2){var LBytes$5=[];TW3VirtualFileSystemObject.WriteData(S,Writer$2);LBytes$5=TDatatype.VariantToBytes(TDatatype,S.Data);TW3CustomWriter.WriteInteger(Writer$2,LBytes$5.length);if(LBytes$5.length>0)TW3CustomWriter.Write(Writer$2,LBytes$5)},Destroy:TObject.Destroy,GetPath:TW3VirtualFileSystemObject.GetPath,ReadData$:function($){return $.ClassType.ReadData.apply($.ClassType,arguments)},WriteData$:function($){return $.ClassType.WriteData.apply($.ClassType,arguments)}};var TW3VirtualFileSystem={$ClassName:"TW3VirtualFileSystem",$Parent:TW3VirtualFileSystemFolder,$Init:function($){TW3VirtualFileSystemFolder.$Init($);$.FCurrent=null},ChDir:function(S,NewPath){var mList$1=[],mItems$1=[],x$57=0;var mItem$2=null;NewPath=Trim$_String_(NewPath);if(NewPath.length>0){while(NewPath.length>0&&(NewPath).substr(0,1)=="\/"){(NewPath).substring(1)}
while(NewPath.length>0&&RightStr(NewPath,1)=="\/"){StrDeleteRight(NewPath,1)}
while(((NewPath).indexOf("\/"+"\/")>=0)){NewPath=StrReplace(NewPath,"\/"+"\/","\/")}
mItems$1=(NewPath).split("\/");if(mItems$1.length>0){S.FCurrent=S;var $tP;for(x$57=0,$tP=mItems$1.length;x$57<$tP;x$57++){mItem$2=TW3VirtualFileSystemFolder.GetLocalFileObj(TW3VirtualFileSystem.GetCurrent(S),mItems$1[x$57]);if(mItem$2!==null){if($Is(mItem$2,TW3VirtualFileSystemFolder)){S.FCurrent=$As(mItem$2,TW3VirtualFileSystemFolder)}else{throw Exception.Create($New(Exception),"Directory error, filename in path error")}}else{throw Exception.Create($New(Exception),"Invalid path error")}}}}},Create$21:function(S){TW3VirtualFileSystemObject.Create$20(S,null);return S},ExtractFileExt:function(S,aFilename){var R="";var x$58=0;aFilename=Trim$_String_(aFilename);if(aFilename.length>0){for(x$58=aFilename.length;x$58>=1;x$58--){if(aFilename.charAt(x$58-1)!="."){if(aFilename.charAt(x$58-1)!="\/"){R=aFilename.charAt(x$58-1)+R}else break}else{R=aFilename.charAt(x$58-1)+R;break}}
if(R.length>0){if(R.charAt(0)!=".")R=""}}
return R},ExtractFileName:function(S,aPath){var R="";var x$59=0;aPath=Trim$_String_(aPath);if(aPath.length>0){if(aPath.charAt(aPath.length-1)!="\/"){for(x$59=aPath.length;x$59>=1;x$59--){if(aPath.charAt(x$59-1)!="\/"){R=aPath.charAt(x$59-1)+R}else break}}}
return R},FileExists:function(S,FileName$4){var R=false;if(TW3VirtualFileSystem.GetCurrent(S)!==S){R=TW3VirtualFileSystemFolder.FileExists$(TW3VirtualFileSystem.GetCurrent(S),FileName$4)}else R=TW3VirtualFileSystemFolder.FileExists(S,FileName$4);return R},GetCurrent:function(S){var R=null;if(S.FCurrent===null)S.FCurrent=S;R=S.FCurrent;return R},GetPath:function(S){var R="";if(TW3VirtualFileSystem.GetCurrent(S)!==S){R=TW3VirtualFileSystemObject.GetPath$(TW3VirtualFileSystem.GetCurrent(S))}else R="\/";return R},MKDir:function(S,FileName$5){var R=null;if(TW3VirtualFileSystem.GetCurrent(S)!==S){R=TW3VirtualFileSystemFolder.MKDir$(TW3VirtualFileSystem.GetCurrent(S),FileName$5)}else R=TW3VirtualFileSystemFolder.MKDir(S,FileName$5);return R},MKFile:function(S,FileName$6,Data$29){var R=null;if(TW3VirtualFileSystem.GetCurrent(S)!==S){R=TW3VirtualFileSystemFolder.MKFile$(TW3VirtualFileSystem.GetCurrent(S),FileName$6,Data$29)}else R=TW3VirtualFileSystemFolder.MKFile(S,FileName$6,Data$29);return R},Destroy:TObject.Destroy,GetPath$:function($){return $.ClassType.GetPath($)},ReadData:TW3VirtualFileSystemFolder.ReadData,WriteData:TW3VirtualFileSystemFolder.WriteData,FileExists$:function($){return $.ClassType.FileExists.apply($.ClassType,arguments)},MKDir$:function($){return $.ClassType.MKDir.apply($.ClassType,arguments)},MKFile$:function($){return $.ClassType.MKFile.apply($.ClassType,arguments)}};var TW3CustomStorage={$ClassName:"TW3CustomStorage",$Parent:TObject,$Init:function($){TObject.$Init($);$.OnStorageClosed=null;$.OnStorageOpen=null;$.FActive=false;$.FNameSpace=""},Close:function(S){if(S.FActive){S.FNameSpace="";S.FActive=false;if(S.OnStorageClosed)S.OnStorageClosed(S)}},GetKeyExists:function(S,KeyName){var R=false;if(S.FActive){if(S.FNameSpace.length>0)KeyName=S.FNameSpace+"."+KeyName;R=TW3CustomStorage.GetDataExistsFor$(S,KeyName)}else{throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.GetKeyExists",TObject.ClassName(S.ClassType),$R[45]])}
return R},GetKeyStr:function(S,KeyName$1,DefaultValue){var R="";if(S.FActive){if(S.FNameSpace.length>0)KeyName$1=S.FNameSpace+"."+KeyName$1;if(!TW3CustomStorage.GetDataExistsFor$(S,KeyName$1)){TW3CustomStorage.SetDataFor$(S,KeyName$1,DefaultValue);R=DefaultValue}else R=TW3CustomStorage.GetDataFor$(S,KeyName$1)}else{throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.GetKeyStr",TObject.ClassName(S.ClassType),$R[45]])}
return R},Open:function(S,NameSpace$1){if(!S.FActive){if(TW3CustomStorage.Supported$(S.ClassType)){S.FNameSpace=Trim$_String_(NameSpace$1);S.FActive=true;if(S.OnStorageOpen)S.OnStorageOpen(S)}else{throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.Open",TObject.ClassName(S.ClassType),$R[46]])}}else{throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.Open",TObject.ClassName(S.ClassType),$R[44]])}},SetKeyStr:function(S,KeyName$2,Value$24){if(S.FActive){if(S.FNameSpace.length>0)KeyName$2=S.FNameSpace+"."+KeyName$2;TW3CustomStorage.SetDataFor$(S,KeyName$2,Value$24)}else{throw EW3Exception.CreateFmt($New(EW3Storage),$R[0],["TW3CustomStorage.SetKeyStr",TObject.ClassName(S.ClassType),$R[45]])}},Destroy:TObject.Destroy,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType,arguments)},GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType,arguments)},GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType,arguments)},GetHandle$1$:function($){return $.ClassType.GetHandle$1($)},SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType,arguments)},Supported$:function($){return $.Supported($)}};var EW3Storage={$ClassName:"EW3Storage",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3LocalStorage={$ClassName:"TW3LocalStorage",$Parent:TW3CustomStorage,$Init:function($){TW3CustomStorage.$Init($);$.FHandle$5=null},Create$101:function(S){TObject.Create(S);S.FHandle$5=window.localStorage;return S},DeleteDataFor:function(S,KeyName$3){S.FHandle$5.removeItem(KeyName$3)},GetDataExistsFor:function(S,KeyName$4){var R=false;var x$60=0;var LTemp$2="";R=false;if(KeyName$4.length>0){var $tQ;for(x$60=0,$tQ=S.FHandle$5.length;x$60<$tQ;x$60++){LTemp$2=S.FHandle$5.key(x$60);if(LTemp$2==KeyName$4){R=true;break}}}
return R},GetDataFor:function(S,KeyName$5){var R="";R=S.FHandle$5.getItem(KeyName$5);return R},GetHandle$1:function(S){var R=undefined;R=S.FHandle$5;return R},SetDataFor:function(S,KeyName$6,Data$30){S.FHandle$5.setItem(KeyName$6,Data$30)},Supported:function(S){var R=false;R=(window.localStorage?true:false);return R},Destroy:TObject.Destroy,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType,arguments)},GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType,arguments)},GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType,arguments)},GetHandle$1$:function($){return $.ClassType.GetHandle$1($)},SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType,arguments)},Supported$:function($){return $.Supported($)}};var TW3SessionStorage={$ClassName:"TW3SessionStorage",$Parent:TW3CustomStorage,$Init:function($){TW3CustomStorage.$Init($);$.FHandle$4=null},Create$62:function(S){TObject.Create(S);S.FHandle$4=window.sessionStorage;return S},DeleteDataFor:function(S,KeyName$7){S.FHandle$4.removeItem(KeyName$7)},GetDataExistsFor:function(S,KeyName$8){var R=false;var x$61=0;var LTemp$3="";R=false;if(KeyName$8.length>0){var $tR;for(x$61=0,$tR=S.FHandle$4.length;x$61<$tR;x$61++){LTemp$3=S.FHandle$4.key(x$61);if(LTemp$3==KeyName$8){R=true;break}}}
return R},GetDataFor:function(S,KeyName$9){var R="";R=S.FHandle$4.getItem(KeyName$9);return R},GetHandle$1:function(S){var R=undefined;R=window.sessionStorage;return R},SetDataFor:function(S,KeyName$10,Data$31){S.FHandle$4.setItem(KeyName$10,Data$31)},Supported:function(S){var R=false;R=(window.localStorage?true:false);return R},Destroy:TObject.Destroy,DeleteDataFor$:function($){return $.ClassType.DeleteDataFor.apply($.ClassType,arguments)},GetDataExistsFor$:function($){return $.ClassType.GetDataExistsFor.apply($.ClassType,arguments)},GetDataFor$:function($){return $.ClassType.GetDataFor.apply($.ClassType,arguments)},GetHandle$1$:function($){return $.ClassType.GetHandle$1($)},SetDataFor$:function($){return $.ClassType.SetDataFor.apply($.ClassType,arguments)},Supported$:function($){return $.Supported($)}};function InitAnimationFrameShim(){vRequestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1000/60)}})();vCancelAnimFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||function(handle){window.clearTimeout(handle)}})()};var TW3TagObj={$ClassName:"TW3TagObj",$Parent:TW3Component,$Init:function($){TW3Component.$Init($);$.FAttributes=null;$.FComponentState=[0];$.FHandle$1=undefined;$.FOwner$1=undefined;$.FTagId="";$.FUpdating=0},a$45:function(S,Value$25){TW3MouseCursor.SetCursorForElement(TW3MouseCursor,S.FHandle$1,Value$25)},a$44:function(S){return TW3MouseCursor.GetCursorFromElement(TW3MouseCursor,S.FHandle$1)},a$43:function(S){return(S.FOwner$1?true:false)},a$40:function(S,Value$26){S.FHandle$1.innerHTML=Value$26},a$39:function(S){return String(S.FHandle$1.innerHTML)},AddToComponentState:function(S,Flags){if($SetIn(Flags,0,0,6)){$SetInc(S.FComponentState,0,0,6)}
if($SetIn(Flags,1,0,6)){$SetInc(S.FComponentState,1,0,6)}
if($SetIn(Flags,2,0,6)){$SetInc(S.FComponentState,2,0,6)}
if($SetIn(Flags,3,0,6)){$SetInc(S.FComponentState,3,0,6)}
if($SetIn(Flags,4,0,6)){$SetInc(S.FComponentState,4,0,6)}
if($SetIn(Flags,5,0,6)){$SetInc(S.FComponentState,5,0,6)}},AfterUpdate:function(S){},BeginUpdate:function(S){++S.FUpdating},Create$10:function(S,AOwner$6){var LRegName="";TW3CustomComponent.CreateEx(S,AOwner$6);$SetInc(S.FComponentState,0,0,6);try{S.FTagId=TW3TagObj.MakeElementTagId$(S);S.FHandle$1=TW3TagObj.MakeElementTagObj$(S)}catch($e){var e$16=$W($e);throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.Create",S,e$16.FMessage)}
$SetInc(S.FComponentState,1,0,6);if(!TControlHandleHelper$Equals$1(S.FHandle$1,document.body)){S.FHandle$1.setAttribute("id",S.FTagId)}
S.FHandle$1.style.zIndex=_ZIndexCounter;++_ZIndexCounter;TW3TagObj.StyleTagObject$(S);TW3TagObj.BeginUpdate(S);try{TW3CustomComponent.InitializeObject$(S)}finally{TW3TagObj.EndUpdate(S)}
if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),6,0,8)){TW3TagObj.SetContentSelectionMode(S,2)}else TW3TagObj.SetContentSelectionMode(S,0);LRegName=Trim$_String_(S.FTagId);if(LRegName.length>0)TW3ControlTracker.RegisterControl(TW3ControlTracker,S);$SetExc(S.FComponentState,0,0,6);$SetExc(S.FComponentState,1,0,6);return S},CreationFlags:function(S){var R=[0];R=[62];return R},Destroy:function(S){var LRegName$1="";$SetInc(S.FComponentState,5,0,6);if(S.FHandle$1){try{TW3TagObj.UnHookEvents$(S);if(TControlHandleHelper$Valid$2(S.FOwner$1)){TW3TagObj.RemoveFrom(S)}}finally{TW3CustomComponent.FinalizeObject$(S);LRegName$1=Trim$_String_(S.FTagId);if(LRegName$1.length>0)TW3ControlTracker.UnRegisterControl(TW3ControlTracker,S);S.FTagId="";S.FHandle$1=undefined}
TW3CustomComponent.Destroy(S)}
if(S.FAttributes)TObject.Free(S.FAttributes);TW3CustomComponent.Destroy(S)},EndUpdate:function(S){if(S.FUpdating>0){--S.FUpdating;if(S.FUpdating==0)TW3TagObj.AfterUpdate$(S)}},FinalizeObject:function(S){TW3CustomComponent.FinalizeObject(S)},GetAttributes:function(S){var R=null;if(S.FAttributes===null)S.FAttributes=TW3ElementAttributes.Create$133($New(TW3ElementAttributes),S.FHandle$1);R=S.FAttributes;return R},GetContentSelectionMode:function(S){var R=0;var CurrentMode;CurrentMode=S.FHandle$1.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"user-select")];if(CurrentMode){switch((TVariant.Asstring(CurrentMode)).toLocaleLowerCase()){case"auto":R=1;break;case"text":R=2;break;case"all":R=3;break;case"element":R=4;break;default:R=0}}else{S.FHandle$1.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"user-select")]="none";R=0}
return R},GetDOMFocusedElement:function(S){var R=undefined;R=document.querySelector(":focus");return R},GetUpdating:function(S){var R=false;R=S.FUpdating>0;return R},GetZIndex:function(S){var R=0;if(TControlHandleHelper$Valid$2(S.FHandle$1)){R=parseInt(S.FHandle$1.style.zIndex,10)}else R=-1;return R},GetZOrderList:function(S,Sort$2){var R={olTags:[],olZIndex:[]};var x$62=0;var LHandles=[],LHandle=undefined;LHandles=TControlHandleHelper$GetChildren(S.FHandle$1);var $tS;for(x$62=0,$tS=LHandles.length;x$62<$tS;x$62++){LHandle=LHandles[x$62];R.olTags.push(LHandle);R.olZIndex.push(parseInt(LHandle.style.zIndex,10))}
if(Sort$2)TW3StackingOrderList$Sort$1(R);return R},HandleControlBlured:function(S){},HandleControlFocused:function(S){TW3ControlTracker.SetFocusedControl(TW3ControlTracker,S)},HookEvents:function(S){S.FHandle$1.addEventListener("focus",$Event0(S,TW3TagObj.HandleControlFocused));S.FHandle$1.addEventListener("blur",$Event0(S,TW3TagObj.HandleControlBlured))},InitializeObject:function(S){TW3CustomComponent.InitializeObject(S)},InsertInto:function(S,OwnerHandle){if(THandleHelper$Valid$4(OwnerHandle)){if(TControlHandleHelper$Valid$2(S.FHandle$1)){if(TControlHandleHelper$Valid$2(S.FOwner$1)){try{TW3TagObj.RemoveFrom(S)}catch($e){var e$17=$W($e);throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.InsertInto",S,e$17.FMessage)}}
try{w3_setElementParentByRef(S.FHandle$1,OwnerHandle)}catch($e){var e$18=$W($e);throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.InsertInto",S,e$18.FMessage)}
S.FOwner$1=OwnerHandle}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.InsertInto",S,$R[22])}}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.InsertInto",S,$R[29])}},MakeElementTagId:function(S){var R="";R=TW3Identifiers.GenerateUniqueComponentName$1(TW3Identifiers);return R},MakeElementTagObj:function(S){var R=undefined;R=document.createElement("div");return R},RemoveFrom:function(S){if(TControlHandleHelper$Valid$2(S.FOwner$1)){if(TControlHandleHelper$Valid$2(S.FHandle$1)){try{w3_RemoveElementByRef(S.FHandle$1,S.FOwner$1);S.FOwner$1=undefined}catch($e){var e$19=$W($e);throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.RemoveFrom",S,e$19.FMessage)}}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.RemoveFrom",S,$R[22])}}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3TagObj.RemoveFrom",S,$R[29])}},RemoveFromComponentState:function(S,Flags$1){if($SetIn(Flags$1,0,0,6)){$SetExc(S.FComponentState,0,0,6)}
if($SetIn(Flags$1,1,0,6)){$SetExc(S.FComponentState,1,0,6)}
if($SetIn(Flags$1,2,0,6)){$SetExc(S.FComponentState,2,0,6)}
if($SetIn(Flags$1,3,0,6)){$SetExc(S.FComponentState,3,0,6)}
if($SetIn(Flags$1,4,0,6)){$SetExc(S.FComponentState,4,0,6)}
if($SetIn(Flags$1,5,0,6)){$SetExc(S.FComponentState,5,0,6)}},SetContentSelectionMode:function(S,NewMode){var LValue="";LValue="none";switch(NewMode){case 1:LValue="auto";break;case 3:LValue="all";break;case 2:LValue="text";break;case 4:LValue="element";break}
S.FHandle$1.style[TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"user-select")]=LValue},SetZIndex:function(S,NewZIndex){if(TControlHandleHelper$Valid$2(S.FHandle$1)){S.FHandle$1.style.zIndex=NewZIndex}},Showing:function(S){var R=false;R=S.FHandle$1&&TControlHandleHelper$Ready$3(S.FHandle$1)&&$SetIn(S.FComponentState,2,0,6);return R},StyleTagObject:function(S){S.FHandle$1.style["visibility"]="hidden";S.FHandle$1.style["display"]="none";S.FHandle$1.style["position"]="absolute";S.FHandle$1.style["overflow"]="hidden";S.FHandle$1.style["left"]="0px";S.FHandle$1.style["top"]="0px"},UnHookEvents:function(S){S.FHandle$1.onresize=null;S.FHandle$1.onselectstart=null;S.FHandle$1.onfocus=null;S.FHandle$1.onblur=null;S.FHandle$1.onchange=null;S.FHandle$1.onmousedown=null;S.FHandle$1.onmouseup=null;S.FHandle$1.onmousemove=null;S.FHandle$1.onmouseover=null;S.FHandle$1.onmouseout=null;S.FHandle$1.onclick=null;S.FHandle$1.ondblclick=null;S.FHandle$1.onkeydown=null;S.FHandle$1.onkeyup=null;S.FHandle$1.onkeypress=null;S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"animationstart")]=null;S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"animationend")]=null},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)},FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate$:function($){return $.ClassType.AfterUpdate($)},CreationFlags$:function($){return $.CreationFlags($)},HookEvents$:function($){return $.ClassType.HookEvents($)},MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)},MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing$:function($){return $.ClassType.Showing($)},StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents$:function($){return $.ClassType.UnHookEvents($)}};TW3TagObj.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3TagContainer={$ClassName:"TW3TagContainer",$Parent:TW3TagObj,$Init:function($){TW3TagObj.$Init($);$.FChildren$1=[]},a$46:function(S){return $As(TW3OwnedObject.GetOwner(S),TW3TagContainer)},BringToFront:function(S){var LParent=null,LIndex=0,Old=0;if($SetIn(S.FComponentState,2,0,6)){if(!TW3TagContainer.TopMost(S)){LParent=TW3TagContainer.a$46(S);LIndex=TW3TagContainer.GetMaxZIndex(LParent)+1;Old=parseInt(S.FHandle$1.style.zIndex,10);S.FHandle$1.style.zIndex=LIndex}}else{if(S.FHandle$1){TControlHandleHelper$ReadyExecute(S.FHandle$1,function(){S.FHandle$1.style.zIndex=(TW3TagContainer.GetMaxZIndex($As(TW3TagContainer.a$46(S),TW3CustomControl))+1)})}}},CBNoBehavior:function(S){if(event){event.preventDefault()}},ChildAdded:function(S,NewChild){},ChildByName:function(S,ComponentName){var R=null;var a$317=0;var LItem$4=null;var a$318=[];ComponentName=(Trim$_String_(ComponentName)).toLocaleLowerCase();a$318=S.FChildren$1;var $tT;for(a$317=0,$tT=a$318.length;a$317<$tT;a$317++){LItem$4=a$318[a$317];if((TW3TagContainer.GetComponentName(LItem$4)).toLocaleLowerCase()==ComponentName){R=LItem$4;break}}
return R},ChildRemoved:function(S,OldChild){},Create$41:function(S,AOwner$7){TW3TagObj.Create$10(S,AOwner$7);if(TW3TagContainer.a$46(S)!==null)TW3TagContainer.RegisterChild(TW3TagContainer.a$46(S),S);return S},FinalizeObject:function(S){TW3TagContainer.FreeChildren(S);if(TW3TagContainer.a$46(S)!==null)TW3TagContainer.UnRegisterChild(TW3TagContainer.a$46(S),S);TW3TagObj.FinalizeObject(S)},ForEach$3:function(S,Process){var a$319=0;var LChild$1=null;if(Process){var a$320=[];a$320=S.FChildren$1;var $tU;for(a$319=0,$tU=a$320.length;a$319<$tU;a$319++){LChild$1=a$320[a$319];if(!Process(LChild$1))break}}},FreeChildren:function(S){var LOldCount=0;try{while(S.FChildren$1.length>0){LOldCount=S.FChildren$1.length;TObject.Free(S.FChildren$1[0]);if(LOldCount==S.FChildren$1.length){S.FChildren$1.shift()}}}finally{S.FChildren$1.length=0}},GetChildCount:function(S){var R=0;R=S.FChildren$1.length;return R},GetChildHasFocus:function(S,Child){var R=false;var a$321=0;var LItem$5=null;var a$322=[];R=false;Child.v=null;a$322=S.FChildren$1;var $tV;for(a$321=0,$tV=a$322.length;a$321<$tV;a$321++){LItem$5=a$322[a$321];if(TW3TagContainer.GetHasFocus(LItem$5)){Child.v=LItem$5;break}else{R=TW3TagContainer.GetChildHasFocus(LItem$5,Child);if(R)break}}
return R},GetChildObject:function(S,Index$5){var R=null;R=S.FChildren$1[Index$5];return R},GetComponentName:function(S){var R="";R=S.Name;return R},GetHasFocus:function(S){var R=false;var LFocus;if(TControlHandleHelper$Valid$2(S.FHandle$1)){LFocus=document.activeElement;if(!LFocus||LFocus==document.body)
LFocus=null;else if(document.querySelector)
LFocus=document.querySelector(":focus");if(LFocus){R=LFocus==S.FHandle$1}else R=false}
return R},GetMaxZIndex:function(S){var R=0;var Lresult=0;R=0;Lresult=0;TW3TagContainer.ForEach$3(S,function(Child$1){var R=false;var LObj$1=null;var LIndex$1=0;R=true;LObj$1=Child$1;if(!$SetIn(LObj$1.FComponentState,5,0,6)){if(TControlHandleHelper$Valid$2(LObj$1.FHandle$1)){LIndex$1=TW3TagObj.GetZIndex(LObj$1);if(LIndex$1>Lresult)Lresult=LIndex$1;LIndex$1=TW3TagContainer.GetMaxZIndex(LObj$1);if(LIndex$1>Lresult)Lresult=LIndex$1}}
return R});R=Lresult;return R},QueryChildInThisBranch:function(S,Child$2){var R=false;R=false;while(Child$2!==null&&TW3TagContainer.a$46(Child$2)!==null){if(TW3TagContainer.a$46(Child$2)===S){R=true;break}else Child$2=TW3TagContainer.a$46(Child$2);if(Child$2===null)break}
return R},RegisterChild:function(S,Child$3){if(Child$3!==null&&Child$3!==S&&S.FChildren$1.indexOf(Child$3)<0){if(TW3TagObj.a$43(Child$3))TW3TagObj.RemoveFrom(Child$3);S.FChildren$1.push(Child$3);TW3TagObj.InsertInto(Child$3,S.FHandle$1);if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),2,0,8))TW3TagContainer.ChildAdded(S,Child$3)}},SetComponentName:function(S,NewComponentName){S.Name=NewComponentName},Showing:function(S){var R=false;R=TW3TagObj.Showing(S)&&TW3TagContainer.a$46(S)!==null;return R},TopMost:function(S){var R=false;var LTemp$4={olTags:[],olZIndex:[]};if(TW3TagContainer.a$46(S)!==null){LTemp$4=TW3TagObj.GetZOrderList(TW3TagContainer.a$46(S),true);if(LTemp$4.olZIndex.length>0){R=LTemp$4.olTags[0]==S.FHandle$1}else R=false}else R=false;return R},UnRegisterChild:function(S,Child$4){var LIndex$2=0;if(Child$4!==null&&Child$4!==S){LIndex$2=S.FChildren$1.indexOf(Child$4);if(LIndex$2>=0){S.FChildren$1.splice(LIndex$2,1);if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),3,0,8))TW3TagContainer.ChildRemoved(S,Child$4)}else{throw EW3Exception.CreateFmt($New(EW3Component),"Failed to remove child component [%s], child is not connected to this component error",[TW3TagContainer.GetComponentName(Child$4)])}
if(!$SetIn(Child$4.FComponentState,5,0,6))TW3TagObj.RemoveFrom(Child$4)}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject:TW3TagObj.InitializeObject,AfterUpdate:TW3TagObj.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3TagObj.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing$:function($){return $.ClassType.Showing($)},StyleTagObject:TW3TagObj.StyleTagObject,UnHookEvents:TW3TagObj.UnHookEvents,Create$41$:function($){return $.ClassType.Create$41.apply($.ClassType,arguments)},QueryChildInThisBranch$:function($){return $.ClassType.QueryChildInThisBranch.apply($.ClassType,arguments)}};TW3TagContainer.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3MovableControl={$ClassName:"TW3MovableControl",$Parent:TW3TagContainer,$Init:function($){TW3TagContainer.$Init($);$.FAdjusted=$.FTransparent=$.FUseAlpha=false;$.FAlpha=$.FSyncCount=0;$.FBackground=$.FBorders=$.FConstraints=$.FEdgeRadius=$.FOnMoved=$.FOnResize=$.FOnVisible=$.FTextShadow=null;$.FColor=0},AdjustToParentBox:function(S){var x$63=0;var dx$3=0;var dy$3=0;var LChild$2=null;var LCtrl=null;if(S.FHandle$1){if(!S.FAdjusted){if(!$SetIn(S.FComponentState,2,0,6)){TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3MovableControl.AdjustToParentBox),100);return}
S.FAdjusted=true;dx$3=TW3Borders.GetHSpace(TW3MovableControl.GetBorder(S));dy$3=TW3Borders.GetVSpace(TW3MovableControl.GetBorder(S));var $tW;for(x$63=0,$tW=TW3TagContainer.GetChildCount(S);x$63<$tW;x$63++){LChild$2=TW3TagContainer.GetChildObject(S,x$63);if($Is(LChild$2,TW3MovableControl)){LCtrl=$As(LChild$2,TW3MovableControl);if($SetIn(TW3TagObj.CreationFlags$(LCtrl.ClassType),1,0,8)){if(dx$3>0||dy$3>0)TW3MovableControl.SetSize$3(LCtrl,(TW3MovableControl.GetWidth$(LCtrl)-dx$3),(TW3MovableControl.GetHeight$(LCtrl)-dy$3));TW3MovableControl.AdjustToParentBox(LCtrl)}}}}}},AfterUpdate:function(S){if($SetIn(S.FComponentState,3,0,6)){if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),5,0,8)){if(S.FOnResize)S.FOnResize(S)}
if($SetIn(S.FComponentState,2,0,6))TW3MovableControl.Resize$(S);if($Is(S,TW3GraphicControl))TW3TagObj.AddToComponentState(S,[16])}
if($SetIn(S.FComponentState,4,0,6)){if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),4,0,8)){TW3MovableControl.Moved(S);if(S.FOnMoved)S.FOnMoved(S)}
if($SetIn(S.FComponentState,2,0,6)){if($Is(S,TW3GraphicControl))TW3CustomControl.Invalidate$($As(S,TW3GraphicControl))}}
TW3TagObj.RemoveFromComponentState(S,[24])},ClientHeight:function(S){var R=0;if(S.FHandle$1){if(S.FHandle$1.clientHeight){R=TVariant.Asinteger(S.FHandle$1.clientHeight);if(TVariant.IsNAN(R)||R==0)R=TW3MovableControl.GetHeight$(S)}else R=TW3MovableControl.GetHeight$(S)}
return R},ClientRect:function(S){var R={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};R.Right$1=TW3MovableControl.ClientWidth(S);R.Bottom$1=TW3MovableControl.ClientHeight(S);return R},ClientWidth:function(S){var R=0;if(S.FHandle$1){if(S.FHandle$1.clientWidth){R=TVariant.Asinteger(S.FHandle$1.clientWidth);if(TVariant.IsNAN(R)||R==0)R=TW3MovableControl.GetWidth$(S)}else R=TW3MovableControl.GetWidth$(S)}
return R},DisplayMode:function(S){var R="";R="inline-block";return R},FinalizeObject:function(S){if(S.FBackground)TObject.Free(S.FBackground);if(S.FBorders)TObject.Free(S.FBorders);if(S.FConstraints)TObject.Free(S.FConstraints);if(S.FTextShadow)TObject.Free(S.FTextShadow);if(S.FEdgeRadius)TObject.Free(S.FEdgeRadius);TW3TagContainer.FinalizeObject(S)},fxBusy:function(S){var R=false;if(TW3ElementAttributes.Exists$2(TW3TagObj.GetAttributes(S),"fxBusy")){R=TW3ElementAttributes.Read$5(TW3TagObj.GetAttributes(S),"fxBusy")=="yes"}else R=false;return R},fxFadeIn$1:function(S,Duration$1,OnFinished){var mEffect=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect);mEffect=TW3CustomAnimation.Create$139$($New(TW3FadeAnimation));$As(mEffect,TW3FadeAnimation).FFrom=0;$As(mEffect,TW3FadeAnimation).FTo=1;TW3CustomAnimation.SetDuration(mEffect,Duration$1);mEffect.FOnEnds=function(Sender$3){TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(Sender$3,TW3CustomAnimation));AfterEffect(S,$As(Sender$3,TW3CustomAnimation));if(OnFinished)OnFinished()},100)};TW3MovableControl.SetVisible(S,true);TW3CustomAnimation.Execute$1(mEffect,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxFadeIn$1(S,Duration$1,OnFinished)},50)},fxFadeOut$1:function(S,Duration$2,OnFinished$1){var mEffect$1=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$1);mEffect$1=TW3CustomAnimation.Create$139$($New(TW3FadeAnimation));$As(mEffect$1,TW3FadeAnimation).FFrom=1;$As(mEffect$1,TW3FadeAnimation).FTo=0;TW3CustomAnimation.SetDuration(mEffect$1,Duration$2);mEffect$1.FOnEnds=function(Sender$4){TW3MovableControl.SetVisible(S,false);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(Sender$4,TW3CustomAnimation));AfterEffect(S,$As(Sender$4,TW3CustomAnimation));if(OnFinished$1)OnFinished$1()},100)};TW3CustomAnimation.Execute$1(mEffect$1,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxFadeOut$1(S,Duration$2,OnFinished$1)},50)},fxMoveBy$1:function(S,dx$4,dy$4,Duration$3,OnFinished$2){var mEffect$2=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$2);mEffect$2=TW3CustomAnimation.Create$139$($New(TW3MoveAnimation));TW3CustomAnimation.SetDuration(mEffect$2,Duration$3);$As(mEffect$2,TW3MoveAnimation).FFromX$1=TW3MovableControl.GetLeft(S);$As(mEffect$2,TW3MoveAnimation).FFromY$1=TW3MovableControl.GetTop(S);$As(mEffect$2,TW3MoveAnimation).FToX$1=TW3MovableControl.GetLeft(S)+dx$4;$As(mEffect$2,TW3MoveAnimation).FToY$1=TW3MovableControl.GetTop(S)+dy$4;$As(mEffect$2,TW3MoveAnimation).FTiming=4;mEffect$2.FOnEnds=function(sender$1){TW3MovableControl.SetLeft(S,$As(sender$1,TW3MoveAnimation).FToX$1);TW3MovableControl.SetTop(S,$As(sender$1,TW3MoveAnimation).FToY$1);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$1,TW3CustomAnimation));AfterEffect(S,$As(sender$1,TW3CustomAnimation));if(OnFinished$2)OnFinished$2()},100)};TW3CustomAnimation.Execute$1(mEffect$2,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxMoveBy$1(S,dx$4,dy$4,Duration$3,OnFinished$2)},50)},fxMoveDown$1:function(S,Duration$4,OnFinished$3){var mEffect$3=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$3);mEffect$3=TW3CustomAnimation.Create$139$($New(TW3MoveAnimation));TW3CustomAnimation.SetDuration(mEffect$3,Duration$4);$As(mEffect$3,TW3MoveAnimation).FFromX$1=TW3MovableControl.GetLeft(S);$As(mEffect$3,TW3MoveAnimation).FFromY$1=TW3MovableControl.GetTop(S);$As(mEffect$3,TW3MoveAnimation).FToX$1=TW3MovableControl.GetLeft(S);$As(mEffect$3,TW3MoveAnimation).FToY$1=TW3MovableControl.GetHeight$($As(TW3TagContainer.a$46(S),TW3MovableControl))-TW3MovableControl.GetHeight$(S);$As(mEffect$3,TW3MoveAnimation).FTiming=4;mEffect$3.FOnEnds=function(sender$2){TW3MovableControl.SetTop(S,(TW3MovableControl.GetHeight$($As(TW3TagContainer.a$46(S),TW3MovableControl))-TW3MovableControl.GetHeight$(S)));TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$2,TW3CustomAnimation));AfterEffect(S,$As(sender$2,TW3CustomAnimation));if(OnFinished$3)OnFinished$3()},100)};TW3CustomAnimation.Execute$1(mEffect$3,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxMoveDown$1(S,Duration$4,OnFinished$3)},50)},fxMoveTo$1:function(S,dx$5,dy$5,Duration$5,OnFinished$4){var mEffect$4=null;if(!TW3MovableControl.fxBusy(S)){mEffect$4=TW3CustomAnimation.Create$139$($New(TW3MoveAnimation));BeforeEffect(S,mEffect$4);TW3CustomAnimation.SetDuration(mEffect$4,Duration$5);mEffect$4.FFromX$1=TW3MovableControl.GetLeft(S);mEffect$4.FFromY$1=TW3MovableControl.GetTop(S);mEffect$4.FToX$1=dx$5;mEffect$4.FToY$1=dy$5;mEffect$4.FTiming=4;mEffect$4.FOnEnds=function(sender$3){TW3MovableControl.SetLeft(S,dx$5);TW3MovableControl.SetTop(S,dy$5);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$3,TW3CustomAnimation));AfterEffect(S,$As(sender$3,TW3CustomAnimation));if(OnFinished$4)OnFinished$4()},100)};TW3CustomAnimation.Execute$1(mEffect$4,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxMoveTo$1(S,dx$5,dy$5,Duration$5,OnFinished$4)},50)},fxMoveUp$1:function(S,Duration$6,OnFinished$5){var mEffect$5=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$5);mEffect$5=TW3CustomAnimation.Create$139$($New(TW3MoveAnimation));TW3CustomAnimation.SetDuration(mEffect$5,Duration$6);$As(mEffect$5,TW3MoveAnimation).FFromX$1=TW3MovableControl.GetLeft(S);$As(mEffect$5,TW3MoveAnimation).FFromY$1=TW3MovableControl.GetTop(S);$As(mEffect$5,TW3MoveAnimation).FToX$1=TW3MovableControl.GetLeft(S);$As(mEffect$5,TW3MoveAnimation).FToY$1=0;$As(mEffect$5,TW3MoveAnimation).FTiming=4;mEffect$5.FOnEnds=function(sender$4){TW3MovableControl.SetTop(S,0);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$4,TW3CustomAnimation));AfterEffect(S,$As(sender$4,TW3CustomAnimation));if(OnFinished$5)OnFinished$5()},100)};TW3CustomAnimation.Execute$1(mEffect$5,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxMoveUp$1(S,Duration$6,OnFinished$5)},50)},fxScaleDown$1:function(S,aFactor,Duration$7,OnFinished$6){var mEffect$6=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$6);mEffect$6=TW3CustomAnimation.Create$139$($New(TW3SizeAnimation));TW3CustomAnimation.SetDuration(mEffect$6,Duration$7);$As(mEffect$6,TW3SizeAnimation).FFromX=TW3MovableControl.GetLeft(S);$As(mEffect$6,TW3SizeAnimation).FFromY=TW3MovableControl.GetTop(S);$As(mEffect$6,TW3SizeAnimation).FFromWidth=TW3MovableControl.GetWidth$(S);$As(mEffect$6,TW3SizeAnimation).FFromHeight=TW3MovableControl.GetHeight$(S);aFactor=TInteger.EnsureRange(aFactor,1,2147483647);$As(mEffect$6,TW3SizeAnimation).FToX=TW3MovableControl.GetLeft(S)+aFactor;$As(mEffect$6,TW3SizeAnimation).FToY=TW3MovableControl.GetTop(S)+aFactor;$As(mEffect$6,TW3SizeAnimation).FToWidth=TW3MovableControl.GetWidth$(S)-aFactor*2;$As(mEffect$6,TW3SizeAnimation).FToHeight=TW3MovableControl.GetHeight$(S)-aFactor*2;$As(mEffect$6,TW3SizeAnimation).FTiming=4;mEffect$6.FOnEnds=function(sender$5){TW3MovableControl.SetBounds(S,$As(mEffect$6,TW3SizeAnimation).FToX,$As(mEffect$6,TW3SizeAnimation).FToY,$As(mEffect$6,TW3SizeAnimation).FToWidth,$As(mEffect$6,TW3SizeAnimation).FToHeight);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$5,TW3CustomAnimation));AfterEffect(S,$As(sender$5,TW3CustomAnimation));if(OnFinished$6)OnFinished$6()},100)};TW3CustomAnimation.Execute$1(mEffect$6,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxScaleDown$1(S,aFactor,Duration$7,OnFinished$6)},50)},fxScaleTo$1:function(S,aToX,aToY,aToWidth,aToHeight,Duration$8,OnFinished$7){var mEffect$7=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$7);mEffect$7=TW3CustomAnimation.Create$139$($New(TW3SizeAnimation));TW3CustomAnimation.SetDuration(mEffect$7,Duration$8);$As(mEffect$7,TW3SizeAnimation).FFromX=TW3MovableControl.GetLeft(S);$As(mEffect$7,TW3SizeAnimation).FFromY=TW3MovableControl.GetTop(S);$As(mEffect$7,TW3SizeAnimation).FFromWidth=TW3MovableControl.GetWidth$(S);$As(mEffect$7,TW3SizeAnimation).FFromHeight=TW3MovableControl.GetHeight$(S);$As(mEffect$7,TW3SizeAnimation).FToX=aToX;$As(mEffect$7,TW3SizeAnimation).FToY=aToY;$As(mEffect$7,TW3SizeAnimation).FToWidth=aToWidth;$As(mEffect$7,TW3SizeAnimation).FToHeight=aToHeight;$As(mEffect$7,TW3SizeAnimation).FTiming=4;mEffect$7.FOnEnds=function(sender$6){TW3MovableControl.SetBounds(S,aToX,aToY,aToWidth,aToHeight);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){AfterEffect(S,$As(sender$6,TW3CustomAnimation));TObject.Free($As(sender$6,TW3CustomAnimation));if(OnFinished$7)OnFinished$7()},100)};TW3CustomAnimation.Execute$1(mEffect$7,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxScaleTo$1(S,aToX,aToY,aToWidth,aToHeight,Duration$8,OnFinished$7)},50)},fxScaleUp$1:function(S,aFactor$1,Duration$9,OnFinished$8){var mEffect$8=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$8);mEffect$8=TW3CustomAnimation.Create$139$($New(TW3SizeAnimation));TW3CustomAnimation.SetDuration(mEffect$8,Duration$9);aFactor$1=TInteger.EnsureRange(aFactor$1,1,2147483647);$As(mEffect$8,TW3SizeAnimation).FFromX=TW3MovableControl.GetLeft(S);$As(mEffect$8,TW3SizeAnimation).FFromY=TW3MovableControl.GetTop(S);$As(mEffect$8,TW3SizeAnimation).FFromWidth=TW3MovableControl.GetWidth$(S);$As(mEffect$8,TW3SizeAnimation).FFromHeight=TW3MovableControl.GetHeight$(S);$As(mEffect$8,TW3SizeAnimation).FToX=TW3MovableControl.GetLeft(S)-aFactor$1;$As(mEffect$8,TW3SizeAnimation).FToY=TW3MovableControl.GetTop(S)-aFactor$1;$As(mEffect$8,TW3SizeAnimation).FToWidth=TW3MovableControl.GetWidth$(S)+aFactor$1*2;$As(mEffect$8,TW3SizeAnimation).FToHeight=TW3MovableControl.GetHeight$(S)+aFactor$1*2;$As(mEffect$8,TW3SizeAnimation).FTiming=4;mEffect$8.FOnEnds=function(sender$7){TW3MovableControl.SetBounds(S,$As(mEffect$8,TW3SizeAnimation).FToX,$As(mEffect$8,TW3SizeAnimation).FToY,$As(mEffect$8,TW3SizeAnimation).FToWidth,$As(mEffect$8,TW3SizeAnimation).FToHeight);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$7,TW3CustomAnimation));AfterEffect(S,$As(sender$7,TW3CustomAnimation));if(OnFinished$8)OnFinished$8()},100)};TW3CustomAnimation.Execute$1(mEffect$8,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxScaleUp$1(S,aFactor$1,Duration$9,OnFinished$8)},50)},fxSetBusy:function(S,aValue$14){if(aValue$14){TW3ElementAttributes.Write$11(TW3TagObj.GetAttributes(S),"fxBusy","yes")}else TW3ElementAttributes.Write$11(TW3TagObj.GetAttributes(S),"fxBusy","no")},fxSizeTo$1:function(S,aWidth,aHeight,Duration$10,OnFinished$9){var mEffect$9=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$9);mEffect$9=TW3CustomAnimation.Create$139$($New(TW3SizeAnimation));TW3CustomAnimation.SetDuration(mEffect$9,Duration$10);$As(mEffect$9,TW3SizeAnimation).FFromX=TW3MovableControl.GetLeft(S);$As(mEffect$9,TW3SizeAnimation).FFromY=TW3MovableControl.GetTop(S);$As(mEffect$9,TW3SizeAnimation).FFromWidth=TW3MovableControl.GetWidth$(S);$As(mEffect$9,TW3SizeAnimation).FFromHeight=TW3MovableControl.GetHeight$(S);$As(mEffect$9,TW3SizeAnimation).FToX=TW3MovableControl.GetLeft(S);$As(mEffect$9,TW3SizeAnimation).FToY=TW3MovableControl.GetTop(S);$As(mEffect$9,TW3SizeAnimation).FToWidth=aWidth;$As(mEffect$9,TW3SizeAnimation).FToHeight=aHeight;$As(mEffect$9,TW3SizeAnimation).FTiming=4;mEffect$9.FOnEnds=function(sender$8){TW3MovableControl.SetBounds(S,$As(mEffect$9,TW3SizeAnimation).FToX,$As(mEffect$9,TW3SizeAnimation).FToY,$As(mEffect$9,TW3SizeAnimation).FToWidth,$As(mEffect$9,TW3SizeAnimation).FToHeight);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(sender$8,TW3CustomAnimation));AfterEffect(S,$As(sender$8,TW3CustomAnimation));if(OnFinished$9)OnFinished$9()},100)};TW3CustomAnimation.Execute$1(mEffect$9,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxSizeTo$1(S,aWidth,aHeight,Duration$10,OnFinished$9)},50)},fxWarpIn$1:function(S,Duration$11,OnFinished$10){var mEffect$10=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$10);mEffect$10=TW3CustomAnimation.Create$139$($New(TW3WarpInTransition));TW3CustomAnimation.SetDuration(mEffect$10,Duration$11);mEffect$10.FOnEnds=function(Sender$5){TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(Sender$5,TW3CustomAnimation));AfterEffect(S,$As(Sender$5,TW3CustomAnimation));if(OnFinished$10)OnFinished$10()},100)};TW3MovableControl.SetVisible(S,true);TW3CustomAnimation.Execute$1(mEffect$10,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxWarpIn$1(S,Duration$11,OnFinished$10)},50)},fxWarpOut$1:function(S,Duration$12,OnFinished$11){var mEffect$11=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$11);mEffect$11=TW3CustomAnimation.Create$139$($New(TW3WarpOutTransition));TW3CustomAnimation.SetDuration(mEffect$11,Duration$12);mEffect$11.FOnEnds=function(Sender$6){TW3MovableControl.SetVisible(S,false);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){try{TObject.Free($As(Sender$6,TW3CustomAnimation))}finally{AfterEffect(S,$As(Sender$6,TW3CustomAnimation));if(OnFinished$11)OnFinished$11()}},100)};TW3CustomAnimation.Execute$1(mEffect$11,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){WriteLn("Warpout on delay!");TW3MovableControl.fxWarpOut$1(S,Duration$12,OnFinished$11)},50)},fxZoomIn$1:function(S,Duration$13,OnFinished$12){var mEffect$12=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$12);mEffect$12=TW3CustomAnimation.Create$139$($New(TW3ZoomInTransition));TW3CustomAnimation.SetDuration(mEffect$12,Duration$13);mEffect$12.FOnEnds=function(Sender$7){TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(Sender$7,TW3CustomAnimation));AfterEffect(S,$As(Sender$7,TW3CustomAnimation));if(OnFinished$12)OnFinished$12()},100)};TW3MovableControl.SetVisible(S,true);TW3CustomAnimation.Execute$1(mEffect$12,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxZoomIn$1(S,Duration$13,OnFinished$12)},50)},fxZoomOut$1:function(S,Duration$14,OnFinished$13){var mEffect$13=null;if(!TW3MovableControl.fxBusy(S)){BeforeEffect(S,mEffect$13);mEffect$13=TW3CustomAnimation.Create$139$($New(TW3ZoomOutTransition));TW3CustomAnimation.SetDuration(mEffect$13,Duration$14);mEffect$13.FOnEnds=function(Sender$8){TW3MovableControl.SetVisible(S,false);TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TObject.Free($As(Sender$8,TW3CustomAnimation));AfterEffect(S,$As(Sender$8,TW3CustomAnimation));if(OnFinished$13)OnFinished$13()},100)};TW3CustomAnimation.Execute$1(mEffect$13,S)}else TW3Dispatch.SetTimeOut(TW3Dispatch,function(){TW3MovableControl.fxZoomOut$1(S,Duration$14,OnFinished$13)},50)},GetBackGround:function(S){var R=null;if(S.FBackground===null)S.FBackground=TW3OwnedObject.Create$10$($New(TW3ControlBackground),S);R=S.FBackground;return R},GetBorder:function(S){var R=null;if(S.FBorders===null)S.FBorders=TW3OwnedObject.Create$10$($New(TW3Borders),S);R=S.FBorders;return R},GetBoundsRect:function(S){var R={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};R.Left$3=w3_GetStyleAsInt(S.FHandle$1,"left");R.Top$3=w3_GetStyleAsInt(S.FHandle$1,"top");if(S.FHandle$1){R.Right$1=parseInt((R.Left$3+S.FHandle$1.offsetWidth),10);R.Bottom$1=parseInt((R.Top$3+S.FHandle$1.offsetHeight),10)}else{R.Right$1=R.Left$3;R.Bottom$1=R.Top$3}
return R},GetEdgeRadius:function(S){var R=null;if(S.FEdgeRadius===null)S.FEdgeRadius=TW3OwnedObject.Create$10$($New(TW3BorderRadius),S);R=S.FEdgeRadius;return R},GetHeight:function(S){var R=0;var LHandle$1=undefined;LHandle$1=S.FHandle$1;if(LHandle$1)
R=(LHandle$1).offsetHeight;return R},GetLeft:function(S){var R=0;var mObj$4=undefined;var mData$4,LTagRef=undefined;LTagRef=S.FHandle$1;mObj$4=document.defaultView.getComputedStyle(LTagRef,null);if(mObj$4){mData$4=(mObj$4).getPropertyValue('left');if(mData$4)
{if(typeof(mData$4)==="number")
{R=mData$4}else{if(typeof(mData$4)==="string")
{mData$4=parseInt(mData$4);if(typeof(mData$4)==="number"){R=mData$4}}}}}
return R},GetTextShadow:function(S){var R=null;if(S.FTextShadow===null)S.FTextShadow=TW3OwnedObject.Create$10$($New(TW3TextShadow),S);R=S.FTextShadow;return R},GetTop:function(S){var R=0;var mObj$5=undefined;var mData$5,LTagRef$1=undefined;LTagRef$1=S.FHandle$1;mObj$5=document.defaultView.getComputedStyle(LTagRef$1,null);if(mObj$5){mData$5=(mObj$5).getPropertyValue('top');if(mData$5)
{if(typeof(mData$5)==="number")
{R=mData$5}else{if(typeof(mData$5)==="string")
{mData$5=parseInt(mData$5);if(typeof(mData$5)==="number"){R=mData$5}}}}}
return R},GetVisible:function(S){var R=false;var LValue$1="";LValue$1=w3_GetStyleAsStr(S.FHandle$1,"visibility");R=(LValue$1).toLocaleLowerCase()=="visible";return R},GetWidth:function(S){var R=0;var LHandle$2=undefined;LHandle$2=S.FHandle$1;if(LHandle$2)
R=(LHandle$2).offsetWidth;return R},InitializeObject:function(S){TW3TagObj.InitializeObject(S);S.FAlpha=255;S.FColor=536870911;S.FTransparent=false;if(TW3TagContainer.a$46(S)){if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),0,0,8)){TW3MovableControl.ObjectReady$(S)}else TW3MovableControl.ReadySync(S)}else TW3MovableControl.ObjectReady$(S)},Moved:function(S){},MoveTo:function(S,NewLeft,NewTop){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["left"]=TInteger.ToPxStr(NewLeft);S.FHandle$1.style["top"]=TInteger.ToPxStr(NewTop);TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)},ObjectReady:function(S){if(!$SetIn(S.FComponentState,5,0,6)){if(S.FHandle$1){TW3TagObj.AddToComponentState(S,[4]);TW3TagObj.HookEvents$(S);if(TW3TagContainer.a$46(S)){TW3MovableControl.Resize$(S)}else{}}}},QueryChildrenReady:function(S){var R=false;var x$64=0;var LCount$2=0;var LItem$6=null;LCount$2=TW3TagContainer.GetChildCount(S);if(LCount$2>0){var $tX;for(x$64=0,$tX=LCount$2;x$64<$tX;x$64++){LItem$6=TW3TagContainer.GetChildObject(S,x$64);R=$SetIn(LItem$6.FComponentState,2,0,6);if(!R)break}}else{R=true}
return R},ReadySync:function(S){if(S.FHandle$1&&TControlHandleHelper$Ready$3(S.FHandle$1)&&(!$SetIn(S.FComponentState,0,0,6))&&(!$SetIn(S.FComponentState,1,0,6))&&TW3MovableControl.QueryChildrenReady(S)){TW3MovableControl.ObjectReady$(S)}else{++S.FSyncCount;if(S.FSyncCount>300){TW3MovableControl.ObjectReady$(S);return}
TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3MovableControl.ReadySync),10)}},Resize:function(S){},ScreenRect:function(S){var R={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};var LElement=undefined;if(S.FHandle$1){LElement=S.FHandle$1;while(LElement){R.Left$3+=parseInt(LElement.offsetLeft,10);R.Top$3+=parseInt(LElement.offsetTop,10);LElement=LElement.offsetParent;if(LElement){R.Left$3-=parseInt(LElement.scrollLeft,10);R.Top$3-=parseInt(LElement.scrollTop,10)}else break}
R.Right$1=parseInt((R.Left$3+S.FHandle$1.offsetWidth),10);R.Bottom$1=parseInt((R.Top$3+S.FHandle$1.offsetHeight),10)}
return R},SetAlpha:function(S,NewAlphaValue){S.FAlpha=TInteger.EnsureRange(NewAlphaValue,0,255);if(S.FUseAlpha){S.FHandle$1.style["opacity"]=S.FAlpha*0.01}},SetBounds$1:function(S,NewBounds){TW3MovableControl.SetBounds(S,NewBounds.Left$3,NewBounds.Top$3,TRect$Width$3(NewBounds),TRect$Height$3(NewBounds))},SetBounds:function(S,NewLeft$1,NewTop$1,NewWidth,NewHeight){var LWidth=0,LHeight=0,LMoved=false,LSized=false;LWidth=Math.max(NewWidth,0);LHeight=Math.max(NewHeight,0);LMoved=NewLeft$1!=TW3MovableControl.GetLeft(S)||NewTop$1!=TW3MovableControl.GetTop(S);LSized=LWidth!=S.FHandle$1.offsetWidth||LHeight!=S.FHandle$1.offsetHeight;if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["left"]=TInteger.ToPxStr(NewLeft$1);S.FHandle$1.style["top"]=TInteger.ToPxStr(NewTop$1);S.FHandle$1.style["width"]=TInteger.ToPxStr(LWidth);S.FHandle$1.style["height"]=TInteger.ToPxStr(LHeight);if(LMoved)TW3TagObj.AddToComponentState(S,[16]);if(LSized)TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["left"]=TInteger.ToPxStr(NewLeft$1);S.FHandle$1.style["top"]=TInteger.ToPxStr(NewTop$1);S.FHandle$1.style["width"]=TInteger.ToPxStr(LWidth);S.FHandle$1.style["height"]=TInteger.ToPxStr(LHeight)}},SetColor:function(S,NewColor){var r$5=0;var g$3=0;var b$20=0;var LAlpha=0;var LHandle$3=undefined;var LTransparent=false;if(NewColor!=S.FColor){S.FColor=NewColor;LAlpha=S.FAlpha;LHandle$3=S.FHandle$1;LTransparent=S.FTransparent;r$5=(NewColor>>16)&255;g$3=(NewColor>>8)&255;b$20=NewColor&255;if(LTransparent==false)
{(LHandle$3).style.backgroundColor="#"+((1<<24)+
(r$5<<16)+
(g$3<<8)+b$20).toString(16).slice(1)}else{(LHandle$3).style.backgroundColor="rgba("+(r$5).toString()+","+
(g$3).toString()+","+
(b$20).toString()+","+
(LAlpha/255).toString()+")"}}},SetHeight:function(S,NewHeight$1){var LValue$2=0;LValue$2=Math.max(NewHeight$1,0);if(LValue$2!=TW3MovableControl.GetHeight$(S)){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["height"]=TInteger.ToPxStr(LValue$2);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["height"]=TInteger.ToPxStr(LValue$2)}}},SetLeft:function(S,NewLeft$2){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["left"]=TInteger.ToPxStr(NewLeft$2);TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["left"]=TInteger.ToPxStr(NewLeft$2)}},SetSize$3:function(S,NewWidth$1,NewHeight$2){var LWidth$1=0;var LHeight$1=0;LWidth$1=Math.max(NewWidth$1,0);LHeight$1=Math.max(NewHeight$2,0);if(LWidth$1!=S.FHandle$1.offsetWidth||LHeight$1!=S.FHandle$1.offsetHeight){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["width"]=TInteger.ToPxStr(LWidth$1);S.FHandle$1.style["height"]=TInteger.ToPxStr(LHeight$1);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["width"]=TInteger.ToPxStr(LWidth$1);S.FHandle$1.style["height"]=TInteger.ToPxStr(LHeight$1)}}},SetTop:function(S,NewTop$2){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["top"]=TInteger.ToPxStr(NewTop$2);TW3TagObj.AddToComponentState(S,[16]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["top"]=TInteger.ToPxStr(NewTop$2)}},SetTransparent:function(S,Transparency){var LWebColor="";if(Transparency!=S.FTransparent){LWebColor=ColorToWebStr(S.FColor,(Transparency)?0:255);S.FHandle$1.style["backgroundColor"]=LWebColor;S.FTransparent=Transparency;if($Is(S,TW3GraphicControl)){if((!$SetIn(S.FComponentState,5,0,6))&&TW3TagObj.Showing$(S)){TW3TagObj.BeginUpdate(S);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}}}},SetUseAlpha:function(S,NewUseAlpha){if(S.FUseAlpha!=NewUseAlpha){S.FUseAlpha=NewUseAlpha;S.FHandle$1.style["opacity"]=(NewUseAlpha)?S.FAlpha*0.01:1}},SetVisible:function(S,NewVisibility){TW3TagObj.BeginUpdate(S);try{if(NewVisibility){S.FHandle$1.style["display"]=TW3MovableControl.DisplayMode(S.ClassType);S.FHandle$1.style["visibility"]="visible";TW3TagObj.AddToComponentState(S,[8])}else{S.FHandle$1.style["display"]="none";S.FHandle$1.style["visibility"]="hidden"}}finally{TW3TagObj.EndUpdate(S);if(!$SetIn(S.FComponentState,5,0,6)){if(S.FOnVisible)S.FOnVisible(S)}}},SetWidth:function(S,NewWidth$2){var LValue$3=0;LValue$3=Math.max(NewWidth$2,0);if(LValue$3!=TW3MovableControl.GetWidth$(S)){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["width"]=TInteger.ToPxStr(LValue$3);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["width"]=TInteger.ToPxStr(LValue$3)}}},Showing:function(S){var R=false;R=TW3TagContainer.Showing(S)&&TW3MovableControl.GetWidth$(S)>0&&TW3MovableControl.GetHeight$(S)>0&&TW3MovableControl.GetLeft(S)>=0&&TW3MovableControl.GetLeft(S)<TW3MovableControl.GetWidth$(S)&&TW3MovableControl.GetTop(S)>=0&&TW3MovableControl.GetTop(S)<TW3MovableControl.GetHeight$(S)&&TW3MovableControl.GetVisible(S);return R},StyleTagObject:function(S){TW3TagObj.StyleTagObject(S);if($SetIn(TW3TagObj.CreationFlags$(S.ClassType),7,0,8)){w3_setAttrib(S.FHandle$1,"tabindex",0)}},SupportAdjustment:function(S){var R=false;R=$SetIn(TW3TagObj.CreationFlags$(S),1,0,8);return R},_SetOnMoved:function(S,EventHandler$2){S.FOnMoved=EventHandler$2},_SetOnResized:function(S,EventHandler$3){S.FOnResize=EventHandler$3},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate$:function($){return $.ClassType.AfterUpdate($)},CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3TagObj.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing$:function($){return $.ClassType.Showing($)},StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3TagObj.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight$:function($){return $.ClassType.GetHeight($)},GetWidth$:function($){return $.ClassType.GetWidth($)},ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType,arguments)},SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType,arguments)},SupportAdjustment$:function($){return $.SupportAdjustment($)}};TW3MovableControl.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CustomControl={$ClassName:"TW3CustomControl",$Parent:TW3MovableControl,$Init:function($){TW3MovableControl.$Init($);$.FAngle=0;$.FFont=$.FGestureData=$.FOnAnimationBegins=$.FOnAnimationEnds=$.FOnChanged=$.FOnClick=$.FOnContextPopup=$.FOnDblClick=$.FOnGestureChange=$.FOnGestureEnd=$.FOnGestureStart=$.FOnGotFocus=$.FOnKeyDown=$.FOnKeyPress=$.FOnKeyUp=$.FOnLostFocus=$.FOnMouseDown=$.FOnMouseEnter=$.FOnMouseExit=$.FOnMouseMove=$.FOnMouseUp=$.FOnMouseWheel=$.FOnSelectionEnds=$.FOnSelectionStarts=$.FOnTouchBegins=$.FOnTouchEnds=$.FOnTouchMoves=$.FScrollInfo=$.FTagStyle=$.FTouchData=null;$.FMouseCaptured=0;$.FTouchBound=false},a$48:function(S){return vCaptureControl===S},a$47:function(S){return $As(TW3CustomControl.GetFont(S),TW3ControlFont)},BindTouch:function(S){if(!S.FTouchBound){S.FTouchBound=true;S.FHandle$1.addEventListener("touchstart",$Event1(S,TW3CustomControl.CMTouchBegins));S.FHandle$1.addEventListener("touchmove",$Event1(S,TW3CustomControl.CMTouchMove));S.FHandle$1.addEventListener("touchend",$Event1(S,TW3CustomControl.CMTouchEnds))}},CBAnimationBegins:function(S,EventObj){if(S.FOnAnimationBegins)S.FOnAnimationBegins(S)},CBAnimationEnds:function(S,EventObj$1){if(S.FOnAnimationEnds)S.FOnAnimationEnds(S)},CBChanged:function(S,eventObj){if(S.FOnChanged)S.FOnChanged(S)},CBClick:function(S,eventObj$1){if(S.FOnClick)S.FOnClick(S)},CBContextPopup:function(S,Event$2){var R=false;var Lsr={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};var Lmp={X$1:0,Y$1:0};var LHandled={};LHandled.v=false;Lsr=TW3MovableControl.ScreenRect(S);Lmp.X$1=Event$2.clientX-Lsr.Left$3;Lmp.Y$1=Event$2.clientY-Lsr.Top$3;TW3CustomControl.ContextPopup(S,Lmp,LHandled);R=!LHandled.v;return R},CBDblClick:function(S,eventObj$2){if(S.FOnDblClick)S.FOnDblClick(S)},CBFocused:function(S){if(S.FOnGotFocus)S.FOnGotFocus(S)},CBKeyDown:function(S,eventObj$3){if(S.FOnKeyDown)S.FOnKeyDown(S,eventObj$3.keyCode)},CBKeyPress:function(S,eventObj$4){if(S.FOnKeyPress)S.FOnKeyPress(S,eventObj$4.charCode)},CBKeyUp:function(S,eventObj$5){if(S.FOnKeyUp)S.FOnKeyUp(S,eventObj$5.keyCode)},CBLostFocus:function(S){if(S.FOnLostFocus)S.FOnLostFocus(S)},CBMouseDown:function(S,eventObj$6){var sr={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState=null;sr=TW3MovableControl.ScreenRect(S);shiftState=TShiftState.Current$1();shiftState.FMouseButtons=shiftState.FMouseButtons|(1<<eventObj$6.button);TShiftState.SetMouseEvent(shiftState,eventObj$6);TW3CustomControl.MouseDown$(S,parseInt(eventObj$6.button,10),shiftState,eventObj$6.clientX-sr.Left$3,eventObj$6.clientY-sr.Top$3)},CBMouseEnter:function(S,eventObj$7){var sr$1={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState$1=null;sr$1=TW3MovableControl.ScreenRect(S);shiftState$1=TShiftState.Current$1();TShiftState.SetMouseEvent(shiftState$1,eventObj$7);TW3CustomControl.MouseEnter(S,shiftState$1,eventObj$7.clientX-sr$1.Left$3,eventObj$7.clientY-sr$1.Top$3)},CBMouseExit:function(S,eventObj$8){var sr$2={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState$2=null;sr$2=TW3MovableControl.ScreenRect(S);shiftState$2=TShiftState.Current$1();TShiftState.SetMouseEvent(shiftState$2,eventObj$8);TW3CustomControl.MouseExit(S,shiftState$2,eventObj$8.clientX-sr$2.Left$3,eventObj$8.clientY-sr$2.Top$3)},CBMouseMove:function(S,eventObj$9){var sr$3={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState$3=null;sr$3=TW3MovableControl.ScreenRect(S);shiftState$3=TShiftState.Current$1();TShiftState.SetMouseEvent(shiftState$3,eventObj$9);TW3CustomControl.MouseMove$(S,shiftState$3,eventObj$9.clientX-sr$3.Left$3,eventObj$9.clientY-sr$3.Top$3)},CBMouseUp:function(S,eventObj$10){var sr$4={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState$4=null;sr$4=TW3MovableControl.ScreenRect(S);shiftState$4=TShiftState.Current$1();shiftState$4.FMouseButtons=shiftState$4.FMouseButtons&(~(1<<eventObj$10.button));TShiftState.SetMouseEvent(shiftState$4,eventObj$10);TW3CustomControl.MouseUp$(S,parseInt(eventObj$10.button,10),shiftState$4,eventObj$10.clientX-sr$4.Left$3,eventObj$10.clientY-sr$4.Top$3)},CBMouseWheel:function(S,eventObj$11){var wheelDelta$1=0;var handled$1={};handled$1.v=false;var sr$5={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0},shiftState$5=null,mousePos$1={X$1:0,Y$1:0};if(S.FOnMouseWheel){if(eventObj$11.detail){wheelDelta$1=eventObj$11.detail*-40}else wheelDelta$1=eventObj$11.wheelDelta;sr$5=TW3MovableControl.ScreenRect(S);shiftState$5=TShiftState.Current$1();TShiftState.SetMouseEvent(shiftState$5,eventObj$11);mousePos$1.X$1=eventObj$11.clientX-sr$5.Left$3;mousePos$1.Y$1=eventObj$11.clientY-sr$5.Top$3;TW3CustomControl.MouseWheel(S,shiftState$5,wheelDelta$1,mousePos$1,handled$1);if(handled$1.v){eventObj$11.preventDefault();eventObj$11.stopPropagation()}}},CBSelectionStarts:function(S,EventObj$2){if(S.FOnSelectionStarts)S.FOnSelectionStarts(S)},CMGestureChange:function(S){event.preventDefault();if(S.FOnGestureChange){if(!S.FGestureData)S.FGestureData=TObject.Create($New(TW3GestureData));TW3GestureData.Update$3(S.FGestureData);S.FOnGestureChange(S,S.FGestureData)}},CMGestureEnd:function(S){event.preventDefault();if(S.FOnGestureEnd){if(!S.FGestureData)S.FGestureData=TObject.Create($New(TW3GestureData));TW3GestureData.Update$3(S.FGestureData);S.FOnGestureEnd(S,S.FGestureData)}},CMGestureStart:function(S){event.preventDefault();if(S.FOnGestureStart){if(!S.FGestureData)S.FGestureData=TObject.Create($New(TW3GestureData));TW3GestureData.Update$3(S.FGestureData);S.FOnGestureStart(S,S.FGestureData)}},CMTouchBegins:function(S,eventObj$12){if(S.FOnTouchBegins){if(!S.FTouchData)S.FTouchData=TObject.Create($New(TW3TouchData));TW3TouchData.Update$1(S.FTouchData,eventObj$12);S.FOnTouchBegins(S,S.FTouchData)}},CMTouchEnds:function(S,eventObj$13){if(S.FOnTouchEnds){if(!S.FTouchData)S.FTouchData=TObject.Create($New(TW3TouchData));TW3TouchData.Update$1(S.FTouchData,eventObj$13);S.FOnTouchEnds(S,S.FTouchData)}},CMTouchMove:function(S,eventObj$14){if(S.FOnTouchMoves){if(S.FTouchData===null)S.FTouchData=TObject.Create($New(TW3TouchData));TW3TouchData.Update$1(S.FTouchData,eventObj$14);S.FOnTouchMoves(S,S.FTouchData)}},ContextPopup:function(S,mousePos$2,Handled){if(S.FOnContextPopup)S.FOnContextPopup(S,mousePos$2,Handled)},DropFocus:function(S){if(!$SetIn(S.FComponentState,5,0,6)){if(S.FHandle$1){try{S.FHandle$1.blur()}catch($e){var e$20=$W($e);throw EW3Exception.Create$16($New(EW3CustomControl),"TW3CustomControl.DropFocus",S,e$20.FMessage)}}}},FinalizeObject:function(S){TObject.Free(S.FFont);TObject.Free(S.FTagStyle);TObject.Free(S.FScrollInfo);TObject.Free(S.FTouchData);TObject.Free(S.FGestureData);TW3MovableControl.FinalizeObject(S)},GetBorderRadius:function(S){var R=0;R=w3_GetStyleAsInt(S.FHandle$1,"bordertopleftRadius");return R},GetChildrenSortedByYPos:function(S){var R=[];var mCount$1=0;var x$65=0;var mAltered=false;var mObj$6=null;var mLast=null;var mCurrent$1=null;mCount$1=TW3TagContainer.GetChildCount(S);if(mCount$1>0){var $tY;for(x$65=0,$tY=mCount$1;x$65<$tY;x$65++){mObj$6=TW3TagContainer.GetChildObject(S,x$65);if($Is(mObj$6,TW3CustomControl)){R.push(mObj$6)}}
if(R.length>1){do{mAltered=false;var $tZ;for(x$65=1,$tZ=mCount$1;x$65<$tZ;x$65++){mLast=$As(R[x$65-1],TW3CustomControl);mCurrent$1=$As(R[x$65],TW3CustomControl);if(TW3MovableControl.GetTop(mCurrent$1)<TW3MovableControl.GetTop(mLast)){$ArraySwap(R,(x$65-1),x$65);mAltered=true}}}while(!(mAltered==false))}}
return R},GetEnabled:function(S){var R=false;R=S.FHandle$1.disabled!=true;return R},GetFont:function(S){var R=null;if(S.FFont===null){S.FFont=TW3ControlFont.Create$104($New(TW3ControlFont),S)}
R=S.FFont;return R},GetScrollInfo:function(S){var R=null;if(S.FScrollInfo===null)S.FScrollInfo=TW3ScrollInfo.Create$102($New(TW3ScrollInfo),S);R=S.FScrollInfo;return R},GetStyleClass:function(S){var R="";R=w3_getAttribAsStr(S.FHandle$1,"class");return R},GetTagStyle:function(S){var R=null;if(S.FTagStyle===null)S.FTagStyle=TW3OwnedObject.Create$10$($New(TW3TagStyle),S);R=S.FTagStyle;return R},GetZoom:function(S){var R=0;R=w3_GetStyleAsFloat(S.FHandle$1,"zoom");return R},HookEvents:function(S){TW3TagObj.HookEvents(S);S.FHandle$1.onclick=$Event1(S,TW3CustomControl.CBClick$);S.FHandle$1.onfocus=$Event0(S,TW3CustomControl.CBFocused);S.FHandle$1.onblur=$Event0(S,TW3CustomControl.CBLostFocus)},InitializeCapture:function(S){var doc=undefined;doc=document;doc.addEventListener("mousedown",function(evt){if(vCaptureControl!==null){TW3CustomControl.CBMouseDown$(vCaptureControl,evt);evt.stopImmediatePropagation()}},true);doc.addEventListener("mousemove",function(evt$1){if(vCaptureControl!==null){TW3CustomControl.CBMouseMove$(vCaptureControl,evt$1);evt$1.stopImmediatePropagation()}},true);doc.addEventListener("mouseup",function(evt$2){if(vCaptureControl!==null){TW3CustomControl.CBMouseUp$(vCaptureControl,evt$2);evt$2.stopImmediatePropagation()}
vCaptureControl=null},true);doc.addEventListener("mouseover",function(evt$3){if(vCaptureControl!==null){TW3CustomControl.CBMouseEnter(vCaptureControl,evt$3);evt$3.stopImmediatePropagation()}},true);doc.addEventListener("mouseout",function(evt$4){if(vCaptureControl!==null){TW3CustomControl.CBMouseExit(vCaptureControl,evt$4);evt$4.stopImmediatePropagation()}},true);doc.addEventListener("mousewheel",function(evt$5){if(vCaptureControl!==null){TW3CustomControl.CBMouseWheel(vCaptureControl,evt$5);evt$5.stopImmediatePropagation()}},true);doc.addEventListener("onclick",function(evt$6){if(vCaptureControl!==null){TW3CustomControl.CBClick$(vCaptureControl,evt$6);evt$6.stopImmediatePropagation()}},true);doc.addEventListener("ondblclick",function(evt$7){if(vCaptureControl!==null){TW3CustomControl.CBDblClick(vCaptureControl,evt$7);evt$7.stopImmediatePropagation()}},true);vCaptureInitialized=true},Invalidate:function(S){if(!$SetIn(S.FComponentState,5,0,6)){TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3MovableControl.Resize$),50)}},LayoutChildren:function(S){if(TW3TagObj.Showing$(S)){TW3TagObj.BeginUpdate(S);try{TW3TagContainer.ForEach$3(S,function(Child$5){var R=false;if($Is(Child$5,TW3CustomControl))TW3CustomControl.LayoutChildren($As(Child$5,TW3CustomControl));R=true;return R})}finally{TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)}}else{TW3TagObj.BeginUpdate(S);TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)}},MouseDown:function(S,button$3,shiftState$6,x$66,y$33){if(S.FOnMouseDown)S.FOnMouseDown(S,button$3,shiftState$6,x$66,y$33)},MouseEnter:function(S,shiftState$7,x$67,y$34){if(S.FOnMouseEnter)S.FOnMouseEnter(S,shiftState$7,x$67,y$34)},MouseExit:function(S,shiftState$8,x$68,y$35){if(S.FOnMouseExit)S.FOnMouseExit(S,shiftState$8,x$68,y$35)},MouseMove:function(S,shiftState$9,x$69,y$36){if(S.FOnMouseMove)S.FOnMouseMove(S,shiftState$9,x$69,y$36)},MouseUp:function(S,button$4,shiftState$10,x$70,y$37){if(S.FOnMouseUp)S.FOnMouseUp(S,button$4,shiftState$10,x$70,y$37)},MouseWheel:function(S,shift,wheelDelta$2,mousePos$3,handled$2){if(S.FOnMouseWheel)S.FOnMouseWheel(S,shift,wheelDelta$2,mousePos$3,handled$2)},ReleaseCapture:function(S){--S.FMouseCaptured;if(S.FMouseCaptured==0){if(S.FHandle$1.releaseCapture){S.FHandle$1.releaseCapture()}
vCaptureControl=null}else if(S.FMouseCaptured<0)S.FMouseCaptured=0},SetAngle:function(S,NewAngle){if(NewAngle!=S.FAngle){S.FAngle=NewAngle;S.FHandle$1.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Transform")]="rotate("+FloatToStr$_Float_Integer_(NewAngle,2)+"deg)"}},SetBorderRadius:function(S,aNewRadius){if(!$SetIn(S.FComponentState,0,0,6)){TW3TagObj.BeginUpdate(S);S.FHandle$1.style["borderRadius"]=TInteger.ToPxStr(aNewRadius);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}else{S.FHandle$1.style["borderRadius"]=TInteger.ToPxStr(aNewRadius)}},SetCapture:function(S){if(S.FMouseCaptured==0){if(S.FHandle$1.setCapture){S.FHandle$1.setCapture(true)}else if(!vCaptureInitialized)TW3CustomControl.InitializeCapture(S.ClassType);vCaptureControl=S}
++S.FMouseCaptured},SetEnabled:function(S,EnabledValue){S.FHandle$1.disabled=(!EnabledValue);switch(EnabledValue){case true:TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"disabledState");break;case false:TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"disabledState");break}},SetFocus:function(S){if(!$SetIn(S.FComponentState,5,0,6)){if(S.FHandle$1){try{if(window.event){if(window.event.type=="mousedown")
event.preventDefault()}}catch($e){var e$21=$W($e)}
try{S.FHandle$1.focus()}catch($e){var e$22=$W($e);throw EW3Exception.Create$16($New(EW3CustomControl),"TW3CustomControl.SetFocus",S,e$22.FMessage)}
TW3ControlTracker.SetFocusedControl(TW3ControlTracker,S)}}},SetStyleClass:function(S,aStyle){w3_setAttrib(S.FHandle$1,"class",aStyle)},SetZoom:function(S,ZoomValue){S.FHandle$1.style["zoom"]=ZoomValue},StyleTagObject:function(S){TW3MovableControl.StyleTagObject(S);TW3CustomControl.SetStyleClass(S,TObject.ClassName(S.ClassType));TW3MovableControl.SetVisible(S,true)},UnHookEvents:function(S){S.FHandle$1.onclick=null;S.FHandle$1.onfocus=null;S.FHandle$1.onblur=null;if(!$SetIn(TW3TagObj.CreationFlags$(S.ClassType),6,0,8)){S.FHandle$1.onselectstart=null}},_setAnimationBegins:function(S,aValue$15){switch((aValue$15!==null)){case true:S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationStart")]=$Event1(S,TW3CustomControl.CBAnimationBegins);break;case false:S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationStart")]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnAnimationBegins=aValue$15},_setAnimationEnds:function(S,aValue$16){switch((aValue$16!==null)){case true:S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd")]=$Event1(S,TW3CustomControl.CBAnimationEnds);break;case false:S.FHandle$1[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd")]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnAnimationEnds=aValue$16},_setChanged:function(S,aValue$17){switch((aValue$17!==null)){case true:S.FHandle$1["onchange"]=$Event1(S,TW3CustomControl.CBChanged);break;case false:S.FHandle$1["onchange"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnChanged=aValue$17},_setContextPopup:function(S,aValue$18){switch((aValue$18!==null)){case true:S.FHandle$1["oncontextmenu"]=$Event1(S,TW3CustomControl.CBContextPopup);break;case false:S.FHandle$1["oncontextmenu"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnContextPopup=aValue$18},_setGestureChange:function(S,aValue$19){if(S.FOnGestureChange){w3_RemoveEvent(S.FHandle$1,"gesturechange",$Event0(S,TW3CustomControl.CMGestureChange),true);S.FOnGestureChange=null}
if(aValue$19){S.FOnGestureChange=aValue$19;w3_AddEvent(S.FHandle$1,"gesturechange",$Event0(S,TW3CustomControl.CMGestureChange),true)}},_setGestureEnd:function(S,aValue$20){if(S.FOnGestureEnd){w3_RemoveEvent(S.FHandle$1,"gesturestart",$Event0(S,TW3CustomControl.CMGestureEnd),true);S.FOnGestureEnd=null}
if(aValue$20){S.FOnGestureEnd=aValue$20;w3_AddEvent(S.FHandle$1,"gestureend",$Event0(S,TW3CustomControl.CMGestureEnd),true)}},_setGestureStart:function(S,aValue$21){if(S.FOnGestureStart){w3_RemoveEvent(S.FHandle$1,"gesturestart",$Event0(S,TW3CustomControl.CMGestureStart),true);S.FOnGestureStart=null}
if(aValue$21){S.FOnGestureStart=aValue$21;w3_AddEvent(S.FHandle$1,"gesturestart",$Event0(S,TW3CustomControl.CMGestureStart),true)}},_setGotFocus:function(S,aValue$22){S.FOnGotFocus=aValue$22},_setKeyDown:function(S,aValue$23){switch((aValue$23!==null)){case true:S.FHandle$1["onkeydown"]=$Event1(S,TW3CustomControl.CBKeyDown$);break;case false:S.FHandle$1["onkeydown"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnKeyDown=aValue$23},_setKeyPress:function(S,aValue$24){switch((aValue$24!==null)){case true:S.FHandle$1["onkeypress"]=$Event1(S,TW3CustomControl.CBKeyPress);break;case false:S.FHandle$1["onkeypress"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnKeyPress=aValue$24},_setKeyUp:function(S,aValue$25){switch((aValue$25!==null)){case true:S.FHandle$1["onkeyup"]=$Event1(S,TW3CustomControl.CBKeyUp$);break;case false:S.FHandle$1["onkeyup"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnKeyUp=aValue$25},_setLostFocus:function(S,aValue$26){S.FOnLostFocus=aValue$26},_setMouseClick:function(S,aValue$27){S.FOnClick=aValue$27},_setMouseDblClick:function(S,aValue$28){switch((aValue$28!==null)){case true:S.FHandle$1["ondblclick"]=$Event1(S,TW3CustomControl.CBDblClick);break;case false:S.FHandle$1["ondblclick"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnDblClick=aValue$28},_setMouseDown:function(S,aValue$29){S.FHandle$1["onmousedown"]=$Event1(S,TW3CustomControl.CBMouseDown$);S.FOnMouseDown=aValue$29},_setMouseEnter:function(S,aValue$30){switch((aValue$30!==null)){case true:S.FHandle$1["onmouseover"]=$Event1(S,TW3CustomControl.CBMouseEnter);break;case false:S.FHandle$1["onmouseover"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnMouseEnter=aValue$30},_setMouseExit:function(S,aValue$31){switch((aValue$31!==null)){case true:S.FHandle$1["onmouseout"]=$Event1(S,TW3CustomControl.CBMouseExit);break;case false:S.FHandle$1["onmouseout"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
S.FOnMouseExit=aValue$31},_setMouseMove:function(S,aValue$32){S.FHandle$1["onmousemove"]=$Event1(S,TW3CustomControl.CBMouseMove$);S.FOnMouseMove=aValue$32},_setMouseUp:function(S,aValue$33){S.FHandle$1["onmouseup"]=$Event1(S,TW3CustomControl.CBMouseUp$);S.FOnMouseUp=aValue$33},_setMouseWheel:function(S,aValue$34){var LEventSupported=false;var LHandle$4=undefined;LHandle$4=S.FHandle$1;LEventSupported='onmousewheel'in LHandle$4;switch(LEventSupported){case true:switch((aValue$34!==null)){case true:LHandle$4["onmousewheel"]=$Event1(S,TW3CustomControl.CBMouseWheel);break;case false:LHandle$4["onmousewheel"]=$Event0(S,TW3TagContainer.CBNoBehavior);break}
break;case false:LEventSupported='DOMMouseScroll'in LHandle$4;if(LEventSupported){switch((aValue$34!==null)){case true:LHandle$4.addEventListener("DOMMouseScroll",$Event1(S,TW3CustomControl.CBMouseWheel),false);break;case false:LHandle$4.removeEventListener("DOMMouseScroll",$Event1(S,TW3CustomControl.CBMouseWheel),false);break}}
break}
S.FOnMouseWheel=aValue$34},_setSelectionEnds:function(S,Handler){S.FHandle$1["onselect"]=$Event1(S,TW3CustomControl.CBSelectionStarts);S.FOnSelectionStarts=Handler},_setSelectionStarts:function(S,Handler$1){S.FHandle$1["onselectstart"]=$Event1(S,TW3CustomControl.CBSelectionStarts);S.FOnSelectionStarts=Handler$1},_setTouchBegins:function(S,aValue$35){if(aValue$35)TW3CustomControl.BindTouch(S);S.FOnTouchBegins=aValue$35},_setTouchEnds:function(S,aValue$36){if(aValue$36)TW3CustomControl.BindTouch(S);S.FOnTouchEnds=aValue$36},_setTouchMoves:function(S,aValue$37){if(aValue$37)TW3CustomControl.BindTouch(S);S.FOnTouchMoves=aValue$37},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents$:function($){return $.ClassType.HookEvents($)},MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents$:function($){return $.ClassType.UnHookEvents($)},Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType,arguments)},CBKeyDown$:function($){return $.ClassType.CBKeyDown.apply($.ClassType,arguments)},CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType,arguments)},CBMouseDown$:function($){return $.ClassType.CBMouseDown.apply($.ClassType,arguments)},CBMouseMove$:function($){return $.ClassType.CBMouseMove.apply($.ClassType,arguments)},CBMouseUp$:function($){return $.ClassType.CBMouseUp.apply($.ClassType,arguments)},GetEnabled$:function($){return $.ClassType.GetEnabled($)},Invalidate$:function($){return $.ClassType.Invalidate($)},MouseDown$:function($){return $.ClassType.MouseDown.apply($.ClassType,arguments)},MouseMove$:function($){return $.ClassType.MouseMove.apply($.ClassType,arguments)},MouseUp$:function($){return $.ClassType.MouseUp.apply($.ClassType,arguments)},SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3CustomControl.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3WorkbenchMenuBar={$ClassName:"TW3WorkbenchMenuBar",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCaption$5=$.FGlyph$2=null},FinalizeObject:function(S){TObject.Free(S.FGlyph$2);TObject.Free(S.FCaption$5);TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FCaption$5=TW3TagContainer.Create$41$($New(TW3Label),S);S.FGlyph$2=TW3TagContainer.Create$41$($New(TW3Image),S);TW3Image.LoadFromURL(S.FGlyph$2,"res\/commodore-logo.png");TW3Image.SetFit(S.FGlyph$2,2);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),16777215)},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FCaption$5),0);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FCaption$5),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FCaption$5),11);TW3Label.SetCaption$2(S.FCaption$5,"Workbench Screen");TW3MovableControl.SetHeight$(S,24)},Resize:function(S){TW3MovableControl.Resize(S);TW3MovableControl.SetBounds(S.FGlyph$2,1,1,(TW3MovableControl.ClientHeight(S)-2),(TW3MovableControl.ClientHeight(S)-3));TW3MovableControl.SetBounds(S.FCaption$5,(TW3MovableControl.GetLeft(S.FGlyph$2)+TW3MovableControl.GetWidth$(S.FGlyph$2)+2),0,TW3MovableControl.ClientWidth(S),TW3MovableControl.ClientHeight(S))},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(S),"res\/menubar_background.png")},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3WorkbenchMenuBar.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
function Copy$TW3TextMetrics(s,d){return d}
function Clone$TW3TextMetrics($){return{}}
var TW3ImageData={$ClassName:"TW3ImageData",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$9=null},a$94:function(S){return S.FHandle$9.height},a$93:function(S){return S.FHandle$9.width},FromImageData$1:function(S,aImageDataRef){$Assert(aImageDataRef!==null,$R[43]+"reference was nil error","");S.FHandle$9=aImageDataRef},Destroy:TObject.Destroy};var TW3CustomGraphicContext={$ClassName:"TW3CustomGraphicContext",$Parent:TObject,$Init:function($){TObject.$Init($)},Allocate$1:function(S,aWidth$1,aHeight$1){if(TW3CustomGraphicContext.GetOwnsReference$(S)){if(THandleHelper$Valid$4(TW3CustomGraphicContext.GetDC$1$(S)))TW3CustomGraphicContext.Release$1(S);TW3CustomGraphicContext.SetSize$6$(S,aWidth$1,aHeight$1)}else{throw Exception.Create($New(Exception),"Cannot modify current graphics context")}},Release$1:function(S){if(TW3CustomGraphicContext.GetOwnsReference$(S)){if(THandleHelper$Valid$4(TW3CustomGraphicContext.GetDC$1$(S)))TW3CustomGraphicContext.ReleaseDC$(S)}else{throw Exception.Create($New(Exception),"Cannot modify current graphics context")}},Destroy:TObject.Destroy,GetDC$1$:function($){return $.ClassType.GetDC$1($)},GetHandle$8$:function($){return $.ClassType.GetHandle$8($)},GetHeight$2$:function($){return $.ClassType.GetHeight$2($)},GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)},GetWidth$2$:function($){return $.ClassType.GetWidth$2($)},ReleaseDC$:function($){return $.ClassType.ReleaseDC($)},SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType,arguments)}};var TW3GraphicContext={$ClassName:"TW3GraphicContext",$Parent:TW3CustomGraphicContext,$Init:function($){TW3CustomGraphicContext.$Init($);$.FObjId="";$.FObjRef=undefined;$.FOwner$3=undefined},Create$120:function(S,AOwner$8){TObject.Create(S);S.FObjRef=w3_createHtmlElement("canvas");S.FObjId=TW3Identifiers.GenerateUniqueObjectId(TW3Identifiers);S.FObjRef.id=S.FObjId;S.FOwner$3=AOwner$8;if(S.FOwner$3)w3_setElementParentByRef(S.FObjRef,S.FOwner$3);return S},Destroy:function(S){if(THandleHelper$Valid$4(S.FOwner$3))w3_RemoveElementByRef(S.FObjRef,S.FOwner$3);S.FOwner$3=null;S.FObjRef=null;TObject.Destroy(S)},GetDC$1:function(S){var R=undefined;if(S.FObjRef){R=S.FObjRef.getContext("2d")}else R=null;return R},GetHandle$8:function(S){var R=undefined;R=S.FObjRef;return R},GetHeight$2:function(S){var R=0;if(S.FObjRef)R=parseInt(S.FObjRef.height,10);return R},GetOwnsReference:function(S){var R=false;R=true;return R},GetWidth$2:function(S){var R=0;if(S.FObjRef)R=parseInt(S.FObjRef.width,10);return R},ReleaseDC:function(S){if(S.FObjRef){S.FObjRef.width=0;S.FObjRef.height=0}},SetSize$6:function(S,aNewWidth,aNewHeight){if(S.FObjRef){S.FObjRef.width=aNewWidth;S.FObjRef.height=aNewHeight}},Destroy$:function($){return $.ClassType.Destroy($)},GetDC$1$:function($){return $.ClassType.GetDC$1($)},GetHandle$8$:function($){return $.ClassType.GetHandle$8($)},GetHeight$2$:function($){return $.ClassType.GetHeight$2($)},GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)},GetWidth$2$:function($){return $.ClassType.GetWidth$2($)},ReleaseDC$:function($){return $.ClassType.ReleaseDC($)},SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType,arguments)}};var TW3ControlGraphicContext={$ClassName:"TW3ControlGraphicContext",$Parent:TW3CustomGraphicContext,$Init:function($){TW3CustomGraphicContext.$Init($);$.FCtrlTag=undefined},Create$121:function(S,aControlHandle){TObject.Create(S);if(aControlHandle){S.FCtrlTag=aControlHandle}else{throw Exception.Create($New(Exception),"Control handle is invalid error")}
return S},GetDC$1:function(S){var R=undefined;R=S.FCtrlTag.getContext("2d");return R},GetHandle$8:function(S){var R=undefined;R=S.FCtrlTag;return R},GetHeight$2:function(S){var R=0;R=w3_getPropertyAsInt(S.FCtrlTag,"height");return R},GetOwnsReference:function(S){var R=false;R=false;return R},GetWidth$2:function(S){var R=0;R=w3_getPropertyAsInt(S.FCtrlTag,"width");return R},ReleaseDC:function(S){},SetSize$6:function(S,aNewWidth$1,aNewHeight$1){},Destroy:TObject.Destroy,GetDC$1$:function($){return $.ClassType.GetDC$1($)},GetHandle$8$:function($){return $.ClassType.GetHandle$8($)},GetHeight$2$:function($){return $.ClassType.GetHeight$2($)},GetOwnsReference$:function($){return $.ClassType.GetOwnsReference($)},GetWidth$2$:function($){return $.ClassType.GetWidth$2($)},ReleaseDC$:function($){return $.ClassType.ReleaseDC($)},SetSize$6$:function($){return $.ClassType.SetSize$6.apply($.ClassType,arguments)}};var TW3CanvasPattern={$ClassName:"TW3CanvasPattern",$Parent:TObject,$Init:function($){TObject.$Init($)},Destroy:TObject.Destroy};var TW3CanvasGradient={$ClassName:"TW3CanvasGradient",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$11=undefined},Create$122:function(S,aHandle$1){TObject.Create(S);S.FHandle$11=aHandle$1;return S},Destroy:TObject.Destroy};var TW3CustomFont={$ClassName:"TW3CustomFont",$Parent:TObject,$Init:function($){TObject.$Init($);$.OnChanged=null},Assign$2:function(S,FontObj){if(FontObj){TW3CustomFont.SetName$1$(S,TW3CustomFont.GetName$1$(FontObj));TW3CustomFont.SetColor$3$(S,TW3CustomFont.GetColor$(FontObj));TW3CustomFont.SetWeight$(S,TW3CustomFont.GetWeight$(FontObj));TW3CustomFont.SetSize$4$(S,TW3CustomFont.GetSize$5$(FontObj))}},Destroy:TObject.Destroy,GetColor$:function($){return $.ClassType.GetColor($)},GetHandle$5$:function($){return $.ClassType.GetHandle$5($)},GetName$1$:function($){return $.ClassType.GetName$1($)},GetSize$5$:function($){return $.ClassType.GetSize$5($)},GetWeight$:function($){return $.ClassType.GetWeight($)},SetColor$3$:function($){return $.ClassType.SetColor$3.apply($.ClassType,arguments)},SetName$1$:function($){return $.ClassType.SetName$1.apply($.ClassType,arguments)},SetSize$4$:function($){return $.ClassType.SetSize$4.apply($.ClassType,arguments)},SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType,arguments)}};var TW3CanvasFont={$ClassName:"TW3CanvasFont",$Parent:TW3CustomFont,$Init:function($){TW3CustomFont.$Init($);$.FColor$3=0;$.FName$1=$.FWeight="";$.FParent$1=null;$.FSize$3=0},Create$123:function(S,Canvas$1){TObject.Create(S);S.FParent$1=Canvas$1;if(S.FParent$1){TW3CanvasFont.ReadFontInfo(S)}else{throw Exception.Create($New(Exception),"Canvas was NIL or unassigned error")}
return S},GetColor:function(S){var R=0;R=S.FColor$3;return R},GetHandle$5:function(S){var R=undefined;R=null;return R},GetName$1:function(S){var R="";R=S.FName$1;return R},GetSize$5:function(S){var R=0;R=S.FSize$3;return R},GetWeight:function(S){var R="";R=S.FWeight;return R},ReadFontInfo:function(S){},SetColor$3:function(S,aNewColor){S.FColor$3=aNewColor;TW3CanvasFont.WriteFontInfo(S)},SetName$1:function(S,aNewName){S.FName$1=aNewName;TW3CanvasFont.WriteFontInfo(S)},SetSize$4:function(S,aNewSize){S.FSize$3=aNewSize;TW3CanvasFont.WriteFontInfo(S)},SetWeight:function(S,aNewWeight){S.FWeight=aNewWeight;TW3CanvasFont.WriteFontInfo(S)},WriteFontInfo:function(S){var LItems=[],a$323=0;var LItem$7="";LItems=TString.Explode(TString,TW3Canvas.GetFontStyle(S.FParent$1)," ");var $ta;for(a$323=0,$ta=LItems.length;a$323<$ta;a$323++){LItem$7=LItems[a$323];if((["bold","normal","bolder","lighter"].indexOf((LItem$7).toLocaleLowerCase())>=0)){S.FWeight=(LItem$7).toLocaleLowerCase()}else if((["italic","oblique"].indexOf((LItem$7).toLocaleLowerCase())>=0)){}else if(((LItem$7).toLocaleLowerCase().charAt(0)=="#")||((LItem$7).toLocaleLowerCase().substr(0,3)=="rgb")){S.FColor$3=StrToColor(LItem$7)}else if(StrEndsWith((LItem$7).toLocaleLowerCase(),"px")){S.FSize$3=TInteger.FromPxStr(LItem$7)}else{if(TW3FontDetector.Detect(W3FontDetector(),LItem$7)){S.FName$1=LItem$7}}}},Destroy:TObject.Destroy,GetColor$:function($){return $.ClassType.GetColor($)},GetHandle$5$:function($){return $.ClassType.GetHandle$5($)},GetName$1$:function($){return $.ClassType.GetName$1($)},GetSize$5$:function($){return $.ClassType.GetSize$5($)},GetWeight$:function($){return $.ClassType.GetWeight($)},SetColor$3$:function($){return $.ClassType.SetColor$3.apply($.ClassType,arguments)},SetName$1$:function($){return $.ClassType.SetName$1.apply($.ClassType,arguments)},SetSize$4$:function($){return $.ClassType.SetSize$4.apply($.ClassType,arguments)},SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType,arguments)}};var TW3Canvas={$ClassName:"TW3Canvas",$Parent:TObject,$Init:function($){TObject.$Init($);$.FContext$1=$.FDC=null},Create$124:function(S,Context$2){TObject.Create(S);S.FContext$1=Context$2;if(!S.FContext$1){throw Exception.Create($New(Exception),"Invalid canvas context error")}else S.FDC=TW3CustomGraphicContext.GetDC$1$(S.FContext$1);return S},DrawImageF:function(S,imageHandle,x$71,y$38){S.FDC.drawImage(imageHandle,x$71,y$38)},GetFontStyle:function(S){var R="";R=S.FDC.font;return R},PutImageData:function(S,imageData,x$72,y$39){if(imageData){S.FDC.putImageData(imageData.FHandle$9,x$72,y$39)}else{throw Exception.Create($New(Exception),"ImageData was nil error")}},SetFontStyle:function(S,NewFontStyle){S.FDC.font=NewFontStyle},ToDataURL:function(S,aMimeType){var R="";R=S.FDC.canvas.toDataURL(aMimeType);return R},ToImageData:function(S){var R=null;var mTemp$7=null;var wd=0;var hd=0;wd=S.FDC.canvas.width;hd=S.FDC.canvas.height;try{mTemp$7=S.FDC.getImageData(0,0,wd,hd)}catch($e){var e$23=$W($e);throw Exception.Create($New(Exception),"Failed to extract data, browser threw exception: "+e$23.FMessage)}
if(mTemp$7){R=TObject.Create($New(TW3ImageData));TW3ImageData.FromImageData$1(R,mTemp$7)}
return R},Destroy:TObject.Destroy};var EW3FontError={$ClassName:"EW3FontError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3DOMFont={$ClassName:"TW3DOMFont",$Parent:TW3CustomFont,$Init:function($){TW3CustomFont.$Init($);$.FHandle$7=undefined},Create$103:function(S,ControlHandle){TObject.Create(S);S.FHandle$7=ControlHandle;return S},GetColor:function(S){var R=0;var LHandle$5=undefined;LHandle$5=TW3CustomFont.GetHandle$5$(S);if(LHandle$5){R=StrToColor(w3_GetStyleAsStr(LHandle$5,"color"))}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetColor",TObject.ClassName(S.ClassType),$R[24]])}
return R},GetHandle$5:function(S){var R=undefined;R=S.FHandle$7;return R},GetName$1:function(S){var R="";var mHandle=undefined;mHandle=TW3CustomFont.GetHandle$5$(S);if(mHandle){R=w3_GetStyleAsStr(mHandle,"font-family")}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetName",TObject.ClassName(S.ClassType),$R[24]])}
return R},GetSize$5:function(S){var R=0;var mRef$5=undefined;mRef$5=TW3CustomFont.GetHandle$5$(S);if(mRef$5){R=w3_GetStyleAsInt(mRef$5,"font-size")}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetSize",TObject.ClassName(S.ClassType),$R[24]])}
return R},GetWeight:function(S){var R="";var LHandle$6=undefined;LHandle$6=TW3CustomFont.GetHandle$5$(S);if(LHandle$6){R=w3_GetStyleAsStr(LHandle$6,"font-weight")}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.GetWeight",TObject.ClassName(S.ClassType),$R[24]])}
return R},SetColor$3:function(S,aNewColor$1){var LHandle$7=undefined;LHandle$7=TW3CustomFont.GetHandle$5$(S);if(LHandle$7){LHandle$7.style["color"]=ColorToWebStr(aNewColor$1,255);if(S.OnChanged)S.OnChanged(S)}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetColor",TObject.ClassName(S.ClassType),$R[24]])}},SetName$1:function(S,aNewName$1){var LHandle$8=undefined;LHandle$8=TW3CustomFont.GetHandle$5$(S);if(LHandle$8){LHandle$8.style["font-family"]=aNewName$1;if(S.OnChanged)S.OnChanged(S)}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetName",TObject.ClassName(S.ClassType),$R[24]])}},SetSize$4:function(S,aNewSize$1){var LHandle$9=undefined;LHandle$9=TW3CustomFont.GetHandle$5$(S);if(LHandle$9){LHandle$9.style["font-size"]=TInteger.ToPxStr(aNewSize$1);if(S.OnChanged)S.OnChanged(S)}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetSize",TObject.ClassName(S.ClassType),$R[24]])}},SetWeight:function(S,aNewWeight$1){var LHandle$10=undefined;LHandle$10=TW3CustomFont.GetHandle$5$(S);if(LHandle$10){LHandle$10.style["font-weight"]=aNewWeight$1;if(S.OnChanged)S.OnChanged(S)}else{throw EW3Exception.CreateFmt($New(EW3FontError),$R[0],["TW3DOMFont.SetWeight",TObject.ClassName(S.ClassType),$R[24]])}},Destroy:TObject.Destroy,GetColor$:function($){return $.ClassType.GetColor($)},GetHandle$5$:function($){return $.ClassType.GetHandle$5($)},GetName$1$:function($){return $.ClassType.GetName$1($)},GetSize$5$:function($){return $.ClassType.GetSize$5($)},GetWeight$:function($){return $.ClassType.GetWeight($)},SetColor$3$:function($){return $.ClassType.SetColor$3.apply($.ClassType,arguments)},SetName$1$:function($){return $.ClassType.SetName$1.apply($.ClassType,arguments)},SetSize$4$:function($){return $.ClassType.SetSize$4.apply($.ClassType,arguments)},SetWeight$:function($){return $.ClassType.SetWeight.apply($.ClassType,arguments)}};function W3FontDetector(){var R=null;if(_FontDetect===null)_FontDetect=TW3FontDetector.Create$126($New(TW3FontDetector));R=_FontDetect;return R};function Copy$TW3TextMetric(s,d){d.tmWidth=s.tmWidth;d.tmHeight=s.tmHeight;return d}
function Clone$TW3TextMetric($){return{tmWidth:$.tmWidth,tmHeight:$.tmHeight}}
function Copy$TW3FontInfo(s,d){d.fiName=s.fiName;d.fiSize=s.fiSize;return d}
function Clone$TW3FontInfo($){return{fiName:$.fiName,fiSize:$.fiSize}}
var TW3FontDetector={$ClassName:"TW3FontDetector",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBaseFonts=[];$.FdefaultHeight=$.FdefaultWidth=undefined;$.Fh=undefined;$.Fs=undefined;$.FtestSize="72px";$.FtestString="mmmmmmmmmmlli"},Create$126:function(S){var x$73=0;TObject.Create(S);S.FBaseFonts.push("monospace");S.FBaseFonts.push("sans-serif");S.FBaseFonts.push("serif");S.Fh=document.body;S.Fs=document.createElement("span");S.Fs.style.fontSize=S.FtestSize;S.Fs.innerHTML=S.FtestString;S.FdefaultWidth=TVariant.CreateObject();S.FdefaultHeight=TVariant.CreateObject();if(S.FBaseFonts.length>0){var $tb;for(x$73=0,$tb=S.FBaseFonts.length;x$73<$tb;x$73++){S.Fs.style.fontFamily=S.FBaseFonts[x$73];S.Fh.appendChild(S.Fs);S.FdefaultWidth[S.FBaseFonts[x$73]]=S.Fs.offsetWidth;S.FdefaultHeight[S.FBaseFonts[x$73]]=S.Fs.offsetHeight;S.Fh.removeChild(S.Fs)}}
return S},Detect:function(S,FontName){var R=false;var x$74=0;var LFontName="";LFontName=Trim$_String_(FontName);if(LFontName.length>0){if(S.FBaseFonts.length>0){var $tc;for(x$74=0,$tc=S.FBaseFonts.length;x$74<$tc;x$74++){S.Fs.style.fontFamily=(LFontName+","+S.FBaseFonts[x$74]);S.Fh.appendChild(S.Fs);R=S.Fs.offsetWidth!=S.FdefaultWidth[S.FBaseFonts[x$74]]&&S.Fs.offsetHeight!=S.FdefaultHeight[S.FBaseFonts[x$74]];S.Fh.removeChild(S.Fs);if(R)break}}}
return R},GetFontInfo$2:function(S,Handle$21){var R={fiName:"",fiSize:0};var LName$1="";var LSize$3=0;var LData$2=[],x$75=0;R.fiSize=-1;if(TControlHandleHelper$Valid$2(Handle$21)){LName$1=w3_GetStyleAsStr(Handle$21,"font-family");LSize$3=w3_GetStyleAsInt(Handle$21,"font-size");if(LName$1.length>0){LData$2=TString.Explode(TString,LName$1,",");if(LData$2.length>0){var $td;for(x$75=0,$td=LData$2.length;x$75<$td;x$75++){if(TW3FontDetector.Detect(S,LData$2[x$75])){R.fiName=LData$2[x$75];R.fiSize=LSize$3;break}}}}}
return R},MeasureText$5:function(S,FontInfo,FixedWidth,Text$11){var R={tmWidth:0,tmHeight:0};R=TW3FontDetector.MeasureText$4(S,FontInfo.fiName,FontInfo.fiSize,FixedWidth,Text$11);return R},MeasureText$4:function(S,FontName$1,FontSize,FixedWidth$1,Text$12){var R={tmWidth:0,tmHeight:0};var LElement$1=undefined;var LText$3="";if(TW3FontDetector.Detect(S,FontName$1)){LText$3=Trim$_String_(Text$12);if(LText$3.length>0){LElement$1=document.createElement("p");if(LElement$1){try{LElement$1.style["font-family"]=FontName$1;LElement$1.style["font-size"]=TInteger.ToPxStr(FontSize);LElement$1.style["overflow"]="scroll";LElement$1.style.maxWidth=TInteger.ToPxStr(FixedWidth$1);LElement$1.style.width=TInteger.ToPxStr(FixedWidth$1);LElement$1.innerHTML=Text$12;S.Fh.appendChild(LElement$1);R.tmWidth=parseInt(LElement$1.scrollWidth,10);R.tmHeight=parseInt(LElement$1.scrollHeight,10)}finally{S.Fh.removeChild(LElement$1)}}}}
return R},MeasureText$3:function(S,aFontName,aFontSize,aContent){var R={tmWidth:0,tmHeight:0};var mElement=undefined;if(TW3FontDetector.Detect(S,aFontName)){aContent=Trim$_String_(aContent);if(aContent.length>0){mElement=document.createElement("p");if(mElement){mElement.style["font-family"]=aFontName;mElement.style["font-size"]=TInteger.ToPxStr(aFontSize);mElement.style["overflow"]="scroll";mElement.style["display"]="inline-block";mElement.style["white-space"]="nowrap";mElement.innerHTML=StrReplace(aContent," ","_");S.Fh.appendChild(mElement);R.tmWidth=parseInt(mElement.scrollWidth,10);R.tmHeight=parseInt(mElement.scrollHeight,10);S.Fh.removeChild(mElement)}}}
return R},MeasureText$2:function(S,aFontInfo,aContent$1){var R={tmWidth:0,tmHeight:0};R=TW3FontDetector.MeasureText$3(S,aFontInfo.fiName,aFontInfo.fiSize,aContent$1);return R},Destroy:TObject.Destroy};var TW3TextShadow={$ClassName:"TW3TextShadow",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.OnChanged=null;$.FBRadius=$.FHShadow=$.FVShadow=0;$.FColor$2=536870911},ApplyStyle:function(S){var LText$4="";if(TW3TextShadow.GetOwner$1(S)!==null){LText$4=TInteger.ToPxStr(S.FHShadow)+" "+TInteger.ToPxStr(S.FVShadow)+" "+TInteger.ToPxStr(S.FBRadius)+" ";if(S.FColor$2!=536870911){LText$4+=ColorToWebStr(S.FColor$2,255)}else LText$4+="none";TW3TextShadow.GetOwner$1(S).FHandle$1.style["text-shadow"]=LText$4;if(S.OnChanged)S.OnChanged(S)}},GetOwner$1:function(S){var R=null;R=$As(TW3OwnedObject.GetOwner(S),TW3MovableControl);return R},Shadow:function(S,H$1,V$1,Blur,Color$7){S.FHShadow=H$1;S.FVShadow=V$1;S.FBRadius=TInteger.EnsureRange(Blur,0,2147483647);S.FColor$2=Color$7;TW3TextShadow.ApplyStyle(S)},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10};TW3TextShadow.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
function Copy$TW3StackingOrderList(s,d){d.olTags=s.olTags;d.olZIndex=s.olZIndex;return d}
function Clone$TW3StackingOrderList($){return{olTags:$.olTags,olZIndex:$.olZIndex}}
function TW3StackingOrderList$Sort$1(Self$28){var mCount$2=0;var x$76=0;var mAltered$1=false;mCount$2=Self$28.olTags.length;if(mCount$2>1){do{mAltered$1=false;var $te;for(x$76=1,$te=mCount$2;x$76<$te;x$76++){if(Self$28.olZIndex[x$76]>Self$28.olZIndex[x$76-1]){$ArraySwap(Self$28.olZIndex,(x$76-1),x$76);$ArraySwap(Self$28.olTags,(x$76-1),x$76);mAltered$1=true}}}while(!(!mAltered$1))}}
var TW3ScrollInfo={$ClassName:"TW3ScrollInfo",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FHandle$6=undefined},Create$102:function(S,AOwner$9){TW3OwnedObject.Create$10(S,AOwner$9);S.FHandle$6=AOwner$9.FHandle$1;return S},GetScrollHeight:function(S){var R=0;if(TControlHandleHelper$Valid$2(S.FHandle$6)){R=parseInt(S.FHandle$6.scrollHeight,10)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ScrollInfo.GetScrollHeight",S,"invalid owner handle error")}
return R},GetScrollLeft:function(S){var R=0;if(TControlHandleHelper$Valid$2(S.FHandle$6)){R=parseInt(S.FHandle$6.scrollLeft,10)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ScrollInfo.GetScrollLeft",S,"invalid owner handle error")}
return R},GetScrollTop:function(S){var R=0;if(TControlHandleHelper$Valid$2(S.FHandle$6)){R=parseInt(S.FHandle$6.scrollTop,10)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ScrollInfo.GetScrollTop",S,"invalid owner handle error")}
return R},GetScrollWidth:function(S){var R=0;if(TControlHandleHelper$Valid$2(S.FHandle$6)){R=parseInt(S.FHandle$6.scrollWidth,10)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ScrollInfo.GetScrollWidth",S,"invalid owner handle error")}
return R},ScrollTo:function(S,NewLeft$3,NewTop$3){if(TControlHandleHelper$Valid$2(S.FHandle$6)){S.FHandle$6.scrollLeft=NewLeft$3;S.FHandle$6.scrollTop=NewTop$3}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ScrollInfo.ScrollTo",S,"invalid owner handle error")}},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10};TW3ScrollInfo.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3GraphicControl={$ClassName:"TW3GraphicControl",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCanvas=$.FContext=$.FOnPaint=null;$.FDirty$1=false},FinalizeObject:function(S){TObject.Free(S.FCanvas);TObject.Free(S.FContext);TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FContext=TW3ControlGraphicContext.Create$121($New(TW3ControlGraphicContext),S.FHandle$1);S.FCanvas=TW3Canvas.Create$124($New(TW3Canvas),S.FContext)},Invalidate:function(S){if(!S.FDirty$1){S.FDirty$1=true;TW3Dispatch.RequestAnimationFrame(TW3Dispatch,$Event0(S,TW3GraphicControl.Refresh))}},MakeElementTagObj:function(S){var R=undefined;R=document.createElement("canvas");return R},Paint:function(S){if(S.FOnPaint)S.FOnPaint(S,S.FCanvas)},Refresh:function(S){S.FDirty$1=false;if(!$SetIn(S.FComponentState,5,0,6)){if(!TW3TagObj.GetUpdating(S)){if($SetIn(S.FComponentState,2,0,6)){TW3GraphicControl.Paint(S)}}}},Resize:function(S){TW3MovableControl.Resize(S);w3_setAttrib(S.FHandle$1,"width",w3_GetStyle(S.FHandle$1,"width"));w3_setAttrib(S.FHandle$1,"height",w3_GetStyle(S.FHandle$1,"height"))},SetHeight:function(S,NewHeight$3){TW3MovableControl.SetHeight(S,NewHeight$3);if(S.FHandle$1){w3_setAttrib(S.FHandle$1,"height",TInteger.ToPxStr(NewHeight$3))}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3GraphicControl.SetHeight",S,"invalid control handle error")}},SetWidth:function(S,NewWidth$3){TW3MovableControl.SetWidth(S,NewWidth$3);if(S.FHandle$1){w3_setAttrib(S.FHandle$1,"width",TInteger.ToPxStr(NewWidth$3))}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3GraphicControl.SetWidth",S,"invalid control handle error")}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType,arguments)},SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType,arguments)},SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate$:function($){return $.ClassType.Invalidate($)},MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3GraphicControl.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ControlTracker={$ClassName:"TW3ControlTracker",$Parent:TObject,$Init:function($){TObject.$Init($)},GetFocusedControl:function(S){var R=null;R=FFocused;return R},RegisterControl:function(S,Instance$7){var LId="",LText$5="";if(Instance$7!==null){if(FLUT===null)FLUT=TW3CustomDictionary.Create$107($New(TW3ObjDictionary));LId=Trim$_String_(Instance$7.FTagId);if(LId.length>0){LText$5="*** "+LId+"<"+TObject.ClassName(Instance$7.ClassType)+"> registered";WriteLn(LText$5);TW3ObjDictionary.a$85(FLUT,LId,Instance$7)}}},SetFocusedControl:function(S,NewItem){var LText$6="";FFocused=NewItem;if(FFocused!==null){LText$6="*** "+NewItem.FTagId+"<"+TObject.ClassName(NewItem.ClassType);if(NewItem.Name.length>0)LText$6+="("+NewItem.Name+")";LText$6+=">"+" now has focus";WriteLn(LText$6)}else WriteLn("*** NO ELEMENT HAS FOCUS")},UnRegisterControl:function(S,Instance$8){var LId$1="";if(Instance$8!==null){if(FLUT===null)FLUT=TW3CustomDictionary.Create$107($New(TW3ObjDictionary));LId$1=Trim$_String_(Instance$8.FTagId);if(LId$1.length>0){if(TW3CustomDictionary.KeyExists(FLUT,LId$1)){WriteLn(("ID: "+LId$1+" un-registered!"));if(FFocused===Instance$8)FFocused=null;TW3CustomDictionary.Delete$1(FLUT,LId$1)}}}},Destroy:TObject.Destroy};function Copy$TW3ControlSizeInfo(s,d){return d}
function Clone$TW3ControlSizeInfo($){return{}}
var TW3ControlFont={$ClassName:"TW3ControlFont",$Parent:TW3DOMFont,$Init:function($){TW3DOMFont.$Init($);$.FOwner$2=null},GetHandle$5:function(S){var R=undefined;R=S.FOwner$2.FHandle$1;return R},Create$104:function(S,AOwner$10){TW3DOMFont.Create$103(S,AOwner$10.FHandle$1);if(AOwner$10){S.FOwner$2=AOwner$10}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3ControlFont.Create",S,"Owner was nil error")}
return S},Destroy:TObject.Destroy,GetColor:TW3DOMFont.GetColor,GetHandle$5$:function($){return $.ClassType.GetHandle$5($)},GetName$1:TW3DOMFont.GetName$1,GetSize$5:TW3DOMFont.GetSize$5,GetWeight:TW3DOMFont.GetWeight,SetColor$3:TW3DOMFont.SetColor$3,SetName$1:TW3DOMFont.SetName$1,SetSize$4:TW3DOMFont.SetSize$4,SetWeight:TW3DOMFont.SetWeight};var TW3ControlBackgroundSizeMode=["smAuto","smLength","smPercent","smCover","smContain"];var TW3ControlBackgroundSize={$ClassName:"TW3ControlBackgroundSize",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FHeight=$.FWidth=0;$.FMode=3},AcceptOwner:function(S,CandidateObject$1){var R=false;R=(CandidateObject$1!==null)&&$Is(CandidateObject$1,TW3ControlBackground);return R},Apply:function(S){var LHandle$11=undefined;LHandle$11=TW3ControlBackgroundSize.GetOwnerHandle(S);if(TControlHandleHelper$Valid$2(LHandle$11)){switch(S.FMode){case 0:LHandle$11.style["background-size"]="auto auto";break;case 3:LHandle$11.style["background-size"]="cover";break;case 4:LHandle$11.style["background-size"]="contain";break;case 1:LHandle$11.style["background-size"]=(S.FWidth.toString()+"px "+S.FHeight.toString()+"px");break;case 2:S.FWidth=TInteger.EnsureRange(S.FWidth,0,100);S.FHeight=TInteger.EnsureRange(S.FHeight,0,100);LHandle$11.style["background-size"]=S.FWidth.toString()+"% "+S.FHeight.toString()+"%";break}}else{throw EW3Exception.Create$16($New(EW3ControlBackgroundSize),"TW3ControlBackgroundSize.Apply",S,"Invalid control handle error")}},GetOwner$2:function(S){var R=null;R=$As(TW3OwnedObject.GetOwner(S),TW3ControlBackground);return R},GetOwnerHandle:function(S){var R=undefined;var LBack=null;var LCtrl$1=null;LBack=TW3ControlBackgroundSize.GetOwner$2(S);if(LBack!==null){if(TW3ControlBackground.GetOwner$3(LBack)!==null){LCtrl$1=TW3ControlBackground.GetOwner$3(LBack);if(LCtrl$1!==null){R=LCtrl$1.FHandle$1}else R=null}else R=null}else R=null;return R},SetHeight$2:function(S,NewHeight$4){if(NewHeight$4!=S.FHeight){switch(S.FMode){case 2:S.FHeight=TInteger.EnsureRange(NewHeight$4,0,100);break;default:S.FHeight=TInteger.EnsureRange(NewHeight$4,0,2147483647)}
TW3ControlBackgroundSize.Apply(S)}},SetMode:function(S,NewMode$1){if(NewMode$1!=S.FMode){S.FMode=NewMode$1;TW3ControlBackgroundSize.Apply(S)}},SetWidth$2:function(S,NewWidth$4){if(NewWidth$4!=S.FWidth){switch(S.FMode){case 2:S.FWidth=TInteger.EnsureRange(NewWidth$4,0,100);break;default:S.FWidth=TInteger.EnsureRange(NewWidth$4,0,2147483647)}
TW3ControlBackgroundSize.Apply(S)}},Destroy:TObject.Destroy,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10:TW3OwnedObject.Create$10};TW3ControlBackgroundSize.$Intf={IW3OwnedObjectAccess:[TW3ControlBackgroundSize.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ControlBackground={$ClassName:"TW3ControlBackground",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FSize$2=null},AcceptOwner:function(S,CandidateObject$2){var R=false;R=CandidateObject$2!==null&&$Is(CandidateObject$2,TW3MovableControl);return R},Create$10:function(S,AOwner$11){TW3OwnedObject.Create$10(S,AOwner$11);S.FSize$2=TW3OwnedObject.Create$10$($New(TW3ControlBackgroundSize),S);return S},Destroy:function(S){TObject.Free(S.FSize$2);TObject.Destroy(S)},FromColor$1:function(S,aValue$38){var LHandle$12=undefined;LHandle$12=TW3ControlBackground.GetOwnerHandle$1(S);if(TControlHandleHelper$Valid$2(LHandle$12)){if(aValue$38!=536870911){LHandle$12.style.backgroundColor=ColorToWebStr(aValue$38,255)}else{LHandle$12.style.backgroundColor="transparent"}}},FromURL:function(S,aURL){var LHandle$13=undefined;LHandle$13=TW3ControlBackground.GetOwnerHandle$1(S);if(TControlHandleHelper$Valid$2(LHandle$13)){LHandle$13.style.backgroundImage=w3_NameToUrlStr(aURL)}},GetOwner$3:function(S){var R=null;R=$As(TW3OwnedObject.GetOwner(S),TW3MovableControl);return R},GetOwnerHandle$1:function(S){var R=undefined;R=null;if(TW3ControlBackground.GetOwner$3(S))R=TW3ControlBackground.GetOwner$3(S).FHandle$1;return R},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3ControlBackground.$Intf={IW3OwnedObjectAccess:[TW3ControlBackground.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ContentSelectionMode=["tsmNone","tsmAuto","tsmText","tsmAll","tsmElement"];var TW3Constraints={$ClassName:"TW3Constraints",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.OnEnabledChanged=null;$.FEnabled=false;$.FHandle$8=undefined},AcceptOwner:function(S,CandidateObject$3){var R=false;R=(CandidateObject$3!==null)&&$Is(CandidateObject$3,TW3TagObj);return R},ApplyToOwner:function(S){var LOwner=null;if(TControlHandleHelper$Valid$2(S.FHandle$8)){LOwner=$As(TW3OwnedObject.GetOwner(S),TW3MovableControl);TW3MovableControl.SetSize$3(LOwner,TInteger.EnsureRange(TW3MovableControl.GetWidth$(LOwner),TW3Constraints.GetMinWidth(S),TW3Constraints.GetMaxWidth(S)),TInteger.EnsureRange(TW3MovableControl.GetHeight$(LOwner),TW3Constraints.GetMinHeight(S),TW3Constraints.GetMaxHeight(S)))}},Create$106:function(S,AOwner$12){TW3OwnedObject.Create$10(S,AOwner$12);S.FHandle$8=AOwner$12.FHandle$1;S.FEnabled=false;return S},GetMaxHeight:function(S){var R=0;if(S.FEnabled){if(S.FHandle$8.style["max-height"]){R=w3_GetStyleAsInt(S.FHandle$8,"max-height")}else R=2147483647}else R=2147483647;return R},GetMaxWidth:function(S){var R=0;if(S.FEnabled){if(S.FHandle$8.style["max-width"]){R=w3_GetStyleAsInt(S.FHandle$8,"max-width")}else R=2147483647}else R=2147483647;return R},GetMinHeight:function(S){var R=0;if(S.FEnabled){if(S.FHandle$8.style["min-height"]){R=w3_GetStyleAsInt(S.FHandle$8,"min-height")}else R=-2147483647}else R=-2147483647;return R},GetMinWidth:function(S){var R=0;if(S.FEnabled){if(S.FHandle$8.style["min-width"]){R=w3_GetStyleAsInt(S.FHandle$8,"min-width")}else R=-2147483647}else R=-2147483647;return R},SetEnabled$2:function(S,NewValue){if(NewValue!=S.FEnabled){S.FEnabled=NewValue;if(S.OnEnabledChanged)S.OnEnabledChanged(S);if(S.FEnabled)TW3Constraints.ApplyToOwner(S)}},SetMaxHeight:function(S,NewMaxHeight){S.FHandle$8.style["max-height"]=TInteger.ToPxStr(NewMaxHeight)},SetMaxWidth:function(S,NewMaxWidth){S.FHandle$8.style["max-width"]=TInteger.ToPxStr(NewMaxWidth)},SetMinHeight:function(S,aValue$39){S.FHandle$8.style["min-height"]=TInteger.ToPxStr(aValue$39)},SetMinWidth:function(S,aValue$40){S.FHandle$8.style["min-width"]=TInteger.ToPxStr(aValue$40)},Destroy:TObject.Destroy,AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10:TW3OwnedObject.Create$10};TW3Constraints.$Intf={IW3OwnedObjectAccess:[TW3Constraints.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BackgroundRepeat=["brInitial","brInherited","brRepeat","brRepeatX","brRepeatY","brNoRepeat"];var TShiftStateEnum=["ssShift","ssAlt","ssCtrl","ssMeta","ssLeft","ssRight","ssMiddle"];var TShiftState={$ClassName:"TShiftState",$Parent:TObject,$Init:function($){TObject.$Init($);$.FEvent$1=$.FMouseEvent=null;$.FMouseButtons=0},CheckShiftStateEnum:function(S,value$24){var R=false;if(S.FEvent$1===null){R=false}else{switch(value$24){case 0:R=S.FEvent$1.shiftKey;break;case 1:R=S.FEvent$1.altKey;break;case 2:R=S.FEvent$1.ctrlKey;break;case 3:R=S.FEvent$1.metaKey;break;case 4:R=(S.FMouseButtons&1)!=0;break;case 5:R=(S.FMouseButtons&4)!=0;break;case 6:R=(S.FMouseButtons&2)!=0;break}}
return R},Current$1:function(){var R=null;if(vCurrent===null)vCurrent=TObject.Create($New(TShiftState));R=vCurrent;return R},SetKeyStateEvent:function(S,evt$8){S.FEvent$1=evt$8;S.FMouseEvent=null},SetMouseEvent:function(S,evt$9){S.FEvent$1=evt$9;S.FMouseEvent=evt$9},Destroy:TObject.Destroy};var TMouseButton=["mbLeft","mbMiddle","mbRight"];var TCustomAppContainer={$ClassName:"TCustomAppContainer",$Parent:TW3TagContainer,$Init:function($){TW3TagContainer.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3TagContainer.FinalizeObject,InitializeObject:TW3TagObj.InitializeObject,AfterUpdate:TW3TagObj.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3TagObj.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3TagContainer.Showing,StyleTagObject:TW3TagObj.StyleTagObject,UnHookEvents:TW3TagObj.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch};TCustomAppContainer.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TDocumentBody={$ClassName:"TDocumentBody",$Parent:TCustomAppContainer,$Init:function($){TCustomAppContainer.$Init($)},GetHeight$1:function(S){var R=0;R=w3_GetStyleAsInt(document.body,"height");if(R<1)R=parseInt(window.innerHeight,10);return R},GetWidth$1:function(S){var R=0;R=w3_GetStyleAsInt(document.body,"width");if(R<1)R=parseInt(window.innerWidth,10);return R},MakeElementTagId:function(S){var R="";R="";return R},MakeElementTagObj:function(S){var R=undefined;R=document.body;return R},StyleTagObject:function(S){},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3TagContainer.FinalizeObject,InitializeObject:TW3TagObj.InitializeObject,AfterUpdate:TW3TagObj.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3TagObj.HookEvents,MakeElementTagId$:function($){return $.ClassType.MakeElementTagId($)},MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3TagContainer.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3TagObj.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch};TDocumentBody.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var EW3TagObj={$ClassName:"EW3TagObj",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3CustomControl={$ClassName:"EW3CustomControl",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3ControlBackgroundSize={$ClassName:"EW3ControlBackgroundSize",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3Component={$ClassName:"EW3Component",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3CustomDictionary={$ClassName:"TW3CustomDictionary",$Parent:TObject,$Init:function($){TObject.$Init($);$.FLUT$1=undefined},Clear$7:function(S){S.FLUT$1=TVariant.CreateObject()},Create$107:function(S){TObject.Create(S);S.FLUT$1=TVariant.CreateObject();return S},Delete$1:function(S,ItemKey){if(ItemKey.length>0){try{delete(S.FLUT$1[ItemKey])}catch($e){var e$24=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.Delete",TObject.ClassName(S.ClassType),e$24.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.Delete",TObject.ClassName(S.ClassType),"Invalid dictionary key"])}},Destroy:function(S){TW3CustomDictionary.Clear$7(S);S.FLUT$1=undefined;TObject.Destroy(S)},GetItem$13:function(S,ItemKey$1){var R=undefined;if(ItemKey$1.length>0){try{R=S.FLUT$1[ItemKey$1]}catch($e){var e$25=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.GetItem",TObject.ClassName(S.ClassType),e$25.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.GetItem",TObject.ClassName(S.ClassType),"Invalid dictionary key"])}
return R},KeyExists:function(S,ItemKey$2){var R=false;if(ItemKey$2.length>0){R=(S.FLUT$1).hasOwnProperty(ItemKey$2)}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.KeyExists",TObject.ClassName(S.ClassType),"Invalid dictionary key"])}
return R},SetItem$3:function(S,ItemKey$3,KeyValue){if(ItemKey$3.length>0){try{S.FLUT$1[ItemKey$3]=KeyValue}catch($e){var e$26=$W($e);throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.SetItem",TObject.ClassName(S.ClassType),e$26.FMessage])}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3CustomDictionary.SetItem",TObject.ClassName(S.ClassType),"Invalid dictionary key"])}},Destroy$:function($){return $.ClassType.Destroy($)}};var TW3ObjDictionary={$ClassName:"TW3ObjDictionary",$Parent:TW3CustomDictionary,$Init:function($){TW3CustomDictionary.$Init($)},a$86:function(S,ItemKey$4){return TVariant.AsObject(TW3CustomDictionary.GetItem$13(S,ItemKey$4))},a$85:function(S,ItemKey$5,Value$27){TW3CustomDictionary.SetItem$3(S,ItemKey$5,Value$27)},Destroy:TW3CustomDictionary.Destroy};var TW3TagStyle={$ClassName:"TW3TagStyle",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FCache$1=[];$.FHandle$12=undefined},AcceptOwner:function(S,CandidateObject$4){var R=false;R=(CandidateObject$4!==null)&&$Is(CandidateObject$4,TW3CustomControl);return R},Add$2:function(S,CssClassName){var R=0;var LIndex$3=0;if(TControlHandleHelper$Valid$2(S.FHandle$12)){CssClassName=Trim$_String_(CssClassName);if(CssClassName.length>0){LIndex$3=TW3TagStyle.IndexOf$2(S,CssClassName);if(LIndex$3<0){TW3TagStyle.AddClassToControl(S.ClassType,S.FHandle$12,CssClassName);S.FCache$1.push(CssClassName);R=S.FCache$1.length-1}else R=LIndex$3}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.Add",TObject.ClassName(S.ClassType),"invalid style-name error"])}}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.Add",TObject.ClassName(S.ClassType),"invalid owner handle error"])}
return R},AddClassToControl:function(S,Handle$22,CssClassName$1){var LOK=false;LOK=((Handle$22).className.match(new RegExp("(\\s|^)"+CssClassName$1+"(\\s|$)")))?true:false;if(LOK===false)(Handle$22).className+=(" "+CssClassName$1)},ControlContainsClass:function(S,Handle$23,CssClassName$2){var R=false;R=((Handle$23).className.match(new RegExp("(\\s|^)"+CssClassName$2+"(\\s|$)")))?true:false;return R},Create$10:function(S,AOwner$13){TW3OwnedObject.Create$10(S,AOwner$13);S.FHandle$12=$As(AOwner$13,TW3CustomControl).FHandle$1;return S},Destroy:function(S){S.FCache$1.length=0;TObject.Destroy(S)},IndexOf$2:function(S,CssClassName$3){var R=0;var x$77=0;R=-1;if(TControlHandleHelper$Valid$2(S.FHandle$12)){CssClassName$3=Trim$_String_((CssClassName$3).toLocaleLowerCase());if(CssClassName$3.length>0){var $tf;for(x$77=0,$tf=S.FCache$1.length;x$77<$tf;x$77++){if((S.FCache$1[x$77]).toLocaleLowerCase()==CssClassName$3){R=x$77;break}}}}else{throw EW3Exception.CreateFmt($New(EW3TagStyle),$R[0],["TW3TagStyle.IndexOf",TObject.ClassName(S.ClassType),"invalid owner handle error"])}
return R},RemoveByName:function(S,CssClassName$4){var R="";var LIndex$4=0;if(TControlHandleHelper$Valid$2(S.FHandle$12)){CssClassName$4=Trim$_String_(CssClassName$4);if(CssClassName$4.length>0){TW3TagStyle.RemoveClassFromControl(S.ClassType,S.FHandle$12,CssClassName$4);LIndex$4=TW3TagStyle.IndexOf$2(S,CssClassName$4);if(LIndex$4>=0){S.FCache$1.splice(LIndex$4,1)}}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.RemoveByName",TObject.ClassName(S.ClassType),"style-class was empty error"])}
R=CssClassName$4}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3TagStyle.RemoveByName",TObject.ClassName(S.ClassType),"invalid owner handle error"])}
return R},RemoveClassFromControl:function(S,Handle$24,CssClassName$5){var reg;reg=new RegExp("(\\s|^)"+CssClassName$5+"(\\s|$)");(Handle$24).className=(Handle$24).className.replace(reg," ").replace('  ',' ').trim()},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3TagStyle.$Intf={IW3OwnedObjectAccess:[TW3TagStyle.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var EW3TagStyle={$ClassName:"EW3TagStyle",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3StyleSheet={$ClassName:"TW3StyleSheet",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$13=undefined},Add$4:function(S,RuleText){var LHandle$14=undefined;LHandle$14=TW3StyleSheet.GetSheetObject(S);if(!LHandle$14.insertRule){LHandle$14.addRule(RuleText)}else{LHandle$14.insertRule(RuleText,0)}},Create$128:function(S){TObject.Create(S);S.FHandle$13=TW3StyleSheet.CreateStyleElement(S.ClassType);return S},CreateStyleElement:function(S){var R=undefined;var LEntry$1=undefined;R=document.createElement("style");R.type="text\/css";R.id=TW3StyleSheet.CreateStylesheetId(S);LEntry$1=document.getElementsByTagName("head")[0];LEntry$1.appendChild(R);return R},CreateStylesheetId:function(S){var R="";++__SheetID;R="SmartSheet"+__SheetID.toString();WriteLn(R);return R},DefaultStylesheet:function(S){var R=null;if(__Default===null)__Default=TW3StyleSheet.Create$128($New(TW3StyleSheet));R=__Default;return R},Destroy:function(S){TW3StyleSheet.DisposeStyleElement(S.ClassType,S.FHandle$13);S.FHandle$13=null;TObject.Destroy(S)},DisposeStyleElement:function(S,Handle$25){if(Handle$25){Handle$25.parentNode.removeChild(Handle$25)}},GetSheetObject:function(S){var R=undefined;var LHandle$15=undefined;LHandle$15=S.FHandle$13;R=(LHandle$15).styleSheet||(LHandle$15).sheet;return R},Destroy$:function($){return $.ClassType.Destroy($)}};var TSuperStyle={$ClassName:"TSuperStyle",$Parent:TObject,$Init:function($){TObject.$Init($)},AnimGlow$1:function(S,GlowFrom,GlowTo){var R="";var mStyles=null;var mWriter=null;mStyles=TW3StyleSheet.DefaultStylesheet(TW3StyleSheet);if(mStyles!==null){R=TW3Identifiers.GenerateUniqueObjectId(TW3Identifiers);mWriter=TObject.Create($New(TCSS));try{TCSS.CRLF(TCSS.Leave(TCSS.Leave(TCSS.BoxShadow$1(TCSS.Enter(TCSS.To(TCSS.CRLF(TCSS.Leave(TCSS.BoxShadow$1(TCSS.Enter(TCSS.PercentOf(TCSS.CRLF(TCSS.Leave(TCSS.BoxShadow$1(TCSS.Enter(TCSS.From(TCSS.Enter(TCSS.inc(TCSS.KeyFrames(mWriter),R+" ")))),0,0,0,0,GlowFrom))),50)),0,0,12,4,GlowTo))))),0,0,0,0,GlowFrom))));TW3StyleSheet.Add$4(mStyles,mWriter.Text);mWriter.Text="";TCSS.Leave(TCSS.AnimationInfinite(TCSS.AnimationDuration(TCSS.AnimationName(TCSS.Enter(TCSS.inc(mWriter,"."+R+"_player ")),R),4,0)));TW3StyleSheet.Add$4(mStyles,mWriter.Text)}finally{TObject.Free(mWriter)}
R=R+"_player"}
return R},Destroy:TObject.Destroy};var TCSS={$ClassName:"TCSS",$Parent:TObject,$Init:function($){TObject.$Init($);$.Text=""},AnimationDuration:function(S,Secs,MSecs){var R=null;S.Text=S.Text+"-webkit-animation-duration: "+Secs.toString()+"."+MSecs.toString()+"s;"+"\r\n";R=S;return R},AnimationInfinite:function(S){var R=null;S.Text=S.Text+"-webkit-animation-iteration-count: infinite;"+"\r\n";R=S;return R},AnimationName:function(S,Name$24){var R=null;S.Text=S.Text+"-webkit-animation-name: "+Name$24+";"+"\r\n";R=S;return R},BoxShadow$1:function(S,Left$11,Top$11,Right$9,Bottom$9,Color$8){var R=null;S.Text=S.Text+"-webkit-box-shadow: "+TInteger.ToPxStr(Left$11)+" "+TInteger.ToPxStr(Top$11)+" "+TInteger.ToPxStr(Right$9)+" "+TInteger.ToPxStr(Bottom$9)+" "+ColorToWebStr(Color$8,255)+"; ";R=S;return R},CRLF:function(S){var R=null;S.Text=S.Text+"\r";R=S;return R},Enter:function(S){var R=null;S.Text=S.Text+"{"+"\r\n";R=S;return R},From:function(S){var R=null;S.Text=S.Text+"from ";R=S;return R},inc:function(S,Value$28){var R=null;S.Text=S.Text+Value$28;R=S;return R},KeyFrames:function(S){var R=null;S.Text=S.Text+"@-webkit-keyframes ";R=S;return R},Leave:function(S){var R=null;S.Text=S.Text+"}"+"\r\n";R=S;return R},PercentOf:function(S,Value$29){var R=null;S.Text=S.Text+TInteger.EnsureRange(Value$29,0,100).toString()+"% ";R=S;return R},To:function(S){var R=null;S.Text=S.Text+"to ";R=S;return R},Destroy:TObject.Destroy};var TW3TouchList={$ClassName:"TW3TouchList",$Parent:TObject,$Init:function($){TObject.$Init($);$.FObjects$1=null},a$92:function(S,Index$6){return S.FObjects$1[Index$6]},a$91:function(S){return S.FObjects$1.length},Clear$8:function(S){S.FObjects$1=null},Update:function(S,Reference$1){if(Reference$1){S.FObjects$1=Reference$1}else TW3TouchList.Clear$8(S)},Destroy:TObject.Destroy};var TW3TouchData={$ClassName:"TW3TouchData",$Parent:TObject,$Init:function($){TObject.$Init($);$.FChanged=$.FTouches=null},Clear$9:function(S){if(S.FTouches!==null)TW3TouchList.Clear$8(S.FTouches);if(S.FChanged!==null)TW3TouchList.Clear$8(S.FChanged)},GetChanged:function(S){var R=null;if(S.FChanged===null)S.FChanged=TObject.Create($New(TW3TouchList));R=S.FChanged;return R},GetTouches:function(S){var R=null;if(S.FTouches===null)S.FTouches=TObject.Create($New(TW3TouchList));R=S.FTouches;return R},Update$1:function(S,EventObject$2){var LProxy=null;if(EventObject$2!==null){LProxy=TW3TouchData.GetTouches(S);TW3TouchList.Update(LProxy,EventObject$2.touches);LProxy=TW3TouchData.GetChanged(S);TW3TouchList.Update(LProxy,EventObject$2.changedTouches)}else TW3TouchData.Clear$9(S)},Destroy:TObject.Destroy};var TW3GestureData={$ClassName:"TW3GestureData",$Parent:TObject,$Init:function($){TObject.$Init($);$.FRotation=$.FScale=0},Consume:function(S,refObj){S.FRotation=Number(refObj.rotation);S.FScale=Number(refObj.scale)},Update$3:function(S){TW3GestureData.Consume(S,event)},Destroy:TObject.Destroy};var TW3Borders={$ClassName:"TW3Borders",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FBottom=$.FLeft$1=$.FRight$1=$.FTop=null},AcceptOwner:function(S,CandidateObject$5){var R=false;R=$Is(CandidateObject$5,TW3TagObj);return R},Create$10:function(S,AOwner$14){TW3OwnedObject.Create$10(S,AOwner$14);S.FLeft$1=TW3Border.Create$132($New(TW3Border),S,0);S.FTop=TW3Border.Create$132($New(TW3Border),S,1);S.FRight$1=TW3Border.Create$132($New(TW3Border),S,2);S.FBottom=TW3Border.Create$132($New(TW3Border),S,3);return S},Destroy:function(S){TObject.Free(S.FLeft$1);TObject.Free(S.FTop);TObject.Free(S.FRight$1);TObject.Free(S.FBottom);TObject.Destroy(S)},GetHSpace:function(S){var R=0;R=TW3Border.GetWidth$6(S.FLeft$1)+TW3Border.GetPadding(S.FLeft$1)+TW3Border.GetWidth$6(S.FRight$1)+TW3Border.GetPadding(S.FRight$1);return R},GetVSpace:function(S){var R=0;R=TW3Border.GetWidth$6(S.FTop)+TW3Border.GetPadding(S.FTop)+TW3Border.GetWidth$6(S.FBottom)+TW3Border.GetPadding(S.FBottom);return R},SetColor$7:function(S,NewColor$1){TW3Border.SetColor$8(S.FLeft$1,NewColor$1);TW3Border.SetColor$8(S.FTop,NewColor$1);TW3Border.SetColor$8(S.FRight$1,NewColor$1);TW3Border.SetColor$8(S.FBottom,NewColor$1)},SetSize$11:function(S,NewSize$3){TW3Border.SetWidth$3(S.FLeft$1,NewSize$3);TW3Border.SetWidth$3(S.FTop,NewSize$3);TW3Border.SetWidth$3(S.FRight$1,NewSize$3);TW3Border.SetWidth$3(S.FBottom,NewSize$3)},SetStyle:function(S,AValue){TW3Border.SetStyle$1(S.FLeft$1,AValue);TW3Border.SetStyle$1(S.FTop,AValue);TW3Border.SetStyle$1(S.FRight$1,AValue);TW3Border.SetStyle$1(S.FBottom,AValue)},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3Borders.$Intf={IW3OwnedObjectAccess:[TW3Borders.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BorderRadius={$ClassName:"TW3BorderRadius",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FBottom$1=$.FTop$1=null},AcceptOwner:function(S,CandidateObject$6){var R=false;R=(CandidateObject$6!==null)&&$Is(CandidateObject$6,TW3TagObj);return R},Create$10:function(S,AOwner$15){TW3OwnedObject.Create$10(S,AOwner$15);S.FTop$1=TW3BorderEdgeRadius.Create$131($New(TW3BorderEdgeTopRadius),S);S.FBottom$1=TW3BorderEdgeRadius.Create$131($New(TW3BorderEdgeBottomRadius),S);return S},Destroy:function(S){TObject.Free(S.FTop$1);TObject.Free(S.FBottom$1);TObject.Destroy(S)},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner$:function($){return $.ClassType.AcceptOwner.apply($.ClassType,arguments)},Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3BorderRadius.$Intf={IW3OwnedObjectAccess:[TW3BorderRadius.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BorderEdgeRadius={$ClassName:"TW3BorderEdgeRadius",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($)},Create$131:function(S,AOwner$16){TW3OwnedObject.Create$10(S,AOwner$16);return S},GetOwner$4:function(S){var R=null;R=$As(TW3OwnedObject.GetOwner(S),TW3BorderRadius);return R},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10,GetLeft$1$:function($){return $.ClassType.GetLeft$1($)},GetRight$:function($){return $.ClassType.GetRight($)},SetLeft$1$:function($){return $.ClassType.SetLeft$1.apply($.ClassType,arguments)},SetRight$:function($){return $.ClassType.SetRight.apply($.ClassType,arguments)}};TW3BorderEdgeRadius.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BorderEdgeTopRadius={$ClassName:"TW3BorderEdgeTopRadius",$Parent:TW3BorderEdgeRadius,$Init:function($){TW3BorderEdgeRadius.$Init($);$.FLeft$2=$.FRight$2=0},GetLeft$1:function(S){var R=0;R=S.FLeft$2;return R},GetRight:function(S){var R=0;R=S.FRight$2;return R},SetLeft$1:function(S,NewRadius){var LHandle$16=undefined;if(NewRadius!=S.FLeft$2){S.FLeft$2=NewRadius;LHandle$16=$As(TW3OwnedObject.GetOwner(TW3BorderEdgeRadius.GetOwner$4(S)),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$16)){LHandle$16.style["border-top-left-radius"]=TInteger.ToPxStr(NewRadius)}}},SetRight:function(S,NewRadius$1){var LHandle$17=undefined;if(NewRadius$1!=S.FRight$2){S.FRight$2=NewRadius$1;LHandle$17=$As(TW3OwnedObject.GetOwner(TW3BorderEdgeRadius.GetOwner$4(S)),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$17)){LHandle$17.style["border-top-right-radius"]=TInteger.ToPxStr(NewRadius$1)}}},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10,GetLeft$1$:function($){return $.ClassType.GetLeft$1($)},GetRight$:function($){return $.ClassType.GetRight($)},SetLeft$1$:function($){return $.ClassType.SetLeft$1.apply($.ClassType,arguments)},SetRight$:function($){return $.ClassType.SetRight.apply($.ClassType,arguments)}};TW3BorderEdgeTopRadius.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BorderEdgeStyle=["besNone","besSolid","besDotted","besDouble","besGroove","besInset","besOutset"];var TW3BorderEdgeBottomRadius={$ClassName:"TW3BorderEdgeBottomRadius",$Parent:TW3BorderEdgeRadius,$Init:function($){TW3BorderEdgeRadius.$Init($);$.FLeft$3=$.FRight$3=0},GetLeft$1:function(S){var R=0;R=S.FLeft$3;return R},GetRight:function(S){var R=0;R=S.FRight$3;return R},SetLeft$1:function(S,NewRadius$2){var LHandle$18=undefined;if(NewRadius$2!=S.FLeft$3){S.FLeft$3=NewRadius$2;LHandle$18=$As(TW3OwnedObject.GetOwner(TW3BorderEdgeRadius.GetOwner$4(S)),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$18)){LHandle$18.style["border-bottom-left-radius"]=TInteger.ToPxStr(NewRadius$2)}}},SetRight:function(S,NewRadius$3){var LHandle$19=undefined;if(NewRadius$3!=S.FRight$3){S.FRight$3=NewRadius$3;LHandle$19=$As(TW3OwnedObject.GetOwner(TW3BorderEdgeRadius.GetOwner$4(S)),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$19)){LHandle$19.style["border-bottom-right-radius"]=TInteger.ToPxStr(NewRadius$3)}}},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10,GetLeft$1$:function($){return $.ClassType.GetLeft$1($)},GetRight$:function($){return $.ClassType.GetRight($)},SetLeft$1$:function($){return $.ClassType.SetLeft$1.apply($.ClassType,arguments)},SetRight$:function($){return $.ClassType.SetRight.apply($.ClassType,arguments)}};TW3BorderEdgeBottomRadius.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BorderEdge=["beLeft","beTop","beRight","beBottom"];var TW3Border={$ClassName:"TW3Border",$Parent:TObject,$Init:function($){TObject.$Init($);$.FEdge=0;$.FEdgeName="";$.FOwner$4=null},Create$132:function(S,AOwner$17,AEdge){TObject.Create(S);S.FOwner$4=AOwner$17;S.FEdge=S.FEdge;S.FEdgeName=_EdgeNameLUT[AEdge];return S},GetColor$4:function(S){var R=0;var LHandle$20=undefined;LHandle$20=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;R=StrToColor(String(LHandle$20.style["border-"+S.FEdgeName+"-color"]));return R},GetPadding:function(S){var R=0;var LHandle$21=undefined;LHandle$21=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$21))R=w3_GetStyleAsInt(LHandle$21,("padding-"+S.FEdgeName));return R},GetStyle:function(S){var R=0;var LHandle$22=undefined;var LValue$4="";R=0;LHandle$22=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$22)){LValue$4=String(w3_GetStyle(LHandle$22,("border-"+S.FEdgeName+"-style")));if(LValue$4!=null){switch((Trim$_String_(LValue$4)).toLocaleLowerCase()){case"solid":R=1;break;case"dotted":R=2;break;case"double":R=3;break;case"groove":R=4;break;case"inset":R=5;break;case"outset":R=6;break}}}
return R},GetWidth$6:function(S){var R=0;var LHandle$23=undefined;R=0;LHandle$23=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$23))R=w3_GetStyleAsInt(LHandle$23,("border-"+S.FEdgeName+"-width"));return R},SetColor$8:function(S,aValue$41){var LHandle$24=undefined;LHandle$24=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$24)){LHandle$24.style["border-"+S.FEdgeName+"-color"]=ColorToWebStr(aValue$41,255)}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetColor",TObject.ClassName(S.ClassType),$R[42]])}},SetPadding$1:function(S,aValue$42){var LHandle$25=undefined;LHandle$25=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$25)){LHandle$25.style["padding-"+S.FEdgeName]=TInteger.ToPxStr(aValue$42)}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetPadding",TObject.ClassName(S.ClassType),$R[42]])}},SetStyle$1:function(S,aValue$43){var LHandle$26=undefined;LHandle$26=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(TControlHandleHelper$Valid$2(LHandle$26)){LHandle$26.style["border-"+S.FEdgeName+"-style"]=_StyleNameLUT[aValue$43]}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetStyle",TObject.ClassName(S.ClassType),$R[42]])}},SetWidth$3:function(S,aValue$44){var LHandle$27=undefined;LHandle$27=$As(TW3OwnedObject.GetOwner(S.FOwner$4),TW3TagObj).FHandle$1;if(LHandle$27){LHandle$27.style["border-"+S.FEdgeName+"-width"]=TInteger.ToPxStr(aValue$44)}else{throw EW3Exception.CreateFmt($New(EW3TagObj),$R[0],["TW3Border.SetWidth",TObject.ClassName(S.ClassType),$R[42]])}},Destroy:TObject.Destroy};var TW3ElementAttributes={$ClassName:"TW3ElementAttributes",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$14=undefined},Create$133:function(S,aHandle$2){TObject.Create(S);if(!TControlHandleHelper$Valid$2(aHandle$2)){throw Exception.Create($New(EW3AttributeError),$R[36])}
S.FHandle$14=aHandle$2;return S},Exists$2:function(S,Attribute){var R=false;var LName$2="";LName$2=(Trim$_String_(Attribute)).toLocaleLowerCase();if(LName$2.length>0){LName$2=$R[41]+LName$2;try{R=(S.FHandle$14.hasAttribute(LName$2)?true:false)}catch($e){var e$27=$W($e);throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[39],[e$27.FMessage])}}else{throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty")}
return R},Read$5:function(S,Attribute$1){var R=undefined;var LName$3="";LName$3=(Trim$_String_(Attribute$1)).toLocaleLowerCase();if(LName$3.length>0){LName$3=$R[41]+LName$3;if(S.FHandle$14.hasAttribute(LName$3)){try{R=S.FHandle$14.getAttribute(LName$3)}catch($e){var e$28=$W($e);throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[37],[e$28.FMessage])}}else R=null}else{throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty")}
return R},Write$11:function(S,Attribute$2,Value$30){var LName$4="";LName$4=(Trim$_String_(Attribute$2)).toLocaleLowerCase();if(LName$4.length>0){LName$4=$R[41]+LName$4;try{S.FHandle$14.setAttribute(LName$4,Value$30)}catch($e){var e$29=$W($e);throw EW3Exception.CreateFmt($New(EW3AttributeError),$R[38],[e$29.FMessage])}}else{throw Exception.Create($New(EW3AttributeError),"Failed to access attribute, identifier was empty")}},Destroy:TObject.Destroy};var EW3AttributeError={$ClassName:"EW3AttributeError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3CustomAnimation={$ClassName:"TW3CustomAnimation",$Parent:TObject,$Init:function($){TObject.$Init($);$.FBusy=false;$.FDuration=0;$.FIdent="";$.FOnBegins=null;$.FOnEnds=null;$.FTarget=null},CBBegins:function(S){if(S.FOnBegins)S.FOnBegins(S)},CBEnds:function(S,EventObject$3){TW3CustomAnimation.FinalizeTransition$(S);if(S.FOnEnds)S.FOnEnds(S)},Create$139:function(S){TObject.Create(S);S.FDuration=DefaultDuration;S.FIdent=TW3CustomAnimation.MakeUniqueInstanceId(S.ClassType);return S},Destroy:function(S){if(S.FBusy&&(S.FTarget!==null)){try{TW3CustomAnimation.FinalizeTransition$(S)}catch($e){var e$30=$W($e)}}
TObject.Destroy(S)},Execute$1:function(S,TargetObj){if(!TargetObj){throw Exception.Create($New(Exception),"Target-object was NIL error")}
if(!S.FBusy){S.FTarget=TargetObj;TW3CustomAnimation.SetupTransition$(S)}else{throw Exception.Create($New(Exception),"Transition is already in progress error")}},ExecuteEx:function(S,TargetObj$1,BeginHandler,EndHandler){if(!TargetObj$1){throw Exception.Create($New(Exception),"Target-object was NIL error")}
if(!S.FBusy){S.FTarget=TargetObj$1;S.FOnBegins=BeginHandler;S.FOnEnds=EndHandler;TW3CustomAnimation.SetupTransition$(S)}else{throw Exception.Create($New(Exception),"Transition is already in progress error")}},FinalizeTransition:function(S){var LName$5="";LName$5=TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd");if($Is(BrowserAPI(),TW3FirefoxBrowserAPI))LName$5="animationend";TW3DOMEventAPI.UnRegisterEvent(S.FTarget.FHandle$1,LName$5,$Event1(S,TW3CustomAnimation.CBEnds),0);S.FBusy=false},MakeUniqueInstanceId:function(S){var R="";++__AnimID;R="Anim_no"+__AnimID.toString();return R},SetDuration:function(S,Value$31){if(!S.FBusy){S.FDuration=Value$31}else{throw Exception.Create($New(Exception),"Duration cannot be altered while the transition is active error")}},SetupTransition:function(S){var LName$6="";S.FBusy=true;LName$6=TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationEnd");if($Is(BrowserAPI(),TW3FirefoxBrowserAPI))LName$6="animationend";TW3DOMEventAPI.RegisterEvent(S.FTarget.FHandle$1,LName$6,$Event1(S,TW3CustomAnimation.CBEnds),0);TW3CustomAnimation.CBBegins(S)},Destroy$:function($){return $.ClassType.Destroy($)},Create$139$:function($){return $.ClassType.Create$139($)},FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)},SetupTransition$:function($){return $.ClassType.SetupTransition($)}};var TW3TransitionAnimation={$ClassName:"TW3TransitionAnimation",$Parent:TW3CustomAnimation,$Init:function($){TW3CustomAnimation.$Init($);$.FAnimationCmd=$.FIdent$1="";$.FSticky=$.FStyleSetup=false;$.FStyleDOM=undefined;$.FTiming=0},Create$139:function(S){TW3CustomAnimation.Create$139(S);S.FTiming=DefaultTiming;S.FIdent$1=TObject.ClassName(S.ClassType)+TW3Identifiers.GenerateUniqueNumber(TW3Identifiers).toString();return S},Destroy:function(S){TW3TransitionAnimation.InvalidateKeyFrames(S);TW3CustomAnimation.Destroy(S)},FinalizeTransition:function(S){var style$8;if(!S.FSticky){style$8=S.FTarget.FHandle$1.style;style$8.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Animation"));style$8.removeProperty(TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationFillMode"));S.FAnimationCmd=""}
TW3CustomAnimation.FinalizeTransition(S)},InvalidateKeyFrames:function(S){if(S.FStyleSetup){S.FStyleSetup=false;S.FStyleDOM.parentNode.removeChild(S.FStyleDOM);S.FStyleDOM=null}},KeyFramesName:function(S){var R="";R=S.FIdent$1;return R},SetupKeyFrames:function(S){var document$2=undefined,css="";S.FStyleSetup=true;document$2=document;S.FStyleDOM=document$2.createElement("style");S.FStyleDOM.type="text\/css";css="keyframes "+TW3TransitionAnimation.KeyFramesName(S)+" {"+TW3TransitionAnimation.KeyFramesCSS$(S)+"}";S.FStyleDOM.appendChild(document$2.createTextNode("@"+TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"")+css));S.FStyleDOM.appendChild(document$2.createTextNode("@"+css));document$2.getElementsByTagName("head")[0].appendChild(S.FStyleDOM)},SetupTransition:function(S){var style$9;TW3CustomAnimation.SetupTransition(S);if(!S.FStyleSetup)TW3TransitionAnimation.SetupKeyFrames(S);style$9=S.FTarget.FHandle$1.style;S.FAnimationCmd=TW3TransitionAnimation.KeyFramesName(S)+" "+FloatToStr$_Float_(S.FDuration)+"s "+cW3AnimationTiming[S.FTiming];style$9[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Animation")]=S.FAnimationCmd;style$9[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationFillMode")]="both"},Destroy$:function($){return $.ClassType.Destroy($)},Create$139$:function($){return $.ClassType.Create$139($)},FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)},SetupTransition$:function($){return $.ClassType.SetupTransition($)},KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3ZoomOutTransition={$ClassName:"TW3ZoomOutTransition",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($)},KeyFramesCSS:function(S){var R="";R="0% {\r\n   $1: scale(1.0);\r\n   $2: 50% 50%;\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   $3: scale(0.5);\r\n}\r\n100% {\r\n   opacity: 0.0;\r\n   $5: scale(0);\r\n}";R=StrReplace(R,"$1",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$2",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));R=StrReplace(R,"$3",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$4",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3ZoomInTransition={$ClassName:"TW3ZoomInTransition",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($)},KeyFramesCSS:function(S){var R="";R="0% {\r\n   opacity: 0.0;\r\n   $1: scale(0);\r\n}\r\n50% {\r\n   opacity: 0.3;\r\n   $2: scale(0.5);\r\n}\r\n100% {\r\n   $3: scale(1.0);\r\n   $4: 50% 50%;\r\n}";R=StrReplace(R,"$1",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$2",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$3",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$4",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3WarpOutTransition={$ClassName:"TW3WarpOutTransition",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($)},KeyFramesCSS:function(S){var R="";R="0% {\r\n   opacity: 1.0;\r\n   $1: scale(1);\r\n}\r\n100% {\r\n   opacity: 0;\r\n   $2: scale(5);\r\n   $3: 50% 50%;\r\n}";R=StrReplace(R,"$1",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$2",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$3",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3WarpInTransition={$ClassName:"TW3WarpInTransition",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($)},KeyFramesCSS:function(S){var R="";R="0% {\r\n   opacity: 0;\r\n   $1: scale(5);\r\n   $2: 50% 50%;\r\n}\r\n100% {\r\n   opacity: 1.0;\r\n   $3: scale(1);\r\n}";R=StrReplace(R,"$1",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));R=StrReplace(R,"$2",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform-origin"));R=StrReplace(R,"$3",TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"transform"));return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3SizeAnimation={$ClassName:"TW3SizeAnimation",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($);$.FFromHeight=$.FFromWidth=$.FFromX=$.FFromY=$.FToHeight=$.FToWidth=$.FToX=$.FToY=0},KeyFramesCSS:function(S){var R="";R=("from {\r\n  left: "+S.FFromX.toString()+"px;\r\n  top:  "+S.FFromY.toString()+"px;\r\n  width: "+S.FFromWidth.toString()+"px;\r\n  height: "+S.FFromHeight.toString()+"px;\r\n} to {\r\n  left: "+S.FToX.toString()+"px;\r\n  top:  "+S.FToY.toString()+"px;\r\n  width: "+S.FToWidth.toString()+"px;\r\n  height: "+S.FToHeight.toString()+"px;\r\n}");return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3NamedAnimation={$ClassName:"TW3NamedAnimation",$Parent:TW3CustomAnimation,$Init:function($){TW3CustomAnimation.$Init($);$.FName$3=""},SetupTransition:function(S){var mCommand="";TW3CustomAnimation.SetupTransition(S);w3_SetStyle(S.FTarget.FHandle$1,TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationFillMode"),"both");mCommand=S.FName$3+" "+FloatToStr$_Float_(S.FDuration)+"s linear";w3_SetStyle(S.FTarget.FHandle$1,TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Animation"),mCommand)},FinalizeTransition:function(S){TW3CustomAnimation.FinalizeTransition(S);if(S.FTarget!==null){S.FTarget.FHandle$1.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Animation")]="none";S.FTarget.FHandle$1.style[TW3CustomBrowserAPI.Prefix(BrowserAPI(),"AnimationFillMode")]="none"}},Destroy:TW3CustomAnimation.Destroy,Create$139:TW3CustomAnimation.Create$139,FinalizeTransition$:function($){return $.ClassType.FinalizeTransition($)},SetupTransition$:function($){return $.ClassType.SetupTransition($)}};var TW3MoveAnimation={$ClassName:"TW3MoveAnimation",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($);$.FFromX$1=$.FFromY$1=$.FToX$1=$.FToY$1=0},KeyFramesCSS:function(S){var R="";R=("from {\r\n  left: "+S.FFromX$1.toString()+"px;\r\n  top:  "+S.FFromY$1.toString()+"px;\r\n} to {\r\n  left: "+S.FToX$1.toString()+"px;\r\n  top: "+S.FToY$1.toString()+"px;\r\n}");return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3FadeAnimation={$ClassName:"TW3FadeAnimation",$Parent:TW3TransitionAnimation,$Init:function($){TW3TransitionAnimation.$Init($);$.FFrom=$.FTo=0},KeyFramesCSS:function(S){var R="";R="0% { opacity: "+FloatToStr$_Float_(S.FFrom)+"; }\r\n    100% { opacity: "+FloatToStr$_Float_(S.FTo)+"; }";return R},Destroy:TW3TransitionAnimation.Destroy,Create$139:TW3TransitionAnimation.Create$139,FinalizeTransition:TW3TransitionAnimation.FinalizeTransition,SetupTransition:TW3TransitionAnimation.SetupTransition,KeyFramesCSS$:function($){return $.ClassType.KeyFramesCSS($)}};var TW3AnimationTiming=["atEase","atLinear","atEaseIn","atEaseOut","atEaseInOut"];var cW3AnimationTiming=["ease","linear","ease-in","ease-out","ease-in-out"];function AfterEffect(aControl,aEffectObj){WriteLn("***************************** After effect called!");TW3MovableControl.fxSetBusy(aControl,false)};function BeforeEffect(aControl$1,aEffectObj$1){TW3MovableControl.fxSetBusy(aControl$1,true)};var TW3SystemEventObject={$ClassName:"TW3SystemEventObject",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.OnEvent=null;$.FAttached=false;$.FEventName=""},Attach:function(S,NameOfEvent){if(S.FAttached)TW3SystemEventObject.Detach(S);NameOfEvent=Trim$_String_(NameOfEvent);if(NameOfEvent.length>0){S.FEventName=NameOfEvent;try{TW3SystemEventObject.DoAttach$(S)}catch($e){var e$31=$W($e);S.FEventName="";throw EW3Exception.CreateFmt($New(EW3SystemEventError),"Failed to detach event, system threw exception %s with message [%s] error",[TObject.ClassName(e$31.ClassType),e$31.FMessage])}}else{throw Exception.Create($New(Exception),"Failed to attach event, invalid event-name error")}},Destroy:function(S){if(S.FAttached){try{TW3SystemEventObject.Detach(S)}catch($e){var e$32=$W($e)}}
TObject.Destroy(S)},Detach:function(S){if(S.FAttached){try{try{TW3SystemEventObject.DoDetach$(S)}catch($e){var e$33=$W($e);throw EW3Exception.CreateFmt($New(EW3SystemEventError),"Failed to detach event, system threw exception %s with message [%s] error",[TObject.ClassName(e$33.ClassType),e$33.FMessage])}}finally{S.FEventName=""}}else{throw Exception.Create($New(EW3SystemEventError),"Failed to detach event, not attached error")}},DoHandleEvent:function(S,EventObj$3){if(S.OnEvent)S.OnEvent(S,EventObj$3)},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10,DoAttach$:function($){return $.ClassType.DoAttach($)},DoDetach$:function($){return $.ClassType.DoDetach($)},DoHandleEvent$:function($){return $.ClassType.DoHandleEvent.apply($.ClassType,arguments)}};TW3SystemEventObject.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var EW3SystemEventError={$ClassName:"EW3SystemEventError",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3ImageFittingStyle=["fsNone","fsFill","fsContain","fsCover","fsScaleDown"];var TW3Image={$ClassName:"TW3Image",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FOnLoad=null},CBOnLoad:function(S){if(S.FOnLoad)S.FOnLoad(S)},GetComplete:function(S){var R=false;R=false;if(S.FHandle$1){if(S.FHandle$1.complete)R=(S.FHandle$1.complete?true:false)}
return R},GetEnabled:function(S){var R=false;R=true;return R},GetFit:function(S){var R=0;var LValue$5;R=0;if(TControlHandleHelper$Valid$2(S.FHandle$1)){LValue$5=S.FHandle$1.style["object-fit"];if(TW3VariantHelper$Valid$3(LValue$5)){if(TVariant.IsString(LValue$5)){switch((String(LValue$5)).toLocaleLowerCase()){case"none":case"":return R;break;case"fill":R=1;break;case"contain":R=2;break;case"cover":R=3;break;case"scale-down":R=4;break}}}}
return R},GetHeight:function(S){var R=0;R=TW3MovableControl.GetHeight(S);if(R==0){if(S.FHandle$1)R=parseInt(S.FHandle$1.height,10)}
return R},GetPixelheight:function(S){var R=0;if(TW3Image.GetReady(S)){R=parseInt(S.FHandle$1.naturalHeight,10)}else R=0;return R},GetPixelWidth:function(S){var R=0;if(TW3Image.GetReady(S)){R=parseInt(S.FHandle$1.naturalWidth,10)}else R=0;return R},GetReady:function(S){var R=false;R=false;if(S.FHandle$1){R=TW3Image.GetComplete(S)&&S.FHandle$1.naturalWidth>0&&S.FHandle$1.naturalHeight>0}
return R},GetSrc:function(S){var R="";if(S.FHandle$1)R=String(S.FHandle$1.src);return R},GetWidth:function(S){var R=0;R=TW3MovableControl.GetWidth(S);if(R<1){if(S.FHandle$1)R=parseInt(S.FHandle$1.width,10)}
return R},LoadFromURL:function(S,FromURL$1){TW3Image.SetSrc(S,FromURL$1)},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("img");return R},SetFit:function(S,Value$32){var LData$3="";if(TControlHandleHelper$Valid$2(S.FHandle$1)){LData$3="none";switch(Value$32){case 1:LData$3="fill";break;case 2:LData$3="contain";break;case 3:LData$3="cover";break;case 4:LData$3="scale-down";break}
S.FHandle$1.style["object-fit"]=LData$3}},SetOnLoad:function(S,aValue$45){S.FOnLoad=aValue$45;S.FHandle$1.onload=((aValue$45)?$Event0(S,TW3Image.CBOnLoad):$Event0(S,TW3TagContainer.CBNoBehavior))},SetSrc:function(S,Value$33){if(Value$33!=TW3Image.GetSrc(S))w3_setAttrib(S.FHandle$1,"src",Value$33)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight$:function($){return $.ClassType.GetHeight($)},GetWidth$:function($){return $.ClassType.GetWidth($)},ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled$:function($){return $.ClassType.GetEnabled($)},Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3Image.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3LabelText={$ClassName:"TW3LabelText",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3LabelText.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Label={$ClassName:"TW3Label",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCaption$2="";$.FContainer=null;$.FTextAlign=0},FinalizeObject:function(S){TObject.Free(S.FContainer);TW3CustomControl.FinalizeObject(S)},GetOverFlow:function(S){var R=-1;var LValue$6="";LValue$6=w3_GetStyleAsStr(S.FContainer.FHandle$1,"text-overflow");switch(LValue$6){case"inherit":R=1;break;case"clip":R=2;break;case"ellipsis":R=3;break;case"string":R=4;break;case"initial":R=0;break;default:R=-1}
return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FContainer=TW3TagContainer.Create$41$($New(TW3LabelText),S);w3_SetStyle(S.FContainer.FHandle$1,"text-overflow","ellipsis");w3_SetStyle(S.FContainer.FHandle$1,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"text-overflow"),"ellipsis");w3_SetStyle(S.FContainer.FHandle$1,"white-space","nowrap");w3_SetStyle(S.FContainer.FHandle$1,"overflow","hidden");w3_SetStyle(S.FContainer.FHandle$1,TW3CustomBrowserAPI.PrefixDef(BrowserAPI(),"vertical-align"),"middle");TW3Label.SetCaption$2(S,TObject.ClassName(S.ClassType));TW3MovableControl.SetHeight$(S,12)},Resize:function(S){var dx$6=0;var dy$6=0;var wd$1=0;var hd$1=0;TW3MovableControl.Resize(S);TW3MovableControl.SetBounds(S.FContainer,0,0,2,2);wd$1=TInteger.EnsureRange((TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(S.FContainer))+2),0,TW3MovableControl.ClientWidth(S));hd$1=TInteger.EnsureRange((TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(S.FContainer))+2),0,TW3MovableControl.ClientHeight(S));switch(S.FTextAlign){case 0:dy$6=($Div(TW3MovableControl.ClientHeight(S),2))-($Div(hd$1,2));TW3MovableControl.SetBounds(S.FContainer,0,dy$6,wd$1,hd$1);break;case 1:dx$6=($Div(TW3MovableControl.ClientWidth(S),2))-($Div(wd$1,2));dy$6=($Div(TW3MovableControl.ClientHeight(S),2))-($Div(hd$1,2));TW3MovableControl.SetBounds(S.FContainer,dx$6,dy$6,wd$1,hd$1);break;case 2:dx$6=TW3MovableControl.ClientWidth(S)-wd$1;dy$6=($Div(TW3MovableControl.ClientHeight(S),2))-($Div(hd$1,2));TW3MovableControl.SetBounds(S.FContainer,dx$6,dy$6,wd$1,hd$1);break}},SetCaption$2:function(S,aValue$46){if(aValue$46!=S.FCaption$2){TW3TagObj.BeginUpdate(S);try{S.FCaption$2=aValue$46;TW3TagObj.a$40(S.FContainer,aValue$46);TW3TagObj.AddToComponentState(S,[24])}finally{TW3TagObj.EndUpdate(S)}}},SetEnabled:function(S,EnabledValue$1){TW3CustomControl.SetEnabled(S,EnabledValue$1);TW3CustomControl.SetEnabled$(S.FContainer,EnabledValue$1)},SetOverFlow:function(S,OverFlowValue){var CNT_OVERFLOW_NAMES=["undefined","clip","ellipsis","string","initial","inherit"];TW3TagObj.BeginUpdate(S);S.FContainer.FHandle$1.style["text-overflow"]=CNT_OVERFLOW_NAMES[(OverFlowValue)+1];TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)},SetTextAlign$1:function(S,aNewAlignment){var LAlignText="";TW3TagObj.BeginUpdate(S);S.FTextAlign=aNewAlignment;switch(aNewAlignment){case 0:LAlignText="left";break;case 1:LAlignText="center";break;case 2:LAlignText="right";break}
S.FContainer.FHandle$1.style["text-align"]=LAlignText;TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3Label.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CSSTextOverflow={"-1":"loUndefined",0:"loInitial",1:"loInherit",2:"loClip",3:"loEllipsis",4:"loString"};var TTextAlign=["taLeft","taCenter","taRight"];var TWbCustomControl={$ClassName:"TWbCustomControl",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbCustomControl.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowElement={$ClassName:"TWbWindowElement",$Parent:TWbCustomControl,$Init:function($){TWbCustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowElement.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowGlyph={$ClassName:"TWbWindowGlyph",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowGlyph.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowZOrderGlyph={$ClassName:"TWbWindowZOrderGlyph",$Parent:TWbWindowGlyph,$Init:function($){TWbWindowGlyph.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowZOrderGlyph.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowSizerGlyph={$ClassName:"TWbWindowSizerGlyph",$Parent:TWbWindowGlyph,$Init:function($){TWbWindowGlyph.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowSizerGlyph.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowRightSide={$ClassName:"TWbWindowRightSide",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowRightSide.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowMinimizeGlyph={$ClassName:"TWbWindowMinimizeGlyph",$Parent:TWbWindowGlyph,$Init:function($){TWbWindowGlyph.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowMinimizeGlyph.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowLeftSide={$ClassName:"TWbWindowLeftSide",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowLeftSide.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowHeader={$ClassName:"TWbWindowHeader",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($);$.FClose=$.FMinimize=$.FTitle$1=$.FZOrder=null},FinalizeObject:function(S){TObject.Free(S.FTitle$1);TObject.Free(S.FClose);TObject.Free(S.FZOrder);TObject.Free(S.FMinimize);TW3CustomControl.FinalizeObject(S)},HandleTitleChanged:function(S,Sender$9){TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3CustomControl.Invalidate$),100)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FClose=TW3TagContainer.Create$41$($New(TWbWindowCloseGlyph),S);S.FZOrder=TW3TagContainer.Create$41$($New(TWbWindowZOrderGlyph),S);S.FMinimize=TW3TagContainer.Create$41$($New(TWbWindowMinimizeGlyph),S);S.FTitle$1=TW3TagContainer.Create$41$($New(TW3Label),S)},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3MovableControl.SetWidth$(S.FClose,24);TW3MovableControl.SetWidth$(S.FZOrder,28);TW3MovableControl.SetWidth$(S.FMinimize,23);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FTitle$1),1,1,0,0);TW3CustomControl._setChanged(S.FTitle$1,$Event1(S,TWbWindowHeader.HandleTitleChanged));TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S).FBottom,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S).FBottom,3947580);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S).FBottom,1)},Resize:function(S){var dx$7=0;var wd$2=0;var xd=0;TW3MovableControl.Resize(S);xd=23;TW3MovableControl.SetBounds(S.FClose,0,0,xd,TW3MovableControl.ClientHeight(S));dx$7=TW3MovableControl.GetWidth$(S.FClose)+2;wd$2=TW3MovableControl.ClientWidth(S);(wd$2-=(TW3MovableControl.GetWidth$(S.FClose)+2));(wd$2-=TW3MovableControl.GetWidth$(S.FMinimize));(wd$2-=TW3MovableControl.GetWidth$(S.FZOrder));TW3MovableControl.SetBounds(S.FTitle$1,dx$7,0,wd$2,TW3MovableControl.ClientHeight(S));dx$7=TW3MovableControl.ClientWidth(S)-TW3MovableControl.GetWidth$(S.FZOrder);TW3MovableControl.SetBounds(S.FZOrder,dx$7,0,TW3MovableControl.GetWidth$(S.FZOrder),TW3MovableControl.ClientHeight(S));dx$7=TW3MovableControl.GetLeft(S.FZOrder)-TW3MovableControl.GetWidth$(S.FMinimize);TW3MovableControl.SetBounds(S.FMinimize,dx$7,0,TW3MovableControl.GetWidth$(S.FMinimize),TW3MovableControl.ClientHeight(S))},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowHeader.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowFooter={$ClassName:"TWbWindowFooter",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowFooter.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowContent={$ClassName:"TWbWindowContent",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($);$.OnInputEnabled=null;$.OnInputDisabled=null;$.FBlocker=null;$.FOldSelect=0;$.FPermanent=false},DisableInput:function(S,BlockPermanent){if(!TWbWindowContent.InputDisabled(S)){TW3TagObj.BeginUpdate(S);try{S.FPermanent=BlockPermanent;S.FBlocker=TW3TagContainer.Create$41$($New(TW3WindowFocusBlock),S);TControlHandleHelper$ReadyExecute(S.FBlocker.FHandle$1,function(){TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FBlocker),255);TW3MovableControl.SetUseAlpha(S.FBlocker,true);TW3MovableControl.SetAlpha(S.FBlocker,3)});if(!BlockPermanent){S.FOldSelect=TW3TagObj.GetContentSelectionMode(S);TW3TagObj.SetContentSelectionMode(S,0)}else TW3TagObj.SetContentSelectionMode(S,0)}finally{TW3TagObj.EndUpdate(S);TW3CustomControl.Invalidate$(S);if(S.OnInputDisabled)S.OnInputDisabled(S)}}},EnableInput:function(S){if(TWbWindowContent.InputDisabled(S)){if(!S.FPermanent){TW3TagObj.BeginUpdate(S);try{TObject.Free(S.FBlocker);S.FBlocker=null;TW3TagObj.SetContentSelectionMode(S,S.FOldSelect)}finally{TW3TagObj.EndUpdate(S);TW3CustomControl.Invalidate$(S);if(S.OnInputEnabled)S.OnInputEnabled(S)}}}},FinalizeObject:function(S){if(TWbWindowContent.InputDisabled(S))TObject.Free(S.FBlocker);TW3CustomControl.FinalizeObject(S)},InputDisabled:function(S){var R=false;R=S.FBlocker!==null;return R},Resize:function(S){TW3MovableControl.Resize(S);if(S.FBlocker!==null)TW3MovableControl.SetBounds(S.FBlocker,0,0,TW3MovableControl.ClientWidth(S),TW3MovableControl.ClientHeight(S))},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowContent.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowCloseGlyph={$ClassName:"TWbWindowCloseGlyph",$Parent:TWbWindowGlyph,$Init:function($){TWbWindowGlyph.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbWindowCloseGlyph.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbCustomWindow={$ClassName:"TWbCustomWindow",$Parent:TWbCustomControl,$Init:function($){TWbCustomControl.$Init($);$.FContent=$.FFooter=$.FHeader=$.FLeft=$.FRight=$.FSizer=null;$.FMoveActive=$.FSizeActive=$.FStyled=false;$.FOldSize={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};$.FStartPos={X$1:0,Y$1:0}},CloseWindow:function(S){var LAccess=null;var LReader$2=null;LAccess=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LReader$2=LAccess[7]()[0]();if(LReader$2[2]("window.effects.close")){TW3MovableControl.fxWarpOut$1(S,0.3,function(){TW3Dispatch.Execute(TW3Dispatch,function(){var LAccess$1=null;LAccess$1=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LAccess$1[0](null);TObject.Free(S)},300)})}else{LAccess[0](null);TObject.Free(S)}},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetInc(R,7,0,8);$SetInc(R,6,0,8);return R},FinalizeObject:function(S){TW3CustomControl._setMouseDblClick(S.FHeader,null);TW3CustomControl._setMouseClick(S.FHeader.FClose,null);TW3CustomControl._setMouseDown(S,null);TW3CustomControl._setMouseMove(S,null);TW3CustomControl._setMouseUp(S,null);TObject.Free(S.FContent);TObject.Free(S.FFooter);TObject.Free(S.FRight);TObject.Free(S.FLeft);TObject.Free(S.FSizer);TObject.Free(S.FHeader);GetDesktop()[6](S);TW3CustomControl.FinalizeObject(S)},HandleCloseClick:function(S,Sender$10){TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TWbCustomWindow.CloseWindow),100)},HandleGotFocus:function(S,Sender$11){var LAccess$2=null,LList=[],x$78=0;var LItem$8=null;LAccess$2=GetDesktop();LAccess$2[0](S);TWbCustomWindow.StyleAsFocused(S);LList=LAccess$2[4]();if(LList.length>0){var $tg;for(x$78=0,$tg=LList.length;x$78<$tg;x$78++){LItem$8=LList[x$78];if(LItem$8!==S){if(LItem$8.FStyled)TWbCustomWindow.StyleAsUnFocused(LItem$8)}}}},HandleMinimizeClick:function(S,Sender$12){var LAccess$3=null;var LReader$3=null;var LHost=null;var LTemp$5={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TagContainer.a$46(S)!==null){LAccess$3=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LReader$3=LAccess$3[7]()[0]();LHost=$As(TW3TagContainer.a$46(S),TW3CustomControl);if(TRect$Compare$1(TW3MovableControl.GetBoundsRect(S),TW3MovableControl.ClientRect(LHost))){if(!TRect$Empty$2(S.FOldSize)){if(LReader$3[2]("window.effects.minimize")){TW3MovableControl.fxScaleTo$1(S,S.FOldSize.Left$3,S.FOldSize.Top$3,TRect$Width$3(S.FOldSize),TRect$Height$3(S.FOldSize),0.3,function(){TW3CustomControl.Invalidate$(S)})}else TW3MovableControl.SetBounds(S,S.FOldSize.Left$3,S.FOldSize.Top$3,TRect$Width$3(S.FOldSize),TRect$Height$3(S.FOldSize))}}else{S.FOldSize=TW3MovableControl.GetBoundsRect(S);LTemp$5=TW3MovableControl.ClientRect(LHost);if(LReader$3[2]("window.effects.maximize")){TW3MovableControl.fxScaleTo$1(S,LTemp$5.Left$3,LTemp$5.Top$3,TRect$Width$3(LTemp$5),TRect$Height$3(LTemp$5),0.3,function(){TW3CustomControl.Invalidate$(S)})}else TW3MovableControl.SetBounds(S,LTemp$5.Left$3,LTemp$5.Top$3,TRect$Width$3(LTemp$5),TRect$Height$3(LTemp$5))}}},HandleMouseDown:function(S,Sender$13,Button$1,Shift,X$2,Y$2){if($SetIn(S.FComponentState,5,0,6))return;if(Button$1==0){if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHeader),X$2,Y$2)){if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHeader.FZOrder),X$2,Y$2)||TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHeader.FMinimize),X$2,Y$2)||TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHeader.FClose),X$2,Y$2))return;TW3CustomControl.SetFocus(S);TW3CustomControl.SetCapture(S);TWbWindowContent.DisableInput(S.FContent,false);S.FMoveActive=true;S.FStartPos=Create$48(X$2,Y$2)}else if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FSizer),X$2,Y$2)){TW3CustomControl.SetFocus(S);TW3CustomControl.SetCapture(S);TWbWindowContent.DisableInput(S.FContent,false);S.FStartPos=Create$48(X$2,Y$2);S.FSizeActive=true}}},HandleMouseMove:function(S,Sender$14,Shift$1,X$3,Y$3){var dx$8=0;var dy$7=0;var wd$3=0;var hd$2=0;if($SetIn(S.FComponentState,5,0,6))return;if(S.FMoveActive){dx$8=TW3MovableControl.GetLeft(S)+X$3-S.FStartPos.X$1;dy$7=TW3MovableControl.GetTop(S)+Y$3-S.FStartPos.Y$1;TW3MovableControl.MoveTo(S,dx$8,dy$7)}else if(S.FSizeActive){wd$3=TW3MovableControl.GetWidth$(S)+X$3-S.FStartPos.X$1;hd$2=TW3MovableControl.GetHeight$(S)+Y$3-S.FStartPos.Y$1;TW3MovableControl.SetSize$3(S,wd$3,hd$2);S.FStartPos.X$1=X$3;S.FStartPos.Y$1=Y$3}},HandleMouseUp:function(S,Sender$15,Button$2,Shift$2,X$4,Y$4){if($SetIn(S.FComponentState,5,0,6))return;if(S.FMoveActive){S.FMoveActive=false;TW3CustomControl.ReleaseCapture(S);TWbWindowContent.EnableInput(S.FContent)}else if(S.FSizeActive){S.FSizeActive=false;TW3CustomControl.ReleaseCapture(S);TWbWindowContent.EnableInput(S.FContent)}},HandleZOrderClick:function(S,Sender$16){if(!TW3TagContainer.TopMost(S))TW3TagContainer.BringToFront(S)},InitializeObject:function(S){var LAccess$4=null;var LReader$4=null;TW3MovableControl.InitializeObject(S);S.FLeft=TW3TagContainer.Create$41$($New(TWbWindowLeftSide),S);S.FRight=TW3TagContainer.Create$41$($New(TWbWindowRightSide),S);S.FFooter=TW3TagContainer.Create$41$($New(TWbWindowFooter),S);S.FContent=TW3TagContainer.Create$41$($New(TWbWindowContent),S);S.FSizer=TW3TagContainer.Create$41$($New(TWbWindowSizerGlyph),S);S.FHeader=TW3TagContainer.Create$41$($New(TWbWindowHeader),S);LAccess$4=GetDesktop();LAccess$4[5](S);LReader$4=LAccess$4[7]()[0]();if(LReader$4[2]("window.effects.open")){TW3MovableControl.fxWarpIn$1(S,0.4,function(){TW3CustomControl.SetFocus(S);TW3CustomControl.Invalidate$(S)})}},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3CustomControl._setMouseClick(S.FHeader.FClose,$Event1(S,TWbCustomWindow.HandleCloseClick));TW3CustomControl._setMouseClick(S.FHeader.FZOrder,$Event1(S,TWbCustomWindow.HandleZOrderClick));TW3CustomControl._setMouseClick(S.FHeader.FMinimize,$Event1(S,TWbCustomWindow.HandleMinimizeClick));TW3CustomControl._setMouseClick(S.FHeader,function(sender$9){if(!TW3TagContainer.TopMost(S))TW3TagContainer.BringToFront(S)});TW3CustomControl._setMouseDown(S,$Event(S,TWbCustomWindow.HandleMouseDown$));TW3CustomControl._setMouseMove(S,$Event(S,TWbCustomWindow.HandleMouseMove));TW3CustomControl._setMouseUp(S,$Event(S,TWbCustomWindow.HandleMouseUp));TW3CustomControl._setGotFocus(S,$Event1(S,TWbCustomWindow.HandleGotFocus));TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FFooter).FTop,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FFooter).FTop,9617407);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FFooter).FTop,1);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FRight).FLeft$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FRight).FLeft$1,9617407);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FRight).FLeft$1,1);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FRight).FRight$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FRight).FRight$1,2117005);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FRight).FRight$1,1);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FLeft).FLeft$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FLeft).FLeft$1,9617407);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FLeft).FLeft$1,1);TW3MovableControl.SetSize$3(S.FSizer,20,20);TW3ControlBackgroundSize.SetMode(TW3MovableControl.GetBackGround(S.FSizer).FSize$2,4);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FSizer).FRight$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FSizer).FRight$1,2117005);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FSizer).FRight$1,1);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FContent),13619151);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FContent).FBottom,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FContent).FBottom,1647437);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FContent).FBottom,1);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FContent).FRight$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FContent).FRight$1,1647437);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FContent).FRight$1,1);TW3Border.SetStyle$1(TW3MovableControl.GetBorder(S.FContent).FLeft$1,1);TW3Border.SetColor$8(TW3MovableControl.GetBorder(S.FContent).FLeft$1,1647437);TW3Border.SetWidth$3(TW3MovableControl.GetBorder(S.FContent).FLeft$1,1);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),13619151);TW3BorderEdgeRadius.SetLeft$1$(TW3MovableControl.GetEdgeRadius(S).FTop$1,4);TW3BorderEdgeRadius.SetRight$(TW3MovableControl.GetEdgeRadius(S).FTop$1,4);TW3Borders.SetSize$11(TW3MovableControl.GetBorder(S),1);TW3Borders.SetColor$7(TW3MovableControl.GetBorder(S),3947580);TW3Borders.SetStyle(TW3MovableControl.GetBorder(S),1);S.FHandle$1.style["box-shadow"]="4px 6px 5px rgba(0,0,0,0.5)"},Resize:function(S){TW3MovableControl.Resize(S);if(!$SetIn(S.FComponentState,5,0,6)){TW3MovableControl.SetBounds(S.FHeader,0,0,TW3MovableControl.ClientWidth(S),29);TW3MovableControl.SetBounds(S.FContent,6,29,(TW3MovableControl.ClientWidth(S)-(6+6)),(TW3MovableControl.ClientHeight(S)-(29+21)));TW3MovableControl.SetBounds(S.FLeft,0,29,6,(TW3MovableControl.ClientHeight(S)-29));TW3MovableControl.SetBounds(S.FRight,(TW3MovableControl.ClientWidth(S)-6),29,6,(TW3MovableControl.ClientHeight(S)-(29+20)));TW3MovableControl.SetBounds(S.FFooter,TW3MovableControl.GetLeft(S.FContent),(TW3MovableControl.GetTop(S.FContent)+TW3MovableControl.GetHeight$(S.FContent)),TW3MovableControl.GetWidth$(S.FContent),21);TW3MovableControl.SetBounds(S.FSizer,(TW3MovableControl.ClientWidth(S)-20),(TW3MovableControl.ClientHeight(S)-20),20,20)}},StyleAsFocused:function(S){try{TWbWindowContent.EnableInput(S.FContent);TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FHeader),"TWbWindowHeader_focused");TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FHeader.FZOrder),"TWbWindowZOrderGlyph_focused");TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FHeader.FMinimize),"TWbWindowMinimizeGlyph_focused");TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FHeader.FClose),"TWbWindowCloseGlyph_focused");TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FSizer),"TWbWindowSizerGlyph_focused");TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),6393550)}finally{S.FStyled=true}},StyleAsUnFocused:function(S){try{TWbWindowContent.DisableInput(S.FContent,false);TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S.FHeader),"TWbWindowHeader_focused");TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S.FHeader.FZOrder),"TWbWindowZOrderGlyph_focused");TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S.FHeader.FMinimize),"TWbWindowMinimizeGlyph_focused");TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S.FHeader.FClose),"TWbWindowCloseGlyph_focused");TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S.FSizer),"TWbWindowSizerGlyph_focused");TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),13619151)}finally{S.FStyled=false}},UnSelect:function(S){var LAccess$5=null,LList$1=[],x$79=0;var LItem$9=null;LAccess$5=GetDesktop();LAccess$5[0](null);LList$1=LAccess$5[4]();if(LList$1.length>0){var $th;for(x$79=0,$th=LList$1.length;x$79<$th;x$79++){LItem$9=LList$1[x$79];if(LItem$9.FStyled)TWbCustomWindow.StyleAsUnFocused(LItem$9)}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown$:function($){return $.ClassType.HandleMouseDown.apply($.ClassType,arguments)}};TWbCustomWindow.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindow={$ClassName:"TWbWindow",$Parent:TWbCustomWindow,$Init:function($){TWbCustomWindow.$Init($)},HandleMouseDown:function(S,Sender$17,Button$3,Shift$3,X$5,Y$5){var LAccess$6=null;var LActive=null;if($SetIn(S.FComponentState,5,0,6))return;LAccess$6=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LActive=LAccess$6[3]();if(LActive!==null){if(LActive!==S){LAccess$6[0](S);TW3CustomControl.SetFocus(S);TW3CustomControl.DropFocus(LActive);if(LActive.FStyled){TWbCustomWindow.StyleAsUnFocused(LActive)}
if(!S.FStyled){TWbCustomWindow.StyleAsFocused(S)}}else{if(!S.FStyled){TWbCustomWindow.StyleAsFocused(S)}}}else{LAccess$6[0](S);TW3CustomControl.SetFocus(S);if(!S.FStyled){TWbCustomWindow.StyleAsFocused(S)}}
TWbCustomWindow.HandleMouseDown(S,Sender$17,Button$3,Shift$3,X$5,Y$5)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TWbCustomWindow.FinalizeObject,InitializeObject:TWbCustomWindow.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbCustomWindow.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TWbCustomWindow.ObjectReady,Resize:TWbCustomWindow.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown$:function($){return $.ClassType.HandleMouseDown.apply($.ClassType,arguments)}};TWbWindow.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbExternalWindow={$ClassName:"TWbExternalWindow",$Parent:TWbCustomWindow,$Init:function($){TWbCustomWindow.$Init($);$.FFrame=null;$.FOptions$8=[0];$.FURL=""},CloseUrl:function(S){if(S.FFrame!==null){try{try{TObject.Free(S.FFrame)}catch($e){var e$34=$W($e)}}finally{S.FFrame=null;TW3TagObj.a$40(S.FContent,"");S.FURL="";if(!$SetIn(S.FComponentState,5,0,6))TW3CustomControl.Invalidate$(S)}}},FrameHasFocus:function(S){var R=false;R=TW3TagObj.GetDOMFocusedElement(TW3TagObj)==S.FFrame.FHandle$1;return R},OpenURL:function(S,FullURL,Options$9){if(!$SetIn(S.FComponentState,5,0,6)){if(S.FFrame!==null)TWbExternalWindow.CloseUrl(S);try{S.FFrame=TW3TagContainer.Create$41$($New(TW3IFrameHTMLElement),S.FContent);S.FFrame.FHandle$1.style.width="100%";S.FFrame.FHandle$1.style.height="100%";TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FFrame),16777215);TW3IFrameHTMLElement.a$147(S.FFrame,FullURL)}finally{S.FURL=FullURL;S.FOptions$8=Options$9.slice(0)}}},QueryChildInThisBranch:function(S,Child$6){var R=false;R=TW3TagContainer.QueryChildInThisBranch(S,Child$6);if(!R){R=TWbExternalWindow.FrameHasFocus(S)}
return R},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TWbCustomWindow.FinalizeObject,InitializeObject:TWbCustomWindow.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbCustomWindow.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch$:function($){return $.ClassType.QueryChildInThisBranch.apply($.ClassType,arguments)},GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TWbCustomWindow.ObjectReady,Resize:TWbCustomWindow.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown:TWbCustomWindow.HandleMouseDown};TWbExternalWindow.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3WindowFocusBlock={$ClassName:"TW3WindowFocusBlock",$Parent:TWbWindowElement,$Init:function($){TWbWindowElement.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3WindowFocusBlock.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
function RegisterDesktop(Desktop){LDesktop=Desktop};function GetDesktop(){var R=null;R=LDesktop;return R};var TWbDatatypeRegistry={$ClassName:"TWbDatatypeRegistry",$Parent:TObject,$Init:function($){TObject.$Init($);$.FObjects=[]},Clear:function(S){var a$324=0;var LItem$10=null;try{var a$325=[];a$325=S.FObjects;var $ti;for(a$324=0,$ti=a$325.length;a$324<$ti;a$324++){LItem$10=a$325[a$324];TObject.Free(LItem$10)}}finally{S.FObjects.length=0}},Destroy:function(S){TWbDatatypeRegistry.Clear(S);TObject.Destroy(S)},ForEach:function(S,Callback$2){var a$326=0;var LItem$11=null;if(Callback$2){var a$327=[];a$327=S.FObjects;var $tj;for(a$326=0,$tj=a$327.length;a$326<$tj;a$326++){LItem$11=a$327[a$326];if(Callback$2(LItem$11)==16)break}}},ForEachEx:function(S,Before,Process$1,After$1){var a$328=0;var LItem$12=null;try{if(Before)Before()}finally{try{if(Process$1){var a$329=[];a$329=S.FObjects;var $tk;for(a$328=0,$tk=a$329.length;a$328<$tk;a$328++){LItem$12=a$329[a$328];if(Process$1(LItem$12)==16)break}}}finally{if(After$1)After$1()}}},GetCount:function(S){var R=0;R=S.FObjects.length;return R},GetInfoByExt:function(S,FileName$7){var R=null;var LExt="",a$330=0;var LItem$13=null;var a$331=[];LExt=(TW3VirtualFileSystem.ExtractFileExt(TW3VirtualFileSystem,FileName$7)).toLocaleLowerCase();a$331=S.FObjects;var $tl;for(a$330=0,$tl=a$331.length;a$330<$tl;a$330++){LItem$13=a$331[a$330];if($Is(LItem$13,TWbDatatypeFile)){if(LExt==$As(LItem$13,TWbDatatypeFile).FileExt){R=LItem$13;break}}}
return R},GetInfoByType:function(S,TypeName$1){var R=null;var a$332=0;var LItem$14=null;TypeName$1=Trim$_String_(TypeName$1);if(TypeName$1.length>0){var a$333=[];a$333=S.FObjects;var $tm;for(a$332=0,$tm=a$333.length;a$332<$tm;a$332++){LItem$14=a$333[a$332];if((LItem$14.TypeName).toLocaleLowerCase()==TypeName$1){R=LItem$14;break}}}
return R},GetItem:function(S,Index$7){var R=null;R=S.FObjects[Index$7];return R},Register:function(S,Info$1){var R=null;R=Info$1;if(Info$1!==null){if(S.FObjects.indexOf(Info$1)<=-1){S.FObjects.push(Info$1)}}
return R},Destroy$:function($){return $.ClassType.Destroy($)}};TWbDatatypeRegistry.$Intf={IWbDatatypeRegistry:[TWbDatatypeRegistry.GetCount,TWbDatatypeRegistry.GetItem,TWbDatatypeRegistry.GetInfoByExt,TWbDatatypeRegistry.GetInfoByType,TWbDatatypeRegistry.ForEach,TWbDatatypeRegistry.ForEachEx]}
var TWbDatatypeInfo={$ClassName:"TWbDatatypeInfo",$Parent:TObject,$Init:function($){TObject.$Init($);$.TypeName=$.Description=""},Destroy:TObject.Destroy};var TWbDatatypeIconInfo={$ClassName:"TWbDatatypeIconInfo",$Parent:TWbDatatypeInfo,$Init:function($){TWbDatatypeInfo.$Init($);$.SelectedIcon=$.UnSelectedIcon=""},Destroy:TObject.Destroy};var TWbDatatypeFile={$ClassName:"TWbDatatypeFile",$Parent:TWbDatatypeIconInfo,$Init:function($){TWbDatatypeIconInfo.$Init($);$.FileExt=""},Destroy:TObject.Destroy};var TW3Cookies={$ClassName:"TW3Cookies",$Parent:TObject,$Init:function($){TObject.$Init($)},Erase:function(S,name$29){TW3Cookies.WriteString$2(S,name$29,"",-1)},Exists$1:function(S,Name$25){var R=false;var nameEQ="";var allCookies="";var c$3="";var cookieArray=[],i$2=0;R=false;nameEQ=Name$25+"=";allCookies=document.cookie;cookieArray=(allCookies).split(";");for(i$2=(cookieArray.length-1);i$2>=0;i$2--){c$3=TrimLeft(cookieArray[i$2]);if(StrBeginsWith(c$3,nameEQ)){R=true;break}}
return R},ReadString$2:function(S,name$30){var R="";var nameEQ$1="";var allCookies$1="";var c$4="";var cookieArray$1=[],i$3=0;nameEQ$1=name$30+"=";allCookies$1=document.cookie;cookieArray$1=(allCookies$1).split(";");for(i$3=(cookieArray$1.length-1);i$3>=0;i$3--){c$4=TrimLeft(cookieArray$1[i$3]);if(StrBeginsWith(c$4,nameEQ$1))return c$4.substr((nameEQ$1.length+1)-1)}
R="";return R},WriteString$3:function(S,name$31,value$25){TW3Cookies.WriteString$2(S,name$31,value$25,ExpirationDelayInDays)},WriteString$2:function(S,name$32,value$26,expireInDays){var expire,expireMSec=0;var cookie$1="";if(expireInDays>0){expireMSec=expireInDays*24*60*60*1000;expire=new Date();expire.setTime(expire.getTime()+expireMSec);cookie$1=";expires="+expire.toGMTString()}
document.cookie=name$32+'='+value$26+cookie$1+';path=/'},Destroy:TObject.Destroy};var TWbListItem={$ClassName:"TWbListItem",$Parent:TWbCustomControl,$Init:function($){TWbCustomControl.$Init($);$.OnUnSelected=null;$.OnSelected=null;$.FData$2=undefined;$.FOptions$7=[0];$.FSelected=false},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetInc(R,6,0,8);$SetInc(R,7,0,8);return R},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);if(S.FSelected){S.FSelected=false;TW3CustomControl.Invalidate$(S)}},SetOptions:function(S,NewOptions$2){if($SetIn(NewOptions$2,1,0,2)){$SetExc(NewOptions$2,0,0,2)}
S.FOptions$7=NewOptions$2.slice(0)},SetSelected:function(S,NewSelection){if($SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);S.FSelected=NewSelection;TW3TagObj.AddToComponentState(S,[8]);if(NewSelection){TW3CustomControl.SetBorderRadius(S,6)}else{TW3CustomControl.SetBorderRadius(S,0)}
TW3TagObj.EndUpdate(S)}else S.FSelected=NewSelection},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);S.FHandle$1.style["min-width"]="64px";S.FHandle$1.style["min-height"]="64px"},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,SetSelected$:function($){return $.ClassType.SetSelected.apply($.ClassType,arguments)}};TWbListItem.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbListItemIcon={$ClassName:"TWbListItemIcon",$Parent:TWbListItem,$Init:function($){TWbListItem.$Init($);$.FGlyph=$.FText$2=null},FinalizeObject:function(S){TObject.Free(S.FGlyph);TObject.Free(S.FText$2);TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FGlyph=TW3TagContainer.Create$41$($New(TW3Image),S);TW3MovableControl.SetWidth$(S.FGlyph,64);TW3MovableControl.SetHeight$(S.FGlyph,64);S.FText$2=TW3TagContainer.Create$41$($New(TW3Label),S);TW3MovableControl.SetWidth$(S.FText$2,100);TW3MovableControl.SetHeight$(S.FText$2,20);TW3Label.SetCaption$2(S.FText$2,"Noname");TW3Label.SetTextAlign$1(S.FText$2,1);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FText$2),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FText$2),12);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FText$2),0);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),536870911)},ObjectReady:function(S){TWbListItem.ObjectReady(S);TW3MovableControl.SetSize$3(S,76,84)},Resize:function(S){var dx$9=0;var dy$8=0;TW3MovableControl.Resize(S);dx$9=($Div(TW3MovableControl.ClientWidth(S),2))-($Div(TW3MovableControl.GetWidth$(S.FGlyph),2));TW3MovableControl.MoveTo(S.FGlyph,dx$9,4);TW3MovableControl.SetWidth$(S.FText$2,TW3MovableControl.GetWidth$(S.FText$2.FContainer));(dy$8+=(TW3MovableControl.GetTop(S.FGlyph)+TW3MovableControl.GetHeight$(S.FGlyph)));dx$9=($Div(TW3MovableControl.ClientWidth(S),2))-($Div(TW3MovableControl.GetWidth$(S.FText$2),2));TW3MovableControl.SetBounds(S.FText$2,dx$9,dy$8,TW3MovableControl.GetWidth$(S.FText$2),TW3MovableControl.GetHeight$(S.FText$2))},SetSelected:function(S,NewSelection$1){switch(NewSelection$1){case true:TW3CustomControl.SetBorderRadius(S.FGlyph,6);S.FGlyph.FHandle$1.style["background-color"]=ColorToWebStr$1(0,0,0,32);break;case false:TW3CustomControl.SetBorderRadius(S.FGlyph,0);S.FGlyph.FHandle$1.style["background-color"]="transparent";break}
TWbListItem.SetSelected(S,NewSelection$1)},StyleTagObject:function(S){TWbListItem.StyleTagObject(S);w3_SetStyle(S.FHandle$1,"min-width","76px");w3_SetStyle(S.FHandle$1,"min-height","84px")},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbListItem.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,SetSelected$:function($){return $.ClassType.SetSelected.apply($.ClassType,arguments)}};TWbListItemIcon.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbLayoutSelectMask={$ClassName:"TWbLayoutSelectMask",$Parent:TWbCustomControl,$Init:function($){TWbCustomControl.$Init($)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);TW3Borders.SetStyle(TW3MovableControl.GetBorder(S),2);TW3Borders.SetSize$11(TW3MovableControl.GetBorder(S),2);TW3Borders.SetColor$7(TW3MovableControl.GetBorder(S),0);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),536870911)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbLayoutSelectMask.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbIconView={$ClassName:"TWbIconView",$Parent:TWbCustomControl,$Init:function($){TWbCustomControl.$Init($);$.FActive$2=false;$.FOnItemSelect=null;$.FSelectItem=null;$.FSelectMask=null;$.FSpacing=10;$.FStartPos$1={X$1:0,Y$1:0}},CalculateLayout:function(S){var R={clRows:[]};var x$80=0;var LCount$3=0;var LRowHeight=0;var dx$10=0;var dy$9=0;var LChild$3=null;var LStack=[];function StackToRow(){var LRow={lrWidth:0,lrHeight:0,lrCols:[]};var LWidth$2=0;var LHeight$2=0;var LTemp$6={leNode:null,leX:0,leY:0};LHeight$2=0;LWidth$2=0;while(LStack.length>0){Copy$TCLayoutElement(LStack.pop(),LTemp$6);if(TW3MovableControl.GetHeight$(LTemp$6.leNode)>LHeight$2)LHeight$2=TW3MovableControl.GetHeight$(LTemp$6.leNode);(LWidth$2+=(TW3MovableControl.GetWidth$(LTemp$6.leNode)+S.FSpacing));LRow.lrCols.push(Clone$TCLayoutElement(LTemp$6))}
if(LWidth$2>0)(LWidth$2+=S.FSpacing);LRow.lrHeight=LHeight$2;LRow.lrWidth=LWidth$2;R.clRows.push(Clone$TCLayoutRow(LRow));LStack.length=0};LCount$3=TW3TagContainer.GetChildCount(S);x$80=0;dx$10=S.FSpacing;dy$9=S.FSpacing;while(x$80<LCount$3){LChild$3=$As(TW3TagContainer.GetChildObject(S,x$80),TWbListItem);if($SetIn(LChild$3.FOptions$7,0,0,2)){if(TW3MovableControl.GetHeight$(LChild$3)>LRowHeight)LRowHeight=TW3MovableControl.GetHeight$(LChild$3);LStack.push(Create$149(LChild$3,dx$10,dy$9));StackToRow();dx$10=S.FSpacing;(dy$9+=LRowHeight);(dy$9+=S.FSpacing);++x$80;continue}
if($SetIn(LChild$3.FOptions$7,1,0,2)){StackToRow();dx$10=S.FSpacing;(dy$9+=LRowHeight);(dy$9+=S.FSpacing);LStack.push(Create$149(LChild$3,dx$10,dy$9));(dy$9+=TW3MovableControl.GetHeight$(LChild$3));(dy$9+=S.FSpacing);LRowHeight=0;++x$80;StackToRow();continue}
if(dx$10+TW3MovableControl.GetWidth$(LChild$3)+S.FSpacing>TW3MovableControl.ClientWidth(S)){StackToRow();dx$10=S.FSpacing;(dy$9+=LRowHeight);(dy$9+=S.FSpacing)}
if(TW3MovableControl.GetHeight$(LChild$3)>LRowHeight)LRowHeight=TW3MovableControl.GetHeight$(LChild$3);LStack.push(Create$149(LChild$3,dx$10,dy$9));(dx$10+=TW3MovableControl.GetWidth$(LChild$3));if(x$80<LCount$3-1)(dx$10+=S.FSpacing);++x$80}
if(LStack.length>0)StackToRow();return R},CheckMouseInElement:function(S,Xpos,Ypos){var R=null;var LCount$4=0;var LElement$2=null;var LChild$4=null;var x$81=0;LCount$4=TW3TagContainer.GetChildCount(S);if(LCount$4>0){var $tn;for(x$81=0,$tn=LCount$4;x$81<$tn;x$81++){LElement$2=TW3TagContainer.GetChildObject(S,x$81);if($Is(LElement$2,TW3CustomControl)){LChild$4=$As(LElement$2,TW3CustomControl);if($Is(LChild$4,TWbListItem)){if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(LChild$4),Xpos,Ypos)){R=$As(LChild$4,TWbListItem);break}}}}}
return R},Clear$14:function(S){var LList$2=[],a$334=0;var LItem$15=null;if($SetIn(S.FComponentState,2,0,6)){if(!$SetIn(S.FComponentState,5,0,6)){S.FSelectItem=null;LList$2=TWbIconView.GetItemList(S);var $to;for(a$334=0,$to=LList$2.length;a$334<$to;a$334++){LItem$15=LList$2[a$334];TObject.Free(LItem$15)}}}},ClearSelected:function(S){if($SetIn(S.FComponentState,2,0,6)){if(!$SetIn(S.FComponentState,5,0,6)){if(S.FSelectItem!==null){if(S.FSelectItem.OnUnSelected){S.FSelectItem.OnUnSelected(S.FSelectItem)}}
if(S.FOnItemSelect){S.FOnItemSelect(S,null,S.FSelectItem)}
S.FSelectItem=null}}},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetInc(R,6,0,8);return R},FinalizeObject:function(S){if(S.FSelectMask!==null)TObject.Free(S.FSelectMask);TW3CustomControl.FinalizeObject(S)},GetItemList:function(S){var R=[];var x$82=0;var LItem$16=null;var $tp;for(x$82=0,$tp=TW3TagContainer.GetChildCount(S);x$82<$tp;x$82++){LItem$16=TW3TagContainer.GetChildObject(S,x$82);if($Is(LItem$16,TWbListItem)){R.push($As(LItem$16,TWbListItem))}}
return R},GetSelectMask:function(S){var R=null;if(S.FSelectMask===null){S.FSelectMask=TW3TagContainer.Create$41$($New(TWbLayoutSelectMask),S);TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S.FSelectMask),TSuperStyle.AnimGlow$1(TSuperStyle,0,16777215))}
R=S.FSelectMask;return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);TW3CustomControl._setMouseDown(S,null);TW3CustomControl._setMouseMove(S,null);TW3CustomControl._setMouseUp(S,null);TW3CustomControl._setKeyPress(S,null)},MouseDown:function(S,button$5,shiftState$11,x$83,y$40){var LItem$17=null;var LDOMFocus=undefined;var LAccess$7=null;var LEd=null,LCtrl$2=null,LWin=null,TopOwner=null;TW3CustomControl.MouseDown(S,button$5,shiftState$11,x$83,y$40);LAccess$7=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");if(button$5==0){LItem$17=TWbIconView.CheckMouseInElement(S,x$83,y$40);if(LItem$17===null){TWbIconView.UnSelectAll(S);TW3CustomControl.SetFocus(S);LDOMFocus=TW3TagObj.GetDOMFocusedElement(TW3TagObj);if(LDOMFocus){if(LDOMFocus!=S.FHandle$1){LDOMFocus.blur();TW3ControlTracker.SetFocusedControl(TW3ControlTracker,null);S.FHandle$1.focus()}}
LEd=TW3ControlTracker.GetFocusedControl(TW3ControlTracker);if(LEd!==S){if(LEd!==null){LCtrl$2=$As(LEd,TW3CustomControl);LCtrl$2.FHandle$1.blur();if(LCtrl$2.FOnLostFocus)LCtrl$2.FOnLostFocus(LEd)}}
try{WriteLn("Could not find an icon at this location");if(LAccess$7[1](S)){LWin=LAccess$7[3]();if(LWin!==null){TWbCustomWindow.UnSelect(LWin)}}
S.FActive$2=true;TWbIconView.ClearSelected(S);if(TW3TagObj.GetDOMFocusedElement(TW3TagObj)!=S.FHandle$1){TW3CustomControl.SetFocus(S)}
TW3CustomControl.SetCapture(S);S.FStartPos$1=Create$48(x$83,y$40)}catch($e){var e$35=$W($e);WriteLn(("A mousedown error occured, system threw exception ["+e$35.FMessage+"]"));throw $e}}else{if($Is(LItem$17,TWbListItem)){if($Is(LItem$17,TWbListItemIcon)){TW3CustomControl.SetFocus(LItem$17)}
if(S.FSelectItem){if(S.FSelectItem===LItem$17)return;if(S.FSelectItem.OnUnSelected){S.FSelectItem.OnUnSelected(S.FSelectItem);TWbListItem.SetSelected$(S.FSelectItem,false)}}
if(S.FOnItemSelect)S.FOnItemSelect(S,$As(LItem$17,TWbListItem),S.FSelectItem);S.FSelectItem=$As(LItem$17,TWbListItem);TWbListItem.SetSelected$(S.FSelectItem,true);if(S.FSelectItem.OnSelected)S.FSelectItem.OnSelected(S.FSelectItem)}else{TWbIconView.ClearSelected(S);if(TW3TagContainer.QueryChildInThisBranch$(S,LItem$17)){if($Is(TW3TagContainer.a$46(LItem$17),TWbListItem)||$Is(TW3TagContainer.a$46(LItem$17),TWbListItemIcon)){WriteLn("Same branch, selecting parent icon");TopOwner=$As(TW3TagContainer.a$46(LItem$17),TWbListItem);TWbListItem.SetSelected$(TopOwner,(!TopOwner.FSelected))}else{WriteLn(("Unknown parent <"+TObject.ClassName(TW3TagContainer.a$46(LItem$17).ClassType)+">"))}}else{WriteLn((TObject.ClassName(LItem$17.ClassType)+" was selected somehow .."))}}}}},MouseMove:function(S,shiftState$12,x$84,y$41){var LRect={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};TW3CustomControl.MouseMove(S,shiftState$12,x$84,y$41);if(S.FActive$2){if(x$84!=S.FStartPos$1.X$1&&y$41!=S.FStartPos$1.Y$1&&S.FSelectMask===null){S.FSelectMask=TWbIconView.GetSelectMask(S);TW3MovableControl.MoveTo(S.FSelectMask,S.FStartPos$1.X$1,S.FStartPos$1.Y$1)}
if(S.FSelectMask!==null){LRect.Left$3=(x$84<S.FStartPos$1.X$1)?x$84:S.FStartPos$1.X$1;LRect.Top$3=(y$41<S.FStartPos$1.Y$1)?y$41:S.FStartPos$1.Y$1;LRect.Right$1=(x$84>S.FStartPos$1.X$1)?x$84:S.FStartPos$1.X$1;LRect.Bottom$1=(y$41>S.FStartPos$1.Y$1)?y$41:S.FStartPos$1.Y$1;TW3MovableControl.SetBounds$1(S.FSelectMask,LRect)}}},MouseUp:function(S,button$6,shiftState$13,x$85,y$42){var LTemp$7=null;TW3CustomControl.MouseUp(S,button$6,shiftState$13,x$85,y$42);if(S.FActive$2){S.FActive$2=false;TW3CustomControl.ReleaseCapture(S);if(S.FSelectMask!==null){LTemp$7=S.FSelectMask;S.FSelectMask=null;TW3MovableControl.fxFadeOut$1(LTemp$7,0.299,function(){TObject.Free(LTemp$7)})}}},ObjectReady:function(S){TW3MovableControl.ObjectReady(S)},Resize:function(S){var x$86=0;var y$43=0;var dx$11=0;var dy$10=0;var LLayout={clRows:[]};var LRow$1={lrWidth:0,lrHeight:0,lrCols:[]};var LItem$18=null;TW3MovableControl.Resize(S);LLayout=TWbIconView.CalculateLayout(S);if(LLayout.clRows.length<1)return;var $tq;for(x$86=0,$tq=LLayout.clRows.length;x$86<$tq;x$86++){Copy$TCLayoutRow(LLayout.clRows[x$86],LRow$1);var $tr;for(y$43=0,$tr=LRow$1.lrCols.length;y$43<$tr;y$43++){LItem$18=LRow$1.lrCols[y$43].leNode;dx$11=LRow$1.lrCols[y$43].leX;dy$10=LRow$1.lrCols[y$43].leY;if($SetIn(LItem$18.FOptions$7,1,0,2)){TW3MovableControl.SetBounds(LItem$18,dx$11,dy$10,(TW3MovableControl.ClientWidth(S)-S.FSpacing*2),TW3MovableControl.GetHeight$(LItem$18))}else TW3MovableControl.MoveTo(LItem$18,dx$11,dy$10)}}},UnSelectAll:function(S){var LLitems=[],xi=0;if(!$SetIn(S.FComponentState,5,0,6)){LLitems=TWbIconView.GetItemList(S);var $ts;for(xi=0,$ts=LLitems.length;xi<$ts;xi++){if(LLitems[xi].FSelected)TWbIconView.UnSelectItem(S,LLitems[xi])}}},UnSelectItem:function(S,Item$1){if(Item$1!==null){if(Item$1.FSelected){if(Item$1===S.FSelectItem){if(S.FOnItemSelect)S.FOnItemSelect(S,null,S.FSelectItem);if(Item$1.OnUnSelected)Item$1.OnUnSelected(S.FSelectItem);S.FSelectItem=null}
TWbListItem.SetSelected$(Item$1,false)}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown$:function($){return $.ClassType.MouseDown.apply($.ClassType,arguments)},MouseMove$:function($){return $.ClassType.MouseMove.apply($.ClassType,arguments)},MouseUp$:function($){return $.ClassType.MouseUp.apply($.ClassType,arguments)},SetEnabled:TW3CustomControl.SetEnabled};TWbIconView.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
function Copy$TCLayoutRow(s,d){d.lrWidth=s.lrWidth;d.lrHeight=s.lrHeight;d.lrCols=s.lrCols;return d}
function Clone$TCLayoutRow($){return{lrWidth:$.lrWidth,lrHeight:$.lrHeight,lrCols:$.lrCols}}
function Copy$TCLayoutElement(s,d){d.leNode=s.leNode;d.leX=s.leX;d.leY=s.leY;return d}
function Clone$TCLayoutElement($){return{leNode:$.leNode,leX:$.leX,leY:$.leY}}
function Create$149(Node,x$87,y$44){var R={leNode:null,leX:0,leY:0};R.leNode=Node;R.leX=x$87;R.leY=y$44;return R}
function Copy$TCLayout(s,d){d.clRows=s.clRows;return d}
function Clone$TCLayout($){return{clRows:$.clRows}}
var TWbPreferences={$ClassName:"TWbPreferences",$Parent:TJSONStructure,$Init:function($){TJSONStructure.$Init($)},Create$56:function(S){TJSONStructure.Create$56(S);TW3Structure.WriteBool(S,"window.effects.open",true);TW3Structure.WriteBool(S,"window.effects.close",true);TW3Structure.WriteBool(S,"window.effects.minimize",false);TW3Structure.WriteBool(S,"window.effects.maximize",false);return S},Destroy:TJSONStructure.Destroy,Clear$4:TJSONStructure.Clear$4,LoadFromStream$2:TJSONStructure.LoadFromStream$2,Read$3:TJSONStructure.Read$3,SaveToStream$2:TJSONStructure.SaveToStream$2,Write$3:TJSONStructure.Write$3,Create$56$:function($){return $.ClassType.Create$56($)}};TWbPreferences.$Intf={IW3StructureReadAccess:[TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TJSONStructure.Read$3],IW3StructureWriteAccess:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TJSONStructure.Write$3],IW3Structure:[TW3Structure.WriteString$1,TW3Structure.WriteInt,TW3Structure.WriteBool,TW3Structure.WriteFloat,TW3Structure.WriteDateTime$1,TW3Structure.ReadString$1,TW3Structure.ReadInt,TW3Structure.ReadBool,TW3Structure.ReadFloat,TW3Structure.ReadDateTime$1,TJSONStructure.Read$3,TJSONStructure.Write$3]}
var TW3DisplayViewArangeType=["dvaSizeToView","dvaVStack","dvaHStack"];var TW3DisplayView={$ClassName:"TW3DisplayView",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FArrange=false;$.FArrangeKind=0},ArrangeChildren:function(S,aKind){var x$88=0;var dx$12=0;var dy$11=0;var mObj$7=null;var mCount$3=0;var mRect={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};var wd$4=0;var hd$3=0;mCount$3=TW3TagContainer.GetChildCount(S);if(mCount$3>0){mRect=TW3MovableControl.GetBoundsRect(S);switch(aKind){case 0:wd$4=TRect$Width$3(mRect);hd$3=TRect$Height$3(mRect);var $tt;for(x$88=0,$tt=mCount$3;x$88<$tt;x$88++){mObj$7=TW3TagContainer.GetChildObject(S,x$88);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox)))TW3MovableControl.SetSize$3($As(mObj$7,TW3CustomControl),wd$4,hd$3)}
break;case 1:dy$11=mRect.Top$3;wd$4=TRect$Width$3(mRect);var $tu;for(x$88=0,$tu=mCount$3;x$88<$tu;x$88++){mObj$7=TW3TagContainer.GetChildObject(S,x$88);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox))){hd$3=TW3MovableControl.GetHeight$($As(mObj$7,TW3CustomControl));TW3MovableControl.SetBounds($As(mObj$7,TW3CustomControl),mRect.Left$3,dy$11,wd$4,hd$3);(dy$11+=hd$3)}}
break;case 2:dx$12=mRect.Left$3;hd$3=TRect$Height$3(mRect);var $tv;for(x$88=0,$tv=mCount$3;x$88<$tv;x$88++){mObj$7=TW3TagContainer.GetChildObject(S,x$88);if($Is(mObj$7,TW3CustomControl)&&(!$Is(mObj$7,TW3BlockBox))){wd$4=TW3MovableControl.GetWidth$($As(mObj$7,TW3CustomControl));TW3MovableControl.SetBounds($As(mObj$7,TW3CustomControl),dx$12,mRect.Top$3,wd$4,hd$3);(dx$12+=wd$4)}}
break}}},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FArrange=true;S.FArrangeKind=0},Resize:function(S){TW3MovableControl.Resize(S);if(S.FArrange)TW3DisplayView.ArrangeChildren(S,S.FArrangeKind)},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);w3_setAttrib(S.FHandle$1,"tabindex",1)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3DisplayView.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Display={$ClassName:"TW3Display",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FFooter$1=$.FHeader$1=$.FOnOrient=$.FView=null},FinalizeObject:function(S){TObject.Free(S.FView);if(S.FHeader$1){TObject.Free(S.FHeader$1);S.FHeader$1=null}
if(S.FFooter$1){TObject.Free(S.FFooter$1);S.FFooter$1=null}
TW3CustomControl.FinalizeObject(S)},GetHeightOfChildren:function(S){var R=0;var x$89=0;var mObj$8=null;var $tw;for(x$89=0,$tw=TW3TagContainer.GetChildCount(S);x$89<$tw;x$89++){mObj$8=TW3TagContainer.GetChildObject(S,x$89);if(mObj$8!==S.FView&&$Is(mObj$8,TW3CustomControl)&&(!$Is(mObj$8,TW3BlockBox))){(R+=TW3MovableControl.GetHeight$($As(mObj$8,TW3CustomControl)))}}
return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FView=TW3TagContainer.Create$41$($New(TW3DisplayView),S);TW3MovableControl.SetTop(S.FView,5)},PositionFormInView:function(S,aForm$3){var mApp=null;var dx$13=0;var dy$12=0;if(aForm$3){mApp=Application();if((mApp!==null)&&(!mApp.FTerminated)){dx$13=TW3ScrollInfo.GetScrollLeft(TW3CustomControl.GetScrollInfo(S.FView));dy$12=TW3ScrollInfo.GetScrollTop(TW3CustomControl.GetScrollInfo(S.FView));TW3MovableControl.SetBounds(aForm$3,dx$13,dy$12,TW3MovableControl.GetWidth$(S.FView),TW3MovableControl.GetHeight$(S.FView))}}else{throw EW3Exception.CreateFmt($New(EW3Screen),$R[0],["TW3Display.PositionFormInView",TObject.ClassName(S.ClassType),"Form parameter was NIL error"])}},Resize:function(S){var mTotal$3=0;var mList$2=[],x$90=0;var dy$13=0;var mObj$9=null;TW3MovableControl.Resize(S);mTotal$3=TW3Display.GetHeightOfChildren(S);TW3MovableControl.SetHeight$(S.FView,(TW3MovableControl.GetHeight$(S)-mTotal$3));mList$2=TW3CustomControl.GetChildrenSortedByYPos(S);dy$13=0;var $tx;for(x$90=0,$tx=mList$2.length;x$90<$tx;x$90++){mObj$9=$As(mList$2[x$90],TW3CustomControl);if(!$Is(mObj$9,TW3BlockBox)){TW3MovableControl.SetBounds(mObj$9,0,dy$13,TW3MovableControl.ClientWidth(S),TW3MovableControl.GetHeight$(mObj$9));(dy$13+=TW3MovableControl.GetHeight$(mObj$9))}else TW3MovableControl.SetBounds(mObj$9,0,0,TW3MovableControl.GetWidth$(S),TW3MovableControl.GetHeight$(S))}},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);w3_setAttrib(S.FHandle$1,"tabindex",1)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3Display.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3BlockBox={$ClassName:"TW3BlockBox",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3BlockBox.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TModalResult=["mrCancel","mrOK"];var TFormEntryEffect=["feNone","feFromRight","feToLeft"];var TDisplayOrientation=["soPortrait","soLandscapeLeft","soLandscapeRight","soFlipped","soPortraitPrimary","soPortraitSecondary","soLandscapePrimary","soLandscapeSecondary","soLandscape","soDefault"];var TApplicationFormsList={$ClassName:"TApplicationFormsList",$Parent:TObject,$Init:function($){TObject.$Init($);$.FFormOwner=null;$.FList=[];$.FNextAutoCreate=0},AutoCreateForm:function(S,aFormInfo){if(!aFormInfo.Instance){aFormInfo.Instance=TW3TagContainer.Create$41$($NewDyn(aFormInfo.FormClass,""),S.FFormOwner);TW3CustomApplication.RegisterFormInstance(Application(),aFormInfo.Instance,aFormInfo.IsMainForm)}
aFormInfo.InitialAutoCreateDone=true},AutoCreateForms:function(S,owner){var a$335=0;var info=null;var a$336=[];S.FFormOwner=owner;S.FNextAutoCreate=0;a$336=S.FList;var $ty;for(a$335=0,$ty=a$336.length;a$335<$ty;a$335++){info=a$336[a$335];TApplicationFormsList.AutoCreateForm(S,info);++S.FNextAutoCreate;if(info.IsMainForm)break}
TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(S,TApplicationFormsList.AutoCreateNextForm),50)},AutoCreateNextForm:function(S){var iForm=0;var info$1=null;var $tz;for(iForm=S.FNextAutoCreate,$tz=S.FList.length;iForm<$tz;iForm++){info$1=S.FList[iForm];if(info$1.IsAutoCreated&&(!(info$1.Instance!==null))&&(!info$1.InitialAutoCreateDone)){TApplicationFormsList.AutoCreateForm(S,info$1);++S.FNextAutoCreate;if(S.FNextAutoCreate<(S.FList.length-1))TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(S,TApplicationFormsList.AutoCreateNextForm),50);break}}},IndexOfFormClass:function(S,aFormClass){var R=0;var $t01;for(R=0,$t01=S.FList.length;R<$t01;R++){if(S.FList[R].FormClass==aFormClass)return R}
R=-1;return R},IndexOfUnitName:function(S,aUnitName){var R=0;var $t11;for(R=0,$t11=S.FList.length;R<$t11;R++){if(SameText(S.FList[R].UnitName,aUnitName))return R}
R=-1;return R},RegisterAutoCreate:function(S,aUnitName$1,isAutoCreate,isMainForm$1){var formInfo=null;var idx=0;idx=TApplicationFormsList.IndexOfUnitName(S,aUnitName$1);if(idx>=0){formInfo=S.FList[idx]}else{formInfo=TObject.Create($New(TApplicationFormInfo));formInfo.UnitName=aUnitName$1;S.FList.push(formInfo)}
formInfo.IsMainForm=isMainForm$1;formInfo.IsAutoCreated=isAutoCreate},RegisterForm:function(S,aUnitName$2,aFormClass$1){var formInfo$1=null;var idx$1=0;idx$1=TApplicationFormsList.IndexOfUnitName(S,aUnitName$2);if(idx$1>=0){formInfo$1=S.FList[idx$1]}else{formInfo$1=TObject.Create($New(TApplicationFormInfo));formInfo$1.UnitName=aUnitName$2;S.FList.push(formInfo$1)}
formInfo$1.FormClass=aFormClass$1},RegisterFormInstance$1:function(S,aFormClass$2,aFormInstance){var formInfo$2=null;var idx$2=0;idx$2=TApplicationFormsList.IndexOfFormClass(S,aFormClass$2);if(idx$2>=0){formInfo$2=S.FList[idx$2]}else{formInfo$2=TObject.Create($New(TApplicationFormInfo));formInfo$2.FormClass=aFormClass$2;S.FList.push(formInfo$2)}
formInfo$2.Instance=aFormInstance;formInfo$2.InitialAutoCreateDone=true},UnregisterFormInstance:function(S,aFormInstance$1){var i$4=0;var $t21;for(i$4=0,$t21=S.FList.length;i$4<$t21;i$4++){if(S.FList[i$4].Instance===aFormInstance$1)S.FList[i$4].Instance=null}},Destroy:TObject.Destroy};var TApplicationFormInfo={$ClassName:"TApplicationFormInfo",$Parent:TObject,$Init:function($){TObject.$Init($);$.InitialAutoCreateDone=$.IsMainForm=$.IsAutoCreated=false;$.UnitName="";$.Instance=null;$.FormClass=null},Destroy:TObject.Destroy};function Forms$2(){var R=null;R=FormsFactory();return R};var EW3Screen={$ClassName:"EW3Screen",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var EW3Application$1={$ClassName:"EW3Application",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};function Application(){var R=null;R=Instance$1;return R};var TModalInfo={$ClassName:"TModalInfo",$Parent:TObject,$Init:function($){TObject.$Init($);$.OnOK=null;$.OnCancel=null;$.ModalForm=$.ModalPanel=$.OwnerForm=$.OpaqueMask=null},Destroy:TObject.Destroy};function FormsFactory(){var R=null;if(!GForms)GForms=TObject.Create($New(TApplicationFormsList));R=GForms;return R};var TW3ApplicationVersionInfo={$ClassName:"TW3ApplicationVersionInfo",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($)},Create$136:function(S,AOwner$18){TW3OwnedObject.Create$10(S,AOwner$18);return S},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3OwnedObject.Create$10};TW3ApplicationVersionInfo.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ApplicationInfo={$ClassName:"TW3ApplicationInfo",$Parent:TW3OwnedObject,$Init:function($){TW3OwnedObject.$Init($);$.FInfo=null},Create$10:function(S,AOwner$19){TW3OwnedObject.Create$10(S,AOwner$19);S.FInfo=TW3ApplicationVersionInfo.Create$136($NewDyn(TW3ApplicationInfo.GetVersionInfoClass(S),""),S);return S},GetVersionInfoClass:function(S){var R=null;R=TW3ApplicationVersionInfo;return R},Destroy:TObject.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10$:function($){return $.ClassType.Create$10.apply($.ClassType,arguments)}};TW3ApplicationInfo.$Intf={IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CustomForm={$ClassName:"TW3CustomForm",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCaption="";$.FInitialized$1=false},Create$41:function(S,AOwner$20){TW3TagContainer.Create$41(S,AOwner$20);TApplicationFormsList.RegisterFormInstance$1(Forms$2(),$AsClass(TObject.ClassType(S.ClassType),TW3CustomForm),S);return S},Destroy:function(S){TW3CustomApplication.UnRegisterFormInstance(Application(),S);TApplicationFormsList.UnregisterFormInstance(Forms$2(),S)},FormActivated:function(S){if(!S.FInitialized$1){S.FInitialized$1=true;TW3CustomForm.InitializeForm$(S);TW3CustomControl.LayoutChildren(S)}},FormDeactivated:function(S){},GetCaption:function(S){var R="";R=S.FCaption;return R},InitializeForm:function(S){},ObjectReady:function(S){TW3MovableControl.ObjectReady(S)},SetCaption:function(S,NewCaption){S.FCaption=NewCaption},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S);w3_SetStyle(S.FHandle$1,TW3CustomBrowserAPI.Prefix(BrowserAPI(),"Transform"),"none");TW3CustomControl.SetStyleClass(S,"TW3CustomForm")},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41$:function($){return $.ClassType.Create$41.apply($.ClassType,arguments)},QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,InitializeForm$:function($){return $.ClassType.InitializeForm($)}};TW3CustomForm.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Form={$ClassName:"TW3Form",$Parent:TW3CustomForm,$Init:function($){TW3CustomForm.$Init($)},Destroy:TW3CustomForm.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomForm.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3CustomForm.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3CustomForm.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,InitializeForm:TW3CustomForm.InitializeForm};TW3Form.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3AlertResult=["roYes","roNo","roOK","roCancel"];var TW3AlertOptions=["aoYes","aoNo","aoYesNo","aoOK","aoCancel","aoOKCancel"];var TW3AlertDialog={$ClassName:"TW3AlertDialog",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FNo=$.FOnSelect=$.FText=$.FTitle=$.FYes=null;$.FOptions$6=0;$.FReady=false},FinalizeObject:function(S){TObject.Free(S.FTitle);TObject.Free(S.FText);TObject.Free(S.FYes);TObject.Free(S.FNo);TW3CustomControl.FinalizeObject(S)},HandleNoClick:function(S,Sender$18){if(S.FOnSelect){switch(S.FOptions$6){case 0:case 2:case 1:S.FOnSelect(S,1);break;case 3:case 4:case 5:S.FOnSelect(S,3);break}}},HandleYesClick:function(S,Sender$19){if(S.FOnSelect){switch(S.FOptions$6){case 0:case 2:case 1:S.FOnSelect(S,0);break;case 3:case 4:case 5:S.FOnSelect(S,2);break}}},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FYes=TW3TagContainer.Create$41$($New(TW3AlertButton),S);TW3MovableControl.SetSize$3(S.FYes,120,42);TW3Button.SetCaption$1(S.FYes,"OK");TW3CustomControl._setMouseClick(S.FYes,$Event1(S,TW3AlertDialog.HandleYesClick));TW3MovableControl.SetVisible(S.FYes,false);S.FNo=TW3TagContainer.Create$41$($New(TW3AlertButton),S);TW3MovableControl.SetSize$3(S.FNo,120,42);TW3Button.SetCaption$1(S.FNo,"Cancel");TW3CustomControl._setMouseClick(S.FNo,$Event1(S,TW3AlertDialog.HandleNoClick));TW3MovableControl.SetVisible(S.FNo,false);S.FTitle=TW3TagContainer.Create$41$($New(TW3Label),S);S.FText=TW3TagContainer.Create$41$($New(TW3Label),S)},Resize:function(S){var hd$4=0;var wd$5=0;var dx$14=0;var dy$14=0;TW3MovableControl.Resize(S);wd$5=TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(S));hd$4=TW3ScrollInfo.GetScrollHeight(TW3CustomControl.GetScrollInfo(S));TW3MovableControl.SetBounds(S.FTitle,8,8,(wd$5-8*2),32);TW3MovableControl.SetBounds(S.FText,8,(TW3MovableControl.GetTop(S.FTitle)+TW3MovableControl.GetHeight$(S.FTitle)+2),(wd$5-8*2),(100-8));if($SetIn(S.FComponentState,2,0,6)&&S.FReady){(wd$5-=(8*2));if((S.FOptions$6==2||S.FOptions$6==5))(wd$5-=8);if((S.FOptions$6==0||S.FOptions$6==3||S.FOptions$6==1||S.FOptions$6==4)){if((S.FOptions$6==0||S.FOptions$6==3)){dy$14=TW3MovableControl.GetHeight$(S)-(TW3MovableControl.GetHeight$(S.FYes)+20);TW3MovableControl.SetBounds(S.FYes,10,dy$14,wd$5,TW3MovableControl.GetHeight$(S.FYes))}else if((S.FOptions$6==1||S.FOptions$6==4)){dy$14=TW3MovableControl.GetHeight$(S)-(TW3MovableControl.GetHeight$(S.FNo)+20);TW3MovableControl.SetBounds(S.FNo,10,dy$14,wd$5,TW3MovableControl.GetHeight$(S.FNo))}}else if((S.FOptions$6==2||S.FOptions$6==5)){dy$14=hd$4-(TW3MovableControl.GetHeight$(S.FYes)+8);TW3MovableControl.SetBounds(S.FYes,8,dy$14,($Div(wd$5,2)),TW3MovableControl.GetHeight$(S.FYes));dx$14=TW3ScrollInfo.GetScrollWidth(TW3CustomControl.GetScrollInfo(S))-($Div(wd$5,2));(dx$14-=8);TW3MovableControl.SetBounds(S.FNo,dx$14,dy$14,($Div(wd$5,2)),TW3MovableControl.GetHeight$(S.FNo))}}},SetupDialog:function(S,aTitle,aText$1,aOptions){if(!S.FReady){TW3TagObj.BeginUpdate(S);try{S.FOptions$6=aOptions;TW3Label.SetCaption$2(S.FTitle,aTitle);TW3Label.SetCaption$2(S.FText,aText$1);switch(S.FOptions$6){case 0:case 3:TW3MovableControl.SetVisible(S.FYes,true);TW3MovableControl.SetVisible(S.FNo,false);break;case 1:case 4:TW3MovableControl.SetVisible(S.FNo,true);TW3MovableControl.SetVisible(S.FYes,false);break;case 2:case 5:TW3MovableControl.SetVisible(S.FYes,true);TW3MovableControl.SetVisible(S.FNo,true);break}
switch(S.FOptions$6){case 0:TW3Button.SetCaption$1(S.FYes,"Yes");break;case 1:TW3Button.SetCaption$1(S.FNo,"No");break;case 3:TW3Button.SetCaption$1(S.FYes,"OK");break;case 4:TW3Button.SetCaption$1(S.FNo,"Cancel");break;case 2:TW3Button.SetCaption$1(S.FYes,"Yes");TW3Button.SetCaption$1(S.FNo,"No");break;case 5:TW3Button.SetCaption$1(S.FYes,"OK");TW3Button.SetCaption$1(S.FNo,"Cancel");break}
TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FTitle),"Helvetica, Arial, sans-serif");TW3CustomFont.SetWeight$(TW3CustomControl.a$47(S.FTitle),"bold");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FTitle),24);TW3Label.SetTextAlign$1(S.FTitle,1);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FTitle),16777215);S.FTitle.FContainer.FHandle$1.style["text-shadow"]="0 -1px 0 rgba(0,0,0,.8)";TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FText),16);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FText),"Helvetica, Arial, sans-serif");TW3Label.SetTextAlign$1(S.FText,1);S.FReady=true}finally{TW3TagObj.AddToComponentState(S,[24]);TW3TagObj.EndUpdate(S)}}},StyleTagObject:function(S){TW3CustomControl.StyleTagObject(S)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3AlertDialog.$Intf={IW3AlertDialog:[TW3AlertDialog.SetupDialog],IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Button={$ClassName:"TW3Button",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FCaption$1="";$.FIgnoreMouse=0;$.FPressed=false;$.FTouchEnd=null;$.FTouchMove=null;$.FTouchX=$.FTouchY=0},CBClick:function(S,eventObj$15){if(S.FPressed){TW3Button.ResetClick(S);TW3CustomControl.CBClick(S,eventObj$15)}else TW3Button.ResetClick(S)},CBKeyDown:function(S,eventObj$16){TW3CustomControl.CBKeyDown(S,eventObj$16);if(TW3CustomControl.GetEnabled$(S)&&(eventObj$16.keyCode==13||eventObj$16.keyCode==32))TW3Button.SetPressed(S,true)},CBKeyUp:function(S,eventObj$17){TW3CustomControl.CBKeyDown(S,eventObj$17);switch(eventObj$17.keyCode){case 13:case 32:if(TW3CustomControl.GetEnabled$(S)&&S.FPressed)TW3CustomControl.CBClick$(S,eventObj$17);break;case 27:TW3Button.SetPressed(S,false);break}},CBMouseDown:function(S,eventObj$18){TW3CustomControl.CBMouseDown(S,eventObj$18);if(PerformanceTimer.Now$1()>=S.FIgnoreMouse){if(TW3CustomControl.GetEnabled$(S)&&eventObj$18.button==0){TW3Button.SetPressed(S,true);TW3CustomControl.SetCapture(S)}}},CBMouseMove:function(S,eventObj$19){TW3CustomControl.CBMouseMove(S,eventObj$19);if(TW3CustomControl.a$48(S))TW3Button.SetPressed(S,TRect$ContainsPos$1(TW3MovableControl.ScreenRect(S),eventObj$19.clientX,eventObj$19.clientY))},CBMouseUp:function(S,eventObj$20){TW3CustomControl.CBMouseUp(S,eventObj$20);if(TW3CustomControl.a$48(S)&&eventObj$20.button==0)TW3CustomControl.CBClick$(S,eventObj$20)},GetCaption$1:function(S){var R="";R=S.FCaption$1;return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);TW3MovableControl.SetWidth$(S,100);TW3MovableControl.SetHeight$(S,32);S.FHandle$1.addEventListener("touchstart",function(e$36){var t=null;if(!TW3CustomControl.GetEnabled$(S))return;if(S.FPressed)return;TW3Button.SetPressed(S,true);e$36.stopPropagation();S.FHandle$1.addEventListener("touchmove",S.FTouchMove,false);document.body.addEventListener("touchend",S.FTouchEnd,false);t=e$36.touches[0];S.FTouchX=parseInt(t.clientX,10);S.FTouchY=parseInt(t.clientY,10)},false);S.FTouchMove=function(e$37){var t$1=null;t$1=e$37.touches[0];if(Math.abs(t$1.clientX-S.FTouchX)>10||Math.abs(t$1.clientY-S.FTouchY)>10)TW3Button.ResetClick(S)};S.FTouchEnd=function(e$38){TW3CustomControl.CBClick$(S,e$38);S.FIgnoreMouse=PerformanceTimer.Now$1()+1000};TW3CustomControl._setMouseDown(S,null);TW3CustomControl._setMouseUp(S,null);TW3CustomControl._setMouseMove(S,null);TW3CustomControl._setKeyDown(S,null);TW3CustomControl._setKeyUp(S,null)},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("button");return R},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3Button.SetCaption$1(S,S.FCaption$1)},ResetClick:function(S){TW3Button.SetPressed(S,false);if(TW3CustomControl.a$48(S)){TW3CustomControl.ReleaseCapture(S)}else{S.FHandle$1.removeEventListener("touchmove",S.FTouchMove,false);document.body.removeEventListener("touchend",S.FTouchEnd,false)}},SetCaption$1:function(S,NewCaption$1){if($SetIn(S.FComponentState,2,0,6)){S.FCaption$1=NewCaption$1;TW3TagObj.a$40(S,S.FCaption$1)}else S.FCaption$1=NewCaption$1},SetPressed:function(S,DownState){if(S.FPressed!=DownState){S.FPressed=DownState;switch(DownState){case true:TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,PressedCSSClass);break;case false:TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,PressedCSSClass);break}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType,arguments)},CBKeyDown$:function($){return $.ClassType.CBKeyDown.apply($.ClassType,arguments)},CBKeyUp$:function($){return $.ClassType.CBKeyUp.apply($.ClassType,arguments)},CBMouseDown$:function($){return $.ClassType.CBMouseDown.apply($.ClassType,arguments)},CBMouseMove$:function($){return $.ClassType.CBMouseMove.apply($.ClassType,arguments)},CBMouseUp$:function($){return $.ClassType.CBMouseUp.apply($.ClassType,arguments)},GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3Button.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3AlertButton={$ClassName:"TW3AlertButton",$Parent:TW3Button,$Init:function($){TW3Button.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3Button.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3Button.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3Button.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3Button.CBClick,CBKeyDown:TW3Button.CBKeyDown,CBKeyUp:TW3Button.CBKeyUp,CBMouseDown:TW3Button.CBMouseDown,CBMouseMove:TW3Button.CBMouseMove,CBMouseUp:TW3Button.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3AlertButton.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var PerformanceTimer={$ClassName:"PerformanceTimer",$Parent:TObject,$Init:function($){TObject.$Init($)},PrepareGetNow:function(){if(window.performance&&performance.now){vGetNow=performance;vIsHighResolution=true}else{vIsHighResolution=false;if(!Date.now){Date.now=function(){return+(new Date)}};vGetNow=Date}},Now$1:function(){var R=0;if(!vGetNow)PerformanceTimer.PrepareGetNow();R=Number(vGetNow.now());return R},Destroy:TObject.Destroy};var TW3CustomHTMLElement={$ClassName:"TW3CustomHTMLElement",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3CustomHTMLElement.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3IFrameHTMLElement={$ClassName:"TW3IFrameHTMLElement",$Parent:TW3CustomHTMLElement,$Init:function($){TW3CustomHTMLElement.$Init($);$.OnLoad=null},a$147:function(S,Value$34){S.FHandle$1.src=Value$34},a$146:function(S){return TVariant.Asstring(S.FHandle$1.src)},CBHandleOnLoad:function(S){if(S.OnLoad)S.OnLoad(S)},FinalizeObject:function(S){S.FHandle$1.onload=null;TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FHandle$1.onload=$Event0(S,TW3IFrameHTMLElement.CBHandleOnLoad)},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("iframe");return R},Resize:function(S){S.FHandle$1.width=w3_GetStyle(S.FHandle$1,"width");S.FHandle$1.height=w3_GetStyle(S.FHandle$1,"height")},SetHeight:function(S,NewHeight$5){if(S.FHandle$1){S.FHandle$1.height=TInteger.ToPxStr(NewHeight$5)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3IFrameHTMLElement.SetHeight",S,"invalid control handle error")}},SetWidth:function(S,NewWidth$5){if(S.FHandle$1){S.FHandle$1.width=TInteger.ToPxStr(NewWidth$5)}else{throw EW3Exception.Create$16($New(EW3TagObj),"TW3IFrameHTMLElement.SetWidth",S,"invalid control handle error")}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight$:function($){return $.ClassType.SetHeight.apply($.ClassType,arguments)},SetWidth$:function($){return $.ClassType.SetWidth.apply($.ClassType,arguments)},SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3IFrameHTMLElement.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3DIVHtmlElement={$ClassName:"TW3DIVHtmlElement",$Parent:TW3CustomHTMLElement,$Init:function($){TW3CustomHTMLElement.$Init($)},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("div");return R},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3DIVHtmlElement.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CustomPanel={$ClassName:"TW3CustomPanel",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3CustomPanel.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Panel={$ClassName:"TW3Panel",$Parent:TW3CustomPanel,$Init:function($){TW3CustomPanel.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3Panel.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ToggleSwitch={$ClassName:"TW3ToggleSwitch",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FChecked=false;$.FKnob=$.FOffText=$.FOnText=null},FinalizeObject:function(S){TObject.Free(S.FKnob);TObject.Free(S.FOffText);TObject.Free(S.FOnText);TW3CustomControl.FinalizeObject(S)},HandleMouseClick:function(S,Sender$20){if(!$SetIn(S.FComponentState,5,0,6)){if(TW3CustomControl.GetEnabled$(S))TW3ToggleSwitch.Toggle(S)}},HandleTouch:function(S,Sender$21,Info$2){if(TW3TouchList.a$92(TW3TouchData.GetTouches(Info$2),0).target==S.FKnob.FHandle$1)TW3ToggleSwitch.Toggle(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FOnText=TW3TagContainer.Create$41$($New(TW3ToggleOnLabel),S);TW3Label.SetCaption$2(S.FOnText,"ON");TW3Label.SetTextAlign$1(S.FOnText,1);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FOnText),16777215);S.FOffText=TW3TagContainer.Create$41$($New(TW3ToggleOffLabel),S);TW3Label.SetCaption$2(S.FOffText,"OFF");TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FOffText),0);TW3Label.SetTextAlign$1(S.FOffText,1);S.FKnob=TW3TagContainer.Create$41$($New(TW3ToggleKnob),S);TW3CustomControl._setMouseClick(S,$Event1(S,TW3ToggleSwitch.HandleMouseClick));TW3CustomControl._setTouchEnds(S,$Event2(S,TW3ToggleSwitch.HandleTouch))},ObjectReady:function(S){var LChecked=false;TW3MovableControl.ObjectReady(S);if(S.FChecked){LChecked=S.FChecked;S.FChecked=false;TW3ToggleSwitch.SetChecked(S,LChecked)}},Resize:function(S){var LTemp$8=0;var wd$6=0;var hd$5=0;var dx$15=0;TW3MovableControl.Resize(S);wd$6=TW3MovableControl.ClientWidth(S);hd$5=TW3MovableControl.ClientHeight(S);if(wd$6>0&&hd$5>0){LTemp$8=$Div(wd$6,2);if(TW3MovableControl.GetWidth$(S.FKnob)!=LTemp$8)TW3MovableControl.SetWidth$(S.FKnob,(LTemp$8+7-2));TW3MovableControl.SetHeight$(S.FKnob,hd$5);dx$15=TW3MovableControl.GetLeft(S.FKnob);if(dx$15<1)dx$15=1;TW3MovableControl.SetBounds(S.FKnob,dx$15,1,TW3MovableControl.GetWidth$(S.FKnob),(hd$5-2));TW3MovableControl.SetBounds(S.FOnText,0,0,LTemp$8,hd$5);TW3MovableControl.SetBounds(S.FOffText,LTemp$8,0,LTemp$8,hd$5)}},SetChecked:function(S,aValue$47){if(!$SetIn(S.FComponentState,5,0,6)){if($SetIn(S.FComponentState,2,0,6)){if(aValue$47!=S.FChecked)TW3ToggleSwitch.Toggle(S)}else S.FChecked=aValue$47}},SetEnabled:function(S,EnabledValue$2){TW3CustomControl.SetEnabled(S,EnabledValue$2);switch(EnabledValue$2){case true:TW3MovableControl.SetAlpha(S.FKnob,255);TW3MovableControl.SetUseAlpha(S.FKnob,false);break;case false:TW3MovableControl.SetAlpha(S.FKnob,128);TW3MovableControl.SetUseAlpha(S.FKnob,true);break}},SupportAdjustment:function(S){var R=false;R=false;return R},Toggle:function(S){var dx$16=0;if(!$SetIn(S.FComponentState,5,0,6)){if($SetIn(S.FComponentState,2,0,6)){if(TW3CustomControl.GetEnabled$(S)){switch(S.FChecked){case true:TW3MovableControl.fxMoveTo$1(S.FKnob,1,TW3MovableControl.GetTop(S.FKnob),0.12,function(){S.FChecked=false;if(S.FOnChanged)S.FOnChanged(S)});break;case false:dx$16=($Div(TW3MovableControl.ClientWidth(S),2))-7+1;TW3MovableControl.fxMoveTo$1(S.FKnob,dx$16,TW3MovableControl.GetTop(S.FKnob),0.12,function(){S.FChecked=true;if(S.FOnChanged)S.FOnChanged(S)});break}}}else S.FChecked=!S.FChecked}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment$:function($){return $.SupportAdjustment($)},CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3ToggleSwitch.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ToggleOnLabel={$ClassName:"TW3ToggleOnLabel",$Parent:TW3Label,$Init:function($){TW3Label.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3Label.FinalizeObject,InitializeObject:TW3Label.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3Label.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3Label.SetEnabled};TW3ToggleOnLabel.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ToggleOffLabel={$ClassName:"TW3ToggleOffLabel",$Parent:TW3Label,$Init:function($){TW3Label.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3Label.FinalizeObject,InitializeObject:TW3Label.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3Label.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3Label.SetEnabled};TW3ToggleOffLabel.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ToggleKnob={$ClassName:"TW3ToggleKnob",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3ToggleKnob.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ToolbarButton={$ClassName:"TW3ToolbarButton",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.GroupIndex=0;$.AllowAllUp=false;$.FCaption$4="";$.FGlyph$1=$.FOnDestroy=null},CBClick:function(S,eventObj$21){if(S.GroupIndex>0){if(!TW3ToolbarButton.GetDown(S)){TW3ToolbarButton.MakeGroupUp(S,S.GroupIndex);TW3ToolbarButton.SetDown(S,true)}else if(S.AllowAllUp)TW3ToolbarButton.SetDown(S,false)}
TW3CustomControl.CBClick(S,eventObj$21)},ChangeCaption:function(S,aNewCaption){var mHtml="";var wd$7=0,hd$6=0;S.FCaption$4=aNewCaption;if(TW3Image.GetReady(S.FGlyph$1)){wd$7=TW3Image.GetPixelWidth(S.FGlyph$1);hd$6=TW3Image.GetPixelheight(S.FGlyph$1);mHtml=mHtml+Format("<img src=\""+TW3Image.GetSrc(S.FGlyph$1)+"\" width=%s height=%s>",[wd$7.toString()+"px",hd$6.toString()+"px"]);mHtml=mHtml+"<br>"}
mHtml=mHtml+S.FCaption$4;TW3TagObj.a$40(S,mHtml)},Create$150:function(S,AOwner$21,OnDestroy){TW3TagContainer.Create$41(S,AOwner$21);S.FOnDestroy=OnDestroy;return S},Destroy:function(S){if(S.FOnDestroy)S.FOnDestroy(S);TW3TagObj.Destroy(S)},FinalizeObject:function(S){TObject.Free(S.FGlyph$1);TW3CustomControl.FinalizeObject(S)},GetDown:function(S){var R=false;R=TW3TagStyle.IndexOf$2(TW3CustomControl.GetTagStyle(S),"ButtonDown")>=0;return R},HandleGlyphReady:function(S,Sender$22){var mTemp$8="";mTemp$8=S.FCaption$4;S.FCaption$4="";TW3ToolbarButton.ChangeCaption(S,mTemp$8)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FGlyph$1=TW3TagContainer.Create$41$($New(TW3Image),null);TW3Image.SetOnLoad(S.FGlyph$1,$Event1(S,TW3ToolbarButton.HandleGlyphReady))},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("button");return R},MakeGroupUp:function(S,GroupIndex$1){var LButton=null;var i$5=0;var $t31;for(i$5=0,$t31=TW3Toolbar.a$144(TW3ToolbarButton.Toolbar(S));i$5<$t31;i$5++){LButton=TW3Toolbar.a$145(TW3ToolbarButton.Toolbar(S),i$5);if(LButton.GroupIndex==GroupIndex$1){if(TW3ToolbarButton.GetDown(LButton))TW3ToolbarButton.SetDown(LButton,false)}}},SetCaption$4:function(S,aNewCaption$1){if(aNewCaption$1!=S.FCaption$4)TW3ToolbarButton.ChangeCaption(S,aNewCaption$1)},SetDown:function(S,Value$35){var LDown=false;LDown=TW3ToolbarButton.GetDown(S);switch(Value$35){case true:if(!LDown)TW3TagStyle.Add$2(TW3CustomControl.GetTagStyle(S),"ButtonDown");break;case false:if(LDown)TW3TagStyle.RemoveByName(TW3CustomControl.GetTagStyle(S),"ButtonDown");break}},Toolbar:function(S){var R=null;R=$As(TW3TagContainer.a$46(S),TW3Toolbar);return R},Destroy$:function($){return $.ClassType.Destroy($)},AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick$:function($){return $.ClassType.CBClick.apply($.ClassType,arguments)},CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3ToolbarButton.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3Toolbar={$ClassName:"TW3Toolbar",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FBtnHeight=$.FBtnSpacing=$.FBtnWidth=0;$.FButtons=[]},a$145:function(S,idx$3){return S.FButtons[idx$3]},a$144:function(S){return S.FButtons.length},Add$5:function(S){var R=null;TW3TagObj.BeginUpdate(S);try{R=TW3ToolbarButton.Create$150($New(TW3ToolbarButton),S,function(Sender$23){TW3Toolbar.Remove$3(S,$As(Sender$23,TW3ToolbarButton))});TW3MovableControl.SetHeight$(R,S.FBtnHeight);TW3MovableControl.SetWidth$(R,S.FBtnWidth);S.FButtons.push(R)}finally{TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}
return R},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FBtnWidth=100;S.FBtnHeight=36;S.FBtnSpacing=2},Remove$3:function(S,button$7){var idx$4=0;idx$4=S.FButtons.indexOf(button$7);if(idx$4>=0){S.FButtons.splice(idx$4,1)}},Resize:function(S){var x$91=0;var dx$17=0;var dy$15=0;var LButton$1=null;var xItem=null;dx$17=S.FBtnSpacing;var $t41;for(x$91=0,$t41=TW3TagContainer.GetChildCount(S);x$91<$t41;x$91++){xItem=TW3TagContainer.GetChildObject(S,x$91);if($Is(xItem,TW3ToolbarButton)){LButton$1=$As(xItem,TW3ToolbarButton);dy$15=($Div(TW3MovableControl.ClientHeight(S),2))-($Div(S.FBtnHeight,2));TW3MovableControl.SetBounds(LButton$1,dx$17,dy$15,S.FBtnWidth,S.FBtnHeight);(dx$17+=(S.FBtnWidth+S.FBtnSpacing))}}},setBtnHeight:function(S,Value$36){if($SetIn(S.FComponentState,2,0,6)){Value$36=ClampInt(Value$36,16,TW3MovableControl.GetHeight$(S))}else Value$36=Math.max(Value$36,16);if(Value$36!=S.FBtnHeight){TW3TagObj.BeginUpdate(S);S.FBtnHeight=Value$36;TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}},setBtnSpacing:function(S,Value$37){Value$37=Math.max(Value$37,1);if(Value$37!=S.FBtnSpacing){S.FBtnSpacing=Value$37;TW3TagObj.BeginUpdate(S);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}},setBtnWidth:function(S,Value$38){Value$38=Math.max(Value$38,16);if(Value$38!=S.FBtnWidth){TW3TagObj.BeginUpdate(S);S.FBtnWidth=Value$38;TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S)}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3Toolbar.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
function TRequireError(){this.requireModules=[];Error.call(this)}
$Extend(Error,TRequireError,{"requireType":""});function Require(){var R=null;try{R=require}catch($e){var e$39=$W($e);throw EW3Exception.Create$16($New(EW3RequireJS),"Require",null,e$39.FMessage)}
return R};var EW3RequireJS={$ClassName:"EW3RequireJS",$Parent:EW3Exception,$Init:function($){EW3Exception.$Init($)},Destroy:Exception.Destroy};var TW3Storage={$ClassName:"TW3Storage",$Parent:TObject,$Init:function($){TObject.$Init($)},LoadImage$1:function(S,aFilename$1){var R=undefined;R=TW3Storage.LoadImage(S,aFilename$1,null);return R},LoadImage:function(S,aFilename$2,OnComplete){var R=undefined;R=new Image();if(THandleHelper$Valid$4(R)){if(OnComplete){R.onload=function(){OnComplete()}}
R.src=aFilename$2}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[32],[aFilename$2])}
return R},LoadScript$1:function(S,ScriptFile,OnComplete$1){var R=undefined;R=document.createElement("script");if(!THandleHelper$Valid$4(R)){throw EW3Exception.CreateFmt($New(EW3Exception),$R[31],[ScriptFile])}
if(OnComplete$1){R.onload=function(){OnComplete$1(ScriptFile,R,true)};R.onerror=function(){OnComplete$1(ScriptFile,R,false)}}
document.getElementsByTagName('head')[0].appendChild(R);R.setAttribute("src",ScriptFile);return R},Destroy:TObject.Destroy};function Copy$TW3PreLoadBatch(s,d){return d}
function Clone$TW3PreLoadBatch($){return{}}
var TW3HttpRequest={$ClassName:"TW3HttpRequest",$Parent:TObject,$Init:function($){TObject.$Init($);$.OnTimeout=null;$.OnError=null;$.OnLoad=null;$.OnReadyStateChange=null;$.OnDataReady=null;$.FheaderCache=$.FReqObj=null;$.FMethod=$.FURL$1=""},a$162:function(S){return String(TW3HttpRequest.a$160(S).responseXML)},a$161:function(S){return S.FReqObj.responseText},a$160:function(S){return S.FReqObj},Create$156:function(S){TObject.Create(S);S.FReqObj=new XMLHttpRequest();S.FReqObj.onreadystatechange=$Event0(S,TW3HttpRequest.HandleReadyStateChange);S.FReqObj.onerror=$Event0(S,TW3HttpRequest.HandleOnError);S.FReqObj.onload=$Event0(S,TW3HttpRequest.HandleOnLoad);S.FReqObj.ontimeout=$Event0(S,TW3HttpRequest.HandleOnTimeout);S.FheaderCache=THttpHeaders.Create$158($New(THttpHeaders));return S},Destroy:function(S){S.FReqObj.onreadystatechange=null;S.FReqObj=null;TObject.Free(S.FheaderCache);TObject.Destroy(S)},Get$1:function(S,aURL$1){TW3HttpRequest.Open$1(S,"GET",aURL$1);TW3HttpRequest.WriteHeaderCache(S);TW3HttpRequest.Send(S)},HandleOnError:function(S){if(S.OnError)S.OnError(S)},HandleOnLoad:function(S){if(S.OnLoad)S.OnLoad(S)},HandleOnTimeout:function(S){if(S.OnTimeout)S.OnTimeout(S)},HandleReadyStateChange:function(S){if(S.FReqObj.readyState==4&&(S.OnDataReady!==null))S.OnDataReady(S);if(S.OnReadyStateChange)S.OnReadyStateChange(S)},Open$1:function(S,aMeth,aURL$2){S.FMethod=aMeth;S.FURL$1=aURL$2;S.FReqObj.open(aMeth,aURL$2)},ResponseAsBinaryData:function(S){var R=null;var mView=null;var mRef$6=undefined;R=null;if(S.FReqObj.readyState==4&&S.FReqObj.response){mRef$6=S.FReqObj.response;if(TVariant.IsString(mRef$6)){R=TBinaryData.Create$57($New(TBinaryData),null);TBinaryData.Write$8(R,0,(String(mRef$6)))}else{mView=new Uint8Array(mRef$6);R=TBinaryData.Create$57($New(TBinaryData),new Uint8Array(mView))}}
return R},ResponseAsStream:function(S){var R=null;var mTemp$9=null;mTemp$9=TW3HttpRequest.ResponseAsBinaryData(S);if(mTemp$9!==null)R=TBinaryData.ToStream$1(mTemp$9);return R},Send:function(S){S.FReqObj.send()},WriteHeaderCache:function(S){var x$92=0;var LName$7="",LData$4="";if(THttpHeaders.Count$12(S.FheaderCache)>0){try{var $t51;for(x$92=0,$t51=THttpHeaders.Count$12(S.FheaderCache);x$92<$t51;x$92++){LName$7=THttpHeaders.a$175(S.FheaderCache,x$92);LData$4=THttpHeaders.a$174(S.FheaderCache,x$92);S.FReqObj.setRequestHeader(LName$7,LData$4)}}finally{THttpHeaders.Clear$16(S.FheaderCache)}}},Destroy$:function($){return $.ClassType.Destroy($)}};var THttpHeaders={$ClassName:"THttpHeaders",$Parent:TObject,$Init:function($){TObject.$Init($);$.FNames=[];$.FValues=[]},a$177:function(S,idx$5,Value$39){S.FValues[idx$5]=Value$39},a$176:function(S,idx$6){return S.FValues[idx$6]},a$175:function(S,idx$7){return S.FNames[idx$7]},a$174:function(S,idx$8){return S.FNames[idx$8]+": "+S.FValues[idx$8]},Add$7:function(S,Header$1){var kv=[];kv=(Header$1).split(":");if(kv.length>0)THttpHeaders.SetValue(S,kv[0],(kv.length>1)?kv[1]:"")},Assign$5:function(S,Headers$1){var i$6=0;var name$33="";var $t61;for(i$6=0,$t61=THttpHeaders.Count$12(Headers$1);i$6<$t61;i$6++){name$33=THttpHeaders.a$175(Headers$1,i$6);THttpHeaders.SetValue(S,name$33,THttpHeaders.GetValue(Headers$1,name$33))}},Assign$4:function(S,Headers$2){var a$337=0;var header="";var $t71;for(a$337=0,$t71=Headers$2.length;a$337<$t71;a$337++){header=Headers$2[a$337];THttpHeaders.Add$7(S,header)}},Clear$16:function(S){S.FNames.length=0;S.FValues.length=0},Count$12:function(S){var R=0;R=S.FNames.length;return R},Create$159:function(S,headers$1){THttpHeaders.Create$158(S);THttpHeaders.Assign$5(S,headers$1);return S},Create$158:function(S){TObject.Create(S);return S},Create$157:function(S,headers$2){THttpHeaders.Create$158(S);THttpHeaders.Assign$4(S,headers$2);return S},GetValue:function(S,name$34){var R="";var idx$9=0;idx$9=THttpHeaders.IndexOf$3(S,name$34);R=(idx$9>=0)?THttpHeaders.a$176(S,idx$9):"";return R},IndexOf$3:function(S,Name$26){var R=0;var ucName="";ucName=(Name$26).toLocaleUpperCase();var $t81;for(R=0,$t81=THttpHeaders.Count$12(S);R<$t81;R++){if((THttpHeaders.a$175(S,R)).toLocaleUpperCase()==ucName)return R}
R=-1;return R},SetValue:function(S,name$35,value$27){var idx$10=0;idx$10=THttpHeaders.IndexOf$3(S,name$35);if(idx$10>=0){THttpHeaders.a$177(S,idx$10,value$27)}else{S.FNames.push(name$35);S.FValues.push(value$27)}},Destroy:TObject.Destroy};var TForm1={$ClassName:"TForm1",$Parent:TW3Form,$Init:function($){TW3Form.$Init($);$.FLayout$1=null},ObjectReady:function(S){var Demo=null,Editor$1=null;TW3CustomForm.ObjectReady(S);S.FLayout$1.FOnItemSelect=function(Sender$24,NewItem$1,OldItem){var LAccess$8=null;var LCurrent=null;if(NewItem$1===null){LAccess$8=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LCurrent=LAccess$8[3]();LAccess$8[0](null);if(LCurrent!==null){if(TW3TagContainer.GetHasFocus(LCurrent)){LCurrent.FHandle$1.blur()}}
TW3CustomControl.SetFocus(S.FLayout$1)}};Demo=TW3TagContainer.Create$41$($New(TWbExternalWindow),S);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(Demo),16711680);TW3MovableControl.SetVisible(Demo,true);TW3MovableControl.SetBounds(Demo,10,10,480,420);TW3Label.SetCaption$2(Demo.FHeader.FTitle$1,"External application");TControlHandleHelper$ReadyExecute(Demo.FHandle$1,function(){TW3Dispatch.Execute(TW3Dispatch,function(){TWbExternalWindow.OpenURL(Demo,"http:\/\/mod.haxor.fi\/mod.razor_1911",[0])},200)});Editor$1=TW3TagContainer.Create$41$($New(TWbEditWindow),S);TControlHandleHelper$ReadyExecute(Editor$1.FHandle$1,function(){TW3Label.SetCaption$2(Editor$1.FHeader.FTitle$1,"AmiNote")});TW3Dispatch.Execute(TW3Dispatch,function(){TWbDesktop.LayoutWindows(S.FLayout$1)},100)},InitializeForm:function(S){var App=null,x$93=0;var LDevice=null,LItem$19=null;TW3CustomForm.InitializeForm(S);TW3MovableControl.SetBounds(S.FLayout$1,20,100,200,200);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(S.FLayout$1),"res\/newbabylon.jpg");TW3ControlBackgroundSize.SetMode(TW3MovableControl.GetBackGround(S.FLayout$1).FSize$2,3);TW3ControlBackgroundSize.SetWidth$2(TW3MovableControl.GetBackGround(S.FLayout$1).FSize$2,100);TW3ControlBackgroundSize.SetHeight$2(TW3MovableControl.GetBackGround(S.FLayout$1).FSize$2,100);S.FLayout$1.FHandle$1.style.tabindex=0;TW3CustomControl._setKeyPress(S.FLayout$1,function(Sender$25,aChar){WriteLn(aChar)});App=$As(Application(),TApplication);WriteLn("Mounting devices");var $t91;for(x$93=0,$t91=TWbDeviceManager.a$151(App.FDevices);x$93<$t91;x$93++){LDevice=TWbDeviceManager.a$150(App.FDevices,x$93);LItem$19=TW3TagContainer.Create$41$($New(TWbListItemIcon),S.FLayout$1);TW3Label.SetCaption$2(LItem$19.FText$2,LDevice.FName$4);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(LItem$19.FText$2),16777215);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(LItem$19.FText$2.FContainer),1,1,2,0);LItem$19.FData$2=LDevice;try{TWbStorageDevice.Mount(TWbDeviceManager.a$150(App.FDevices,x$93),function(Sender$26){WriteLn(("Mounted <"+Sender$26.FName$4+">"))})}catch($e){var e$40=$W($e);WriteLn(("****** "+e$40.FMessage))}
if($Is(TWbDeviceManager.a$150(App.FDevices,x$93),TWbStorageDeviceRamDisk)){TW3Image.LoadFromURL(LItem$19.FGlyph,"res\/Ram.png");TW3CustomControl._setMouseDblClick(LItem$19,function(sender$10){var LPrefs=null;LPrefs=TW3TagContainer.Create$41$($New(TWbPreferencesWindow),S);TW3Label.SetCaption$2(LPrefs.FHeader.FTitle$1,"Preferences");TW3MovableControl.SetBounds(LPrefs,100,100,420,540);TW3Dispatch.Execute(TW3Dispatch,function(){TW3CustomControl.Invalidate$(LPrefs)},100)})}else{TW3Image.LoadFromURL(LItem$19.FGlyph,"res\/sys_n.png");TW3CustomControl._setMouseDblClick(LItem$19,function(Sender$27){var dir$2=null;dir$2=TW3TagContainer.Create$41$($New(TWbWindowDirectory),S);TW3Label.SetCaption$2(dir$2.FHeader.FTitle$1,("Examining "+LDevice.FName$4));TW3MovableControl.SetBounds(dir$2,(TW3MovableControl.GetLeft(LItem$19)+TW3MovableControl.GetWidth$(LItem$19)),(TW3MovableControl.GetTop(LItem$19)+TW3MovableControl.GetHeight$(LItem$19)),400,340);TW3Dispatch.Execute(TW3Dispatch,function(){TWbWindowDirectory.BrowseTo(dir$2,LDevice,"");TW3CustomControl.Invalidate$(dir$2)},100)})}}
TW3CustomControl._setContextPopup(S,function(sender$11,mousePos$4,handled$3){handled$3.v=true});TW3CustomControl.Invalidate$(S.FLayout$1)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);TW3CustomForm.SetCaption(S,"W3Form");TW3TagContainer.SetComponentName(S,"Form1");S.FLayout$1=TW3TagContainer.Create$41$($New(TWbDesktop),S);RegisterDesktop($AsIntf(S.FLayout$1,"IWbDesktop"))},Resize:function(S){TW3MovableControl.Resize(S);TW3MovableControl.SetBounds(S.FLayout$1,0,0,TW3MovableControl.ClientWidth(S),TW3MovableControl.ClientHeight(S))},Destroy:TW3CustomForm.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomForm.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3CustomForm.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,InitializeForm$:function($){return $.ClassType.InitializeForm($)}};TForm1.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbDesktop={$ClassName:"TWbDesktop",$Parent:TWbIconView,$Init:function($){TWbIconView.$Init($);$.FDatatypes=$.FFocusedWindow=$.FPrefs=null;$.FWindows=[]},FinalizeObject:function(S){TObject.Free(S.FPrefs);TObject.Free(S.FDatatypes);TWbIconView.FinalizeObject(S)},FindWindowFor:function(S,Control){var R=null;var LNode=null;R=null;if(Control!==null){if($Is(Control,TWbWindow)){R=$As(Control,TWbWindow)}else{LNode=S;while(LNode!==null){if($Is(LNode,TWbWindow)){R=$As(LNode,TWbWindow);break}
LNode=TW3TagContainer.a$46(LNode)}}}
return R},ForEachWindow:function(S,Process$2){var a$338=0;var LItem$20=null;var a$339=[];a$339=S.FWindows;var $tA1;for(a$338=0,$tA1=a$339.length;a$338<$tA1;a$338++){LItem$20=a$339[a$338];if(Process$2(LItem$20)==16)break}},GetActiveWindow:function(S){var R=null;R=S.FFocusedWindow;return R},GetDatatypes:function(S){var R=null;R=$AsIntf(S.FDatatypes,"IWbDatatypeRegistry");return R},GetPreferences:function(S){var R=null;R=$AsIntf(S,"IWbPreferences");return R},GetPreferencesReader:function(S){var R=null;R=$AsIntf(S.FPrefs,"IW3StructureReadAccess");return R},GetPreferencesWriter:function(S){var R=null;R=$AsIntf(S.FPrefs,"IW3StructureWriteAccess");return R},GetWindowList:function(S){var R=[];R=S.FWindows;return R},InitializeObject:function(S){var LFolder=null;TWbIconView.InitializeObject(S);S.FPrefs=TJSONStructure.Create$56$($New(TWbPreferences));S.FDatatypes=TObject.Create($New(TWbDatatypeRegistry));LFolder=TObject.Create($New(TWbDatatypeIconInfo));LFolder.SelectedIcon="res\/DefDrawerSel.png";LFolder.UnSelectedIcon="res\/DefDrawer.png";LFolder.Description="Common folder type declaration";LFolder.TypeName="folder";TWbDatatypeRegistry.Register(S.FDatatypes,LFolder)},IsDesktop:function(S,Control$1){var R=false;R=S===Control$1;return R},KnownWindow:function(S,Window$3){var R=false;if(Window$3!==null){R=S.FWindows.indexOf(Window$3)>=0}
return R},LayoutWindows:function(S){var dx$18=0;var dy$16=0;var wd$8=0;var hd$7=0;wd$8=$Div(TW3MovableControl.ClientWidth(S)-30,3);hd$7=$Div(TW3MovableControl.ClientHeight(S),2);dx$18=16;dy$16=98;TWbDesktop.ForEachWindow(S,function(Item$2){var R=160;TW3MovableControl.SetBounds(Item$2,dx$18,dy$16,TW3MovableControl.GetWidth$(Item$2),TW3MovableControl.GetHeight$(Item$2));(dx$18+=32);(dy$16+=32);R=160;return R})},RegisterWindow:function(S,Window$4){var LIndex$5=0;if(Window$4!==null){LIndex$5=S.FWindows.indexOf(Window$4);if(LIndex$5<0){S.FWindows.push(Window$4)}}},SavePreferences:function(S){},SetFocusedWindow:function(S,Window$5){S.FFocusedWindow=Window$5},UnRegisterWindow:function(S,Window$6){var LIndex$6=0;if(Window$6!==null){LIndex$6=S.FWindows.indexOf(Window$6);if(LIndex$6>=0){S.FWindows.splice(LIndex$6,1)}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbIconView.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TWbIconView.ObjectReady,Resize:TWbIconView.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TWbIconView.MouseDown,MouseMove:TWbIconView.MouseMove,MouseUp:TWbIconView.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbDesktop.$Intf={IWbDesktop:[TWbDesktop.SetFocusedWindow,TWbDesktop.IsDesktop,TWbDesktop.FindWindowFor,TWbDesktop.GetActiveWindow,TWbDesktop.GetWindowList,TWbDesktop.RegisterWindow,TWbDesktop.UnRegisterWindow,TWbDesktop.GetPreferences,TWbDesktop.GetDatatypes,TWbDesktop.KnownWindow,TWbDesktop.SavePreferences],IWbPreferences:[TWbDesktop.GetPreferencesReader,TWbDesktop.GetPreferencesWriter],IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbWindowDirectory={$ClassName:"TWbWindowDirectory",$Parent:TWbWindow,$Init:function($){TWbWindow.$Init($);$.FDevice=$.FPanel=$.FPath=$.FToolBar=$.FView$1=null;$.FEffectName=$.FEffectName2=""},BrowseTo:function(S,aDevice,aPath$1){var LDir=[],LAccess$9=null;S.FDevice=aDevice;TW3EditBox.setText(S.FPath.FEdit,aPath$1);if(aPath$1==""){TW3Label.SetCaption$2(S.FHeader.FTitle$1,S.FDevice.FName$4)}else TW3Label.SetCaption$2(S.FHeader.FTitle$1,(S.FDevice.FName$4+" ["+aPath$1+"]"));TWbIconView.Clear$14(S.FView$1);TW3TagObj.a$45(S,8);TW3CustomControl.SetEnabled$(S.FView$1,false);LAccess$9=$AsIntf(S.FDevice,"IWbFileSystem");LAccess$9[5](aPath$1,function(Path$7,DirList){var LText$7="";var LDesktop$1=null,LDataTypes=null,LFolderInfo=null,x$94=0;var LItem$21=null;if(DirList.length>0){LDesktop$1=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LDataTypes=LDesktop$1[8]();LFolderInfo=$As(LDataTypes[3]("folder"),TWbDatatypeIconInfo);var $tB1;for(x$94=0,$tB1=DirList.length;x$94<$tB1;x$94++){LItem$21=TW3TagContainer.Create$41$($New(TWbListItemIcon),S.FView$1);if((DirList[x$94].substr(0,3)=="[d]")){LItem$21.TagValue=2;LText$7=DirList[x$94].substr(3,100);TW3Label.SetCaption$2(LItem$21.FText$2,LText$7);TW3Label.SetTextAlign$1(LItem$21.FText$2,0);TW3CustomControl.Invalidate$(LItem$21.FText$2);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(LItem$21.FText$2),6393550);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(LItem$21.FGlyph),LFolderInfo.UnSelectedIcon);TW3CustomControl._setMouseDblClick(LItem$21,function(Sender$28){TW3Dispatch.Execute(TW3Dispatch,function(){TWbIconView.Clear$14(S.FView$1);TWbWindowDirectory.BrowseTo(S,aDevice,aPath$1+"\/"+$As(Sender$28,TWbListItemIcon).FText$2.FCaption$2)},200)});LItem$21.OnSelected=function(sender$12){var LDesktop$2=null,LDataTypes$1=null,LFolderInfo$1=null;LDesktop$2=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LDataTypes$1=LDesktop$2[8]();LFolderInfo$1=$As(LDataTypes$1[3]("folder"),TWbDatatypeIconInfo);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround($As(sender$12,TWbListItemIcon).FGlyph),LFolderInfo$1.SelectedIcon)};LItem$21.OnUnSelected=function(Sender$29){var LDesktop$3=null,LDataTypes$2=null,LFolderInfo$2=null;LDesktop$3=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LDataTypes$2=LDesktop$3[8]();LFolderInfo$2=$As(LDataTypes$2[3]("folder"),TWbDatatypeIconInfo);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround($As(Sender$29,TWbListItemIcon).FGlyph),LFolderInfo$2.UnSelectedIcon)}}else{LItem$21.TagValue=1;LText$7=DirList[x$94].substr(3,100);TW3Label.SetCaption$2(LItem$21.FText$2,LText$7);TW3Label.SetTextAlign$1(LItem$21.FText$2,0);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(LItem$21.FText$2),0);TW3CustomControl.Invalidate$(LItem$21.FText$2);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(LItem$21.FGlyph),"res\/HTM.png");TW3CustomControl._setMouseDblClick(LItem$21,function(Sender$30){TW3Dispatch.Execute(TW3Dispatch,function(){},200)});LItem$21.OnSelected=function(sender$13){TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround($As(sender$13,TWbListItemIcon).FGlyph),"res\/HTMSel.png")};LItem$21.OnUnSelected=function(Sender$31){TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround($As(Sender$31,TWbListItemIcon).FGlyph),"res\/HTM.png")}}}
TW3CustomControl.Invalidate$(S.FView$1)}
TW3TagObj.a$45(S,1);TW3CustomControl.SetEnabled$(S.FView$1,true);TW3CustomControl.SetFocus(S.FView$1)})},FinalizeObject:function(S){TObject.Free(S.FView$1);TObject.Free(S.FToolBar);TObject.Free(S.FPath);TWbCustomWindow.FinalizeObject(S)},InitializeObject:function(S){TWbCustomWindow.InitializeObject(S);S.FPanel=TW3TagContainer.Create$41$($New(TW3Panel),S.FContent);S.FToolBar=TW3TagContainer.Create$41$($New(TW3Toolbar),S.FPanel);S.FPath=TW3TagContainer.Create$41$($New(TWbPathPanel),S.FPanel);S.FEffectName=TSuperStyle.AnimGlow$1(TSuperStyle,16777215,RGBToColor(253,228,128));S.FEffectName2=TSuperStyle.AnimGlow$1(TSuperStyle,16777215,RGBToColor(97,142,206));S.FView$1=TW3TagContainer.Create$41$($New(TWbIconView),S.FContent);S.FView$1.FOnItemSelect=function(Sender$32,NewItem$2,OldItem$1){if(OldItem$1!==null){}
if(NewItem$2!==null){}}},ObjectReady:function(S){var LButton$2=null;TWbCustomWindow.ObjectReady(S);TW3Toolbar.setBtnWidth(S.FToolBar,64);TW3Toolbar.setBtnHeight(S.FToolBar,36);TW3Toolbar.setBtnSpacing(S.FToolBar,4);LButton$2=TW3Toolbar.Add$5(S.FToolBar);TW3ToolbarButton.SetCaption$4(LButton$2,"Back");LButton$2=TW3Toolbar.Add$5(S.FToolBar);TW3ToolbarButton.SetCaption$4(LButton$2,"Next");LButton$2=TW3Toolbar.Add$5(S.FToolBar);TW3ToolbarButton.SetCaption$4(LButton$2,"Cut");LButton$2=TW3Toolbar.Add$5(S.FToolBar);TW3ToolbarButton.SetCaption$4(LButton$2,"Copy");LButton$2=TW3Toolbar.Add$5(S.FToolBar);TW3ToolbarButton.SetCaption$4(LButton$2,"Paste");TW3Dispatch.Execute(TW3Dispatch,$Event0(S,TW3CustomControl.Invalidate$),100)},Resize:function(S){var wd$9=0;var hd$8=0;var dy$17=0;TWbCustomWindow.Resize(S);wd$9=TW3MovableControl.ClientWidth(S.FContent);hd$8=TW3MovableControl.ClientHeight(S.FContent);TW3MovableControl.SetBounds(S.FPanel,0,0,wd$9,76);dy$17=TW3MovableControl.GetTop(S.FPanel)+TW3MovableControl.GetHeight$(S.FPanel);TW3MovableControl.SetBounds(S.FView$1,0,dy$17,wd$9,hd$8);TW3MovableControl.SetBounds(S.FToolBar,0,0,wd$9,(S.FToolBar.FBtnHeight+8));dy$17=TW3MovableControl.GetTop(S.FToolBar)+TW3MovableControl.GetHeight$(S.FToolBar);wd$9=TW3MovableControl.ClientWidth(S.FPanel);hd$8=TW3MovableControl.ClientHeight(S.FPanel)-dy$17;TW3MovableControl.SetBounds(S.FPath,0,dy$17,wd$9,hd$8)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbCustomWindow.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown:TWbWindow.HandleMouseDown};TWbWindowDirectory.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbPathPanel={$ClassName:"TWbPathPanel",$Parent:TW3Panel,$Init:function($){TW3Panel.$Init($);$.FEdit=$.FLayout=$.FSelect=null},FinalizeObject:function(S){TObject.Free(S.FEdit);TObject.Free(S.FSelect);TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FSelect=TW3TagContainer.Create$41$($New(TW3Button),S);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FSelect),0);S.FEdit=TW3TagContainer.Create$41$($New(TW3EditBox),S)},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3Button.SetCaption$1(S.FSelect,"Set Destination");TW3MovableControl.SetSize$3(S.FSelect,130,28);TW3MovableControl.SetSize$3(S.FEdit,200,26);S.FLayout=Layout.Client(Layout,TLayoutConfig.Spacing$(Layout.Margins$2(Layout,4),4),[Layout.Left$9(Layout,[S.FSelect].slice()),Layout.Client(Layout,Layout.Stretch$1(Layout),[S.FEdit].slice())].slice())},Resize:function(S){TW3MovableControl.Resize(S);if(S.FLayout)TLayout.Resize$18$(S.FLayout,S)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TWbPathPanel.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TLayoutConfig={$ClassName:"TLayoutConfig",$Parent:TObject,$Init:function($){TObject.$Init($)},Destroy:TObject.Destroy,Height$9$:function($){return $.ClassType.Height$9.apply($.ClassType,arguments)},Margins$1$:function($){return $.ClassType.Margins$1.apply($.ClassType,arguments)},Margins$:function($){return $.ClassType.Margins.apply($.ClassType,arguments)},Padding$5$:function($){return $.ClassType.Padding$5.apply($.ClassType,arguments)},Padding$4$:function($){return $.ClassType.Padding$4.apply($.ClassType,arguments)},Spacing$:function($){return $.ClassType.Spacing.apply($.ClassType,arguments)},Stretch$:function($){return $.ClassType.Stretch($)},Width$11$:function($){return $.ClassType.Width$11.apply($.ClassType,arguments)}};var TLayout={$ClassName:"TLayout",$Parent:TObject,$Init:function($){TObject.$Init($)},Destroy:TObject.Destroy,Resize$18$:function($){return $.ClassType.Resize$18.apply($.ClassType,arguments)},Resize$17$:function($){return $.ClassType.Resize$17.apply($.ClassType,arguments)},Config$:function($){return $.ClassType.Config($)}};var Layout={$ClassName:"Layout",$Parent:TObject,$Init:function($){TObject.$Init($)},Bottom$5:function(S,config$1,control$2){var R=null;var objArr=[];$ArraySetLenC(objArr,1,function(){return null});objArr[0]=control$2;R=Layout.Bottom$4(S,config$1,objArr);return R},Bottom$4:function(S,config$2,controls$1){var R=null;var iControl$1=0;var inner=[];if(controls$1.length<=1||NotAllComponents(controls$1)){R=TLayoutImpl.Create$162($New(TLayoutImpl),3,config$2,controls$1)}else{$ArraySetLenC(inner,controls$1.length,function(){return null});var $tC1;for(iControl$1=0,$tC1=controls$1.length;iControl$1<$tC1;iControl$1++){inner[(controls$1.length-1)-iControl$1]=TLayoutImpl.Create$162($New(TLayoutImpl),3,config$2,[controls$1[iControl$1]].slice())}
R=TLayoutImpl.Create$162($New(TLayoutImpl),3,config$2,inner)}
return R},Client$3:function(S,control$3){var R=null;var objArr$1=[];$ArraySetLenC(objArr$1,1,function(){return null});objArr$1[0]=control$3;R=Layout.Client(S,NullConfig,objArr$1);return R},Client:function(S,config$3,controls$2){var R=null;R=TLayoutImpl.Create$162($New(TLayoutImpl),4,config$3,controls$2);return R},Height$10:function(S,aHeight$2){var R=null;R=TLayoutConfig.Height$9$(TObject.Create($New(TLayoutConfigImpl)),aHeight$2);return R},Left$9:function(S,controls$3){var R=null;R=Layout.Left$7(S,NullConfig,controls$3);return R},Left$8:function(S,control$4){var R=null;var objArr$2=[];$ArraySetLenC(objArr$2,1,function(){return null});objArr$2[0]=control$4;R=Layout.Left$7(S,NullConfig,objArr$2);return R},Left$7:function(S,config$4,controls$4){var R=null;var iControl$2=0;var inner$1=[];if(controls$4.length<=1||NotAllComponents(controls$4)){R=TLayoutImpl.Create$162($New(TLayoutImpl),0,config$4,controls$4)}else{$ArraySetLenC(inner$1,controls$4.length,function(){return null});var $tD1;for(iControl$2=0,$tD1=controls$4.length;iControl$2<$tD1;iControl$2++){inner$1[iControl$2]=TLayoutImpl.Create$162($New(TLayoutImpl),0,config$4,[controls$4[iControl$2]].slice())}
R=TLayoutImpl.Create$162($New(TLayoutImpl),0,config$4,inner$1)}
return R},Margins$2:function(S,value$28){var R=null;R=TLayoutConfig.Margins$(TObject.Create($New(TLayoutConfigImpl)),value$28);return R},Right$7:function(S,control$5){var R=null;var objArr$3=[];$ArraySetLenC(objArr$3,1,function(){return null});objArr$3[0]=control$5;R=Layout.Right$4(S,NullConfig,objArr$3);return R},Right$4:function(S,config$5,controls$5){var R=null;var iControl$3=0;var inner$2=[];if(controls$5.length<=1||NotAllComponents(controls$5)){R=TLayoutImpl.Create$162($New(TLayoutImpl),2,config$5,controls$5)}else{$ArraySetLenC(inner$2,controls$5.length,function(){return null});var $tE1;for(iControl$3=0,$tE1=controls$5.length;iControl$3<$tE1;iControl$3++){inner$2[(controls$5.length-1)-iControl$3]=TLayoutImpl.Create$162($New(TLayoutImpl),2,config$5,[controls$5[iControl$3]].slice())}
R=TLayoutImpl.Create$162($New(TLayoutImpl),2,config$5,inner$2)}
return R},Stretch$1:function(S){var R=null;R=TLayoutConfig.Stretch$(TObject.Create($New(TLayoutConfigImpl)));return R},Top$8:function(S,controls$6){var R=null;R=Layout.Top$6(S,NullConfig,controls$6);return R},Top$6:function(S,config$6,controls$7){var R=null;var iControl$4=0;var inner$3=[];if(controls$7.length<=1||NotAllComponents(controls$7)){R=TLayoutImpl.Create$162($New(TLayoutImpl),1,config$6,controls$7)}else{$ArraySetLenC(inner$3,controls$7.length,function(){return null});var $tF1;for(iControl$4=0,$tF1=controls$7.length;iControl$4<$tF1;iControl$4++){inner$3[iControl$4]=TLayoutImpl.Create$162($New(TLayoutImpl),1,config$6,[controls$7[iControl$4]].slice())}
R=TLayoutImpl.Create$162($New(TLayoutImpl),1,config$6,inner$3)}
return R},Destroy:TObject.Destroy};function VarToString(v){var R="";if(v==null){R="N"}else R=(parseInt(v,10)).toString();return R};function Copy$TLayoutRect(s,d){d.Bottom$8=s.Bottom$8;d.Height$11=s.Height$11;d.Left$10=s.Left$10;d.Right$8=s.Right$8;d.Top$10=s.Top$10;d.Width$13=s.Width$13;return d}
function Clone$TLayoutRect($){return{Bottom$8:$.Bottom$8,Height$11:$.Height$11,Left$10:$.Left$10,Right$8:$.Right$8,Top$10:$.Top$10,Width$13:$.Width$13}}
function TLayoutRect$IsHorizontalSet(Self$29){var R=false;R=Self$29.Left$10!=null&&Self$29.Width$13!=null;return R}
function TLayoutRect$IsVerticalSet(Self$30){var R=false;R=Self$30.Top$10!=null&&Self$30.Height$11!=null;return R}
function TLayoutRect$Resolve(Self$31){if(Self$31.Left$10==null&&Self$31.Right$8!=null&&Self$31.Width$13!=null){Self$31.Left$10=Self$31.Right$8-Self$31.Width$13}else if(Self$31.Right$8==null&&Self$31.Left$10!=null&&Self$31.Width$13!=null){Self$31.Right$8=Self$31.Left$10+Self$31.Width$13}else if(Self$31.Width$13==null&&Self$31.Left$10!=null&&Self$31.Right$8!=null)Self$31.Width$13=Self$31.Right$8-Self$31.Left$10;if(Self$31.Top$10==null&&Self$31.Bottom$8!=null&&Self$31.Height$11!=null){Self$31.Top$10=Self$31.Bottom$8-Self$31.Height$11}else if(Self$31.Bottom$8==null&&Self$31.Top$10!=null&&Self$31.Height$11!=null){Self$31.Bottom$8=Self$31.Top$10+Self$31.Height$11}else if(Self$31.Height$11==null&&Self$31.Top$10!=null&&Self$31.Bottom$8!=null)Self$31.Height$11=Self$31.Bottom$8-Self$31.Top$10}
function TLayoutRect$SetBounds$4(Self$32,aLeft$2,aRight$1,aWidth$2,aTop$2,aBottom$1,aHeight$3){Self$32.Left$10=aLeft$2;Self$32.Right$8=aRight$1;Self$32.Width$13=aWidth$2;Self$32.Top$10=aTop$2;Self$32.Bottom$8=aBottom$1;Self$32.Height$11=aHeight$3;TLayoutRect$Resolve(Self$32)}
function TLayoutRect$SetFromControl(Self$33,control$6){TLayoutRect$SetBounds$4(Self$33,TW3MovableControl.GetLeft(control$6),null,TW3MovableControl.ClientWidth(control$6),TW3MovableControl.GetTop(control$6),null,TW3MovableControl.ClientHeight(control$6))}
function TLayoutRect$SetFromRect(Self$34,rect$2){TLayoutRect$SetBounds$4(Self$34,rect$2.Left$3,null,TRect$Width$3(rect$2),rect$2.Top$3,null,TRect$Height$3(rect$2))}
function TLayoutRect$SetHeight$4(Self$35,value$29){Self$35.Height$11=value$29;TLayoutRect$Resolve(Self$35)}
function TLayoutRect$SetLeft$4(Self$36,value$30){Self$36.Left$10=value$30;TLayoutRect$Resolve(Self$36)}
function TLayoutRect$SetTop$1(Self$37,value$31){Self$37.Top$10=value$31;TLayoutRect$Resolve(Self$37)}
function TLayoutRect$SetWidth$5(Self$38,value$32){Self$38.Width$13=value$32;TLayoutRect$Resolve(Self$38)}
function TLayoutRect$Shrink$1(Self$39,rect$3){if(Self$39.Left$10!=null)Self$39.Left$10=Self$39.Left$10+rect$3.Left$3;if(Self$39.Right$8!=null)Self$39.Right$8=Self$39.Right$8-rect$3.Right$1;if(Self$39.Width$13!=null)Self$39.Width$13=Self$39.Width$13-rect$3.Left$3-rect$3.Right$1;if(Self$39.Top$10!=null)Self$39.Top$10=Self$39.Top$10+rect$3.Top$3;if(Self$39.Bottom$8!=null)Self$39.Bottom$8=Self$39.Bottom$8-rect$3.Bottom$1;if(Self$39.Height$11!=null)Self$39.Height$11=Self$39.Height$11-rect$3.Top$3-rect$3.Bottom$1}
var TLayoutImpl={$ClassName:"TLayoutImpl",$Parent:TLayout,$Init:function($){TLayout.$Init($);$.FAlign=0;$.FBounds={Bottom$8:undefined,Height$11:undefined,Left$10:undefined,Right$8:undefined,Top$10:undefined,Width$13:undefined};$.FClientArea={Bottom$8:undefined,Height$11:undefined,Left$10:undefined,Right$8:undefined,Top$10:undefined,Width$13:undefined};$.FConfig=null;$.FControls=[];$.FName$5=""},AlignControl:function(S,control$7){TLayoutImpl.ResolveDimensionsFrom(S,control$7);TLayoutImpl.ResizeControl(S,control$7);if($Is(control$7,TLayoutImpl))TLayoutImpl.InternalResize($As(control$7,TLayoutImpl),S);TLayoutImpl.ResolveDimensionsFrom(S,control$7);TLayoutImpl.ShrinkClientArea(S,control$7)},CalculateUsableArea:function(S,container){var clientArea={Bottom$8:undefined,Height$11:undefined,Left$10:undefined,Right$8:undefined,Top$10:undefined,Width$13:undefined};var p1,p2;clientArea=Dimensions.GetClientArea(Dimensions,container);p1=null;p2=null;switch(S.FAlign){case 0:case 2:if(S.FAlign==0){p1=clientArea.Left$10}else p2=clientArea.Right$8;TLayoutRect$SetBounds$4(S.FBounds,p1,p2,S.FConfig.FWidth$2,clientArea.Top$10,clientArea.Bottom$8,clientArea.Height$11);break;case 1:case 3:if(S.FAlign==1){p1=clientArea.Top$10}else p2=clientArea.Bottom$8;TLayoutRect$SetBounds$4(S.FBounds,clientArea.Left$10,clientArea.Right$8,clientArea.Width$13,p1,p2,S.FConfig.FHeight$2);break;case 4:case 5:TLayoutRect$SetBounds$4(S.FBounds,clientArea.Left$10,clientArea.Right$8,clientArea.Width$13,clientArea.Top$10,clientArea.Bottom$8,clientArea.Height$11);break}
TLayoutRect$Shrink$1(S.FBounds,Clone$TRect(S.FConfig.FMargins));Copy$TLayoutRect(S.FBounds,S.FClientArea);TLayoutRect$Shrink$1(S.FClientArea,Clone$TRect(S.FConfig.FPadding$2));TLayoutImpl.ResizeStretchedChildren(S)},Config:function(S){var R=null;R=S.FConfig;return R},Create$162:function(S,align$18,config$7,controls$8){S.FAlign=align$18;S.FConfig=TLayoutConfigImpl.CreateFrom($New(TLayoutConfigImpl),$As(config$7,TLayoutConfigImpl));S.FControls=controls$8;++LayoutCount;S.FName$5=("Layout "+LayoutCount.toString()+" ("+AlignToString(align$18).toString()+")");return S},InternalResize:function(S,container$1){var gotClient=false;var iControl$5=0;TLayoutImpl.CalculateUsableArea(S,container$1);var $tG1;for(iControl$5=0,$tG1=S.FControls.length;iControl$5<$tG1;iControl$5++){if($Is(S.FControls[iControl$5],TW3CustomControl)||$As(S.FControls[iControl$5],TLayoutImpl).FAlign!=4)TLayoutImpl.AlignControl(S,S.FControls[iControl$5])}
gotClient=false;var $tH1;for(iControl$5=0,$tH1=S.FControls.length;iControl$5<$tH1;iControl$5++){if($Is(S.FControls[iControl$5],TLayoutImpl)&&$As(S.FControls[iControl$5],TLayoutImpl).FAlign==4){if(gotClient){throw Exception.Create($New(Exception),"Layout can contain only one client-aligned child")}
gotClient=true;TLayoutImpl.AlignControl(S,S.FControls[iControl$5])}}},LoggedResize:function(S,container$2){Logger="";try{try{TLayoutImpl.ResolveDimensionsFromChildren(S);TLayoutImpl.InternalResize(S,container$2)}catch($e){var E=$W($e);throw $e}}finally{}},Resize$17:function(S,rect$4){TLayoutImpl.LoggedResize(S,TLayoutArea.Create$163($New(TLayoutArea),Clone$TRect(rect$4)))},Resize$18:function(S,container$3){TLayoutImpl.LoggedResize(S,container$3)},ResizeControl:function(S,control$8){if($Is(control$8,TLayoutImpl))return;if(S.FClientArea.Top$10!=null){if(S.FAlign==3){Dimensions.SetBottom$1(Dimensions,control$8,parseInt((S.FClientArea.Top$10+S.FClientArea.Height$11-Dimensions.GetOwnerTop(Dimensions,control$8)),10))}else if(S.FAlign!=5){Dimensions.SetTop$2(Dimensions,control$8,parseInt((S.FClientArea.Top$10-Dimensions.GetOwnerTop(Dimensions,control$8)),10))}else Dimensions.SetTop$2(Dimensions,control$8,parseInt((S.FClientArea.Top$10-Dimensions.GetOwnerTop(Dimensions,control$8)+($Div(S.FClientArea.Height$11-Dimensions.GetHeight$8(Dimensions,control$8),2))),10))}
if(S.FClientArea.Left$10!=null){if(S.FAlign==2){Dimensions.SetRight$4(Dimensions,control$8,parseInt((S.FClientArea.Left$10+S.FClientArea.Width$13-Dimensions.GetOwnerLeft(Dimensions,control$8)),10))}else if(S.FAlign!=5){Dimensions.SetLeft$5(Dimensions,control$8,parseInt((S.FClientArea.Left$10-Dimensions.GetOwnerLeft(Dimensions,control$8)),10))}else Dimensions.SetLeft$5(Dimensions,control$8,parseInt((S.FClientArea.Left$10-Dimensions.GetOwnerLeft(Dimensions,control$8)+($Div(S.FClientArea.Width$13-Dimensions.GetWidth$9(Dimensions,control$8),2))),10))}
if(S.FAlign!=5){if(S.FClientArea.Height$11!=null){Dimensions.SetHeight$5(Dimensions,control$8,parseInt(S.FClientArea.Height$11,10))}
if(S.FClientArea.Width$13!=null){Dimensions.SetWidth$6(Dimensions,control$8,parseInt(S.FClientArea.Width$13,10))}}},ResizeStretchedChildren:function(S){function ResizeChildren(clientSize,align$19,dimCalc,dimSet){var clientSizeInt=0;var countStretched=0;var dim,iControl$6=0;var layout=null;if(clientSize==null)return;countStretched=0;clientSizeInt=parseInt(clientSize,10);var $tI1;for(iControl$6=0,$tI1=S.FControls.length;iControl$6<$tI1;iControl$6++){if($Is(S.FControls[iControl$6],TLayoutImpl)){layout=$As(S.FControls[iControl$6],TLayoutImpl);if(align$19.indexOf(layout.FAlign)>=0){if(layout.FConfig.FStretch){++countStretched}else{dim=dimCalc(layout);if(dim!=null)clientSizeInt=clientSizeInt-parseInt(dim,10)}}}}
clientSizeInt=clientSizeInt-S.FConfig.FSpacing$2*(S.FControls.length-1);var $tJ1;for(iControl$6=0,$tJ1=S.FControls.length;iControl$6<$tJ1;iControl$6++){if($Is(S.FControls[iControl$6],TLayoutImpl)){layout=$As(S.FControls[iControl$6],TLayoutImpl);if(align$19.indexOf(layout.FAlign)>=0){if(layout.FConfig.FStretch){dimSet(layout,$Div(clientSizeInt,countStretched));clientSizeInt=clientSizeInt-($Div(clientSizeInt,countStretched));--countStretched}else{dim=dimCalc(layout);if(dim!=null)clientSizeInt=clientSizeInt-parseInt(dim,10)}}}}};ResizeChildren(S.FClientArea.Width$13,[0,2].slice(),function(layout$1){return layout$1.FConfig.FWidth$2},function(layout$2,value$33){TLayoutConfig.Width$11$(layout$2.FConfig,value$33)});ResizeChildren(S.FClientArea.Height$11,[1,3].slice(),function(layout$3){return layout$3.FConfig.FHeight$2},function(layout$4,value$34){TLayoutConfig.Height$9$(layout$4.FConfig,value$34)})},ResolveDimensionsFrom:function(S,control$9){if((!TLayoutRect$IsHorizontalSet(S.FClientArea))&&Dimensions.HasWidth(Dimensions,control$9)&&(S.FAlign==0||S.FAlign==2||S.FAlign==4||S.FAlign==5)){TLayoutImpl.SetHorizontal$1(S,Dimensions.GetWidth$9(Dimensions,control$9))}
if((!TLayoutRect$IsVerticalSet(S.FClientArea))&&Dimensions.HasHeight(Dimensions,control$9)&&(S.FAlign==1||S.FAlign==3||S.FAlign==4||S.FAlign==5)){TLayoutImpl.SetVertical$1(S,Dimensions.GetHeight$8(Dimensions,control$9))}},ResolveDimensionsFromChildren:function(S){var control$10=null;var controlCount=0;var dim$1,iControl$7=0;var sum;var $tK1;for(iControl$7=0,$tK1=S.FControls.length;iControl$7<$tK1;iControl$7++){if($Is(S.FControls[iControl$7],TLayoutImpl))TLayoutImpl.ResolveDimensionsFromChildren($As(S.FControls[iControl$7],TLayoutImpl))}
if(S.FAlign==5&&S.FConfig.FWidth$2!=null&&S.FConfig.FHeight$2!=null)return;if(S.FAlign==4||(S.FAlign==0||S.FAlign==2)&&S.FConfig.FWidth$2!=null||(S.FAlign==1||S.FAlign==3)&&S.FConfig.FHeight$2!=null)return;if(!(S.FAlign==5)){sum=0;controlCount=0;var $tL1;for(iControl$7=0,$tL1=S.FControls.length;iControl$7<$tL1;iControl$7++){control$10=S.FControls[iControl$7];switch(S.FAlign){case 0:case 2:dim$1=Dimensions.GetWidth$9(Dimensions,control$10);break;case 1:case 3:dim$1=Dimensions.GetHeight$8(Dimensions,control$10);break}
if(dim$1==null){sum=null;break}else{if(controlCount>0){sum=sum+S.FConfig.FSpacing$2}
++controlCount;sum=sum+dim$1}}}
if(S.FAlign==5)sum=Dimensions.GetWidth$9(Dimensions,S.FControls[0]);if(sum!=null&&S.FConfig.FWidth$2==null&&(S.FAlign==0||S.FAlign==2||S.FAlign==5)){sum=sum+S.FConfig.FPadding$2.Left$3+S.FConfig.FPadding$2.Right$1+S.FConfig.FMargins.Left$3+S.FConfig.FMargins.Right$1;TLayoutConfig.Width$11$(S.FConfig,parseInt(sum,10))}
if(S.FAlign==5)sum=Dimensions.GetHeight$8(Dimensions,S.FControls[0]);if(sum!=null&&S.FConfig.FHeight$2==null&&(S.FAlign==1||S.FAlign==3||S.FAlign==5)){sum=sum+S.FConfig.FPadding$2.Top$3+S.FConfig.FPadding$2.Bottom$1+S.FConfig.FMargins.Top$3+S.FConfig.FMargins.Bottom$1;TLayoutConfig.Height$9$(S.FConfig,parseInt(sum,10))}},SetHorizontal$1:function(S,clientWidth$1){TLayoutRect$SetWidth$5(S.FClientArea,parseInt(clientWidth$1,10));if(clientWidth$1!=null)clientWidth$1=clientWidth$1+S.FConfig.FPadding$2.Left$3+S.FConfig.FPadding$2.Right$1;TLayoutRect$SetWidth$5(S.FBounds,parseInt(clientWidth$1,10))},SetVertical$1:function(S,clientHeight$1){TLayoutRect$SetHeight$4(S.FClientArea,parseInt(clientHeight$1,10));if(clientHeight$1!=null)clientHeight$1=clientHeight$1+S.FConfig.FPadding$2.Top$3+S.FConfig.FPadding$2.Bottom$1;TLayoutRect$SetHeight$4(S.FBounds,parseInt(clientHeight$1,10))},ShrinkClientArea:function(S,control$11){var align$20=0;var height$23,width$28;if($Is(control$11,TLayoutImpl)){align$20=$As(control$11,TLayoutImpl).FAlign}else align$20=S.FAlign;switch(align$20){case 0:width$28=Dimensions.GetWidth$9(Dimensions,control$11);$Assert(width$28!=null,"width = Null","");$Assert(S.FClientArea.Left$10!=null,"FClientArea.Left = Null","");$Assert(Dimensions.GetLeft$4(Dimensions,control$11)+Dimensions.GetOwnerLeft(Dimensions,control$11)==S.FClientArea.Left$10,("Dimensions.GetLeft("+NameOf(control$11).toString()+")["+VarToString(Dimensions.GetLeft$4(Dimensions,control$11)).toString()+"] + Dimensions.GetOwnerLeft("+NameOf(control$11).toString()+")["+Dimensions.GetOwnerLeft(Dimensions,control$11).toString()+"] <> FClientArea.Left["+VarToString(S.FClientArea.Left$10).toString()+"]"),"");S.FClientArea.Left$10=S.FClientArea.Left$10+width$28+S.FConfig.FSpacing$2;S.FClientArea.Width$13=S.FClientArea.Width$13-width$28-S.FConfig.FSpacing$2;break;case 1:height$23=Dimensions.GetHeight$8(Dimensions,control$11);$Assert(height$23!=null,"height = Null","");$Assert(S.FClientArea.Top$10!=null,"FClientArea.Top = Null","");$Assert(Dimensions.GetTop$1(Dimensions,control$11)+Dimensions.GetOwnerTop(Dimensions,control$11)==S.FClientArea.Top$10,("Dimensions.GetTop(["+NameOf(control$11).toString()+"])["+VarToString(Dimensions.GetTop$1(Dimensions,control$11)).toString()+"] + Dimensions.GetOwnerTop("+NameOf(control$11).toString()+")["+Dimensions.GetOwnerTop(Dimensions,control$11).toString()+"] <> FClientArea.Top["+VarToString(S.FClientArea.Top$10).toString()+"]"),"");S.FClientArea.Top$10=S.FClientArea.Top$10+height$23+S.FConfig.FSpacing$2;S.FClientArea.Height$11=S.FClientArea.Height$11-height$23-S.FConfig.FSpacing$2;break;case 2:width$28=Dimensions.GetWidth$9(Dimensions,control$11);$Assert(width$28!=null,"width = Null","");$Assert(S.FClientArea.Left$10!=null,"FClientArea.Left = Null","");$Assert(S.FClientArea.Width$13!=null,"FClientArea.Width = Null","");$Assert(Dimensions.GetLeft$4(Dimensions,control$11)+Dimensions.GetOwnerLeft(Dimensions,control$11)==S.FClientArea.Left$10+S.FClientArea.Width$13-width$28,("Dimensions.GetLeft("+NameOf(control$11).toString()+")["+VarToString(Dimensions.GetLeft$4(Dimensions,control$11)).toString()+"] + Dimensions.GetOwnerLeft("+NameOf(control$11).toString()+")["+Dimensions.GetOwnerLeft(Dimensions,control$11).toString()+"] <> (FClientArea.Left["+VarToString(S.FClientArea.Left$10).toString()+"] + FClientArea.Width["+VarToString(S.FClientArea.Width$13).toString()+"] - width["+VarToString(width$28).toString()+"])"),"");S.FClientArea.Right$8=S.FClientArea.Right$8-width$28-S.FConfig.FSpacing$2;S.FClientArea.Width$13=S.FClientArea.Width$13-width$28-S.FConfig.FSpacing$2;break;case 3:height$23=Dimensions.GetHeight$8(Dimensions,control$11);$Assert(height$23!=null,"height = Null","");$Assert(S.FClientArea.Top$10!=null,"FClientArea.Top = Null","");$Assert(S.FClientArea.Height$11!=null,"FClientArea.Height = Null","");$Assert(Dimensions.GetTop$1(Dimensions,control$11)+Dimensions.GetOwnerTop(Dimensions,control$11)==S.FClientArea.Top$10+S.FClientArea.Height$11-height$23,("Dimensions.GetTop("+NameOf(control$11).toString()+")["+VarToString(Dimensions.GetTop$1(Dimensions,control$11)).toString()+"] + Dimensions.GetOwnerTop(control) <> (FClientArea.Top["+NameOf(control$11).toString()+"] + FClientArea.Height["+Dimensions.GetOwnerTop(Dimensions,control$11).toString()+"] - height["+VarToString(S.FClientArea.Top$10).toString()+"])"),"");S.FClientArea.Bottom$8=S.FClientArea.Bottom$8-height$23-S.FConfig.FSpacing$2;S.FClientArea.Height$11=S.FClientArea.Height$11-height$23-S.FConfig.FSpacing$2;break;case 4:TLayoutRect$SetBounds$4(S.FClientArea,0,0,0,-1,-1,-1);break}},Destroy:TObject.Destroy,Resize$18$:function($){return $.ClassType.Resize$18.apply($.ClassType,arguments)},Resize$17$:function($){return $.ClassType.Resize$17.apply($.ClassType,arguments)},Config$:function($){return $.ClassType.Config($)}};var TLayoutConfigImpl={$ClassName:"TLayoutConfigImpl",$Parent:TLayoutConfig,$Init:function($){TLayoutConfig.$Init($);$.FHeight$2=$.FWidth$2=undefined;$.FMargins={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};$.FPadding$2={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};$.FSpacing$2=0;$.FStretch=false},CreateFrom:function(S,conf){S.FHeight$2=conf.FHeight$2;Copy$TRect(conf.FMargins,S.FMargins);Copy$TRect(conf.FPadding$2,S.FPadding$2);S.FSpacing$2=conf.FSpacing$2;S.FStretch=conf.FStretch;S.FWidth$2=conf.FWidth$2;return S},Height$9:function(S,aHeight$4){var R=null;S.FHeight$2=aHeight$4;R=S;return R},Margins$1:function(S,left$2,top$4,right$2,bottom$3){var R=null;S.FMargins=Create$45(left$2,top$4,right$2,bottom$3);R=S;return R},Margins:function(S,value$35){var R=null;R=TLayoutConfig.Margins$1$(S,value$35,value$35,value$35,value$35);return R},Padding$5:function(S,left$3,top$5,right$3,bottom$4){var R=null;S.FPadding$2=Create$45(left$3,top$5,right$3,bottom$4);R=S;return R},Padding$4:function(S,value$36){var R=null;R=TLayoutConfig.Padding$5$(S,value$36,value$36,value$36,value$36);return R},Spacing:function(S,distance){var R=null;S.FSpacing$2=distance;R=S;return R},Stretch:function(S){var R=null;S.FStretch=true;R=S;return R},Width$11:function(S,aWidth$3){var R=null;S.FWidth$2=aWidth$3;R=S;return R},Destroy:TObject.Destroy,Height$9$:function($){return $.ClassType.Height$9.apply($.ClassType,arguments)},Margins$1$:function($){return $.ClassType.Margins$1.apply($.ClassType,arguments)},Margins$:function($){return $.ClassType.Margins.apply($.ClassType,arguments)},Padding$5$:function($){return $.ClassType.Padding$5.apply($.ClassType,arguments)},Padding$4$:function($){return $.ClassType.Padding$4.apply($.ClassType,arguments)},Spacing$:function($){return $.ClassType.Spacing.apply($.ClassType,arguments)},Stretch$:function($){return $.ClassType.Stretch($)},Width$11$:function($){return $.ClassType.Width$11.apply($.ClassType,arguments)}};var TLayoutArea={$ClassName:"TLayoutArea",$Parent:TObject,$Init:function($){TObject.$Init($);$.FRect={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0}},Create$163:function(S,rect$5){TObject.Create(S);Copy$TRect(rect$5,S.FRect);return S},Destroy:TObject.Destroy};var TAlign=["Left","Top","Right","Bottom","Client","Center"];function NotAllComponents(controls$9){var R=false;var iControl=0;R=true;var $tM1;for(iControl=0,$tM1=controls$9.length;iControl<$tM1;iControl++){if(!$Is(controls$9[iControl],TW3CustomControl))return R}
R=false;return R};function NameOf(control$12){var R="";if($Is(control$12,TLayoutImpl)){R=$As(control$12,TLayoutImpl).FName$5}else R=TW3TagContainer.GetComponentName($As(control$12,TW3CustomControl));return R};var Dimensions={$ClassName:"Dimensions",$Parent:TObject,$Init:function($){TObject.$Init($)},GetClientArea:function(S,control$13){var R={Bottom$8:undefined,Height$11:undefined,Left$10:undefined,Right$8:undefined,Top$10:undefined,Width$13:undefined};if($Is(control$13,TLayoutImpl)){Copy$TLayoutRect($As(control$13,TLayoutImpl).FClientArea,R)}else if($Is(control$13,TLayoutArea)){TLayoutRect$SetFromRect(R,Clone$TRect($As(control$13,TLayoutArea).FRect))}else TLayoutRect$SetFromControl(R,$As(control$13,TW3CustomControl));return R},GetHeight$8:function(S,control$14){var R=undefined;if($Is(control$14,TLayoutImpl)){R=$As(control$14,TLayoutImpl).FBounds.Height$11;if(R==null)R=$As(control$14,TLayoutImpl).FConfig.FHeight$2;if(R!=null)R=R+$As(control$14,TLayoutImpl).FConfig.FMargins.Top$3+$As(control$14,TLayoutImpl).FConfig.FMargins.Bottom$1}else if(TW3MovableControl.GetVisible($As(control$14,TW3CustomControl))){R=TW3MovableControl.GetHeight$($As(control$14,TW3CustomControl))}else R=0;return R},GetLeft$4:function(S,control$15){var R=undefined;if($Is(control$15,TLayoutImpl)){R=$As(control$15,TLayoutImpl).FBounds.Left$10-$As(control$15,TLayoutImpl).FConfig.FMargins.Left$3}else R=TW3MovableControl.GetLeft($As(control$15,TW3CustomControl));return R},GetOwnerLeft:function(S,control$16){var R=undefined;R=0;if($Is(control$16,TW3MovableControl)){control$16=TW3TagContainer.a$46($As(control$16,TW3MovableControl));if((control$16!==null)&&$Is(control$16,TW3MovableControl))R=TW3MovableControl.GetLeft($As(control$16,TW3MovableControl))}
return R},GetOwnerTop:function(S,control$17){var R=undefined;R=0;if($Is(control$17,TW3MovableControl)){control$17=TW3TagContainer.a$46($As(control$17,TW3MovableControl));if((control$17!==null)&&$Is(control$17,TW3MovableControl))R=TW3MovableControl.GetTop($As(control$17,TW3MovableControl))}
return R},GetTop$1:function(S,control$18){var R=undefined;if($Is(control$18,TLayoutImpl)){R=$As(control$18,TLayoutImpl).FBounds.Top$10-$As(control$18,TLayoutImpl).FConfig.FMargins.Top$3}else R=TW3MovableControl.GetTop($As(control$18,TW3CustomControl));return R},GetWidth$9:function(S,control$19){var R=undefined;if($Is(control$19,TLayoutImpl)){R=$As(control$19,TLayoutImpl).FBounds.Width$13;if(R==null)R=$As(control$19,TLayoutImpl).FConfig.FWidth$2;if(R!=null)R=R+$As(control$19,TLayoutImpl).FConfig.FMargins.Left$3+$As(control$19,TLayoutImpl).FConfig.FMargins.Right$1}else if(TW3MovableControl.GetVisible($As(control$19,TW3CustomControl))){R=TW3MovableControl.GetWidth$($As(control$19,TW3CustomControl))}else R=0;return R},HasHeight:function(S,control$20){var R=false;R=true;if($Is(control$20,TLayoutImpl))R=$As(control$20,TLayoutImpl).FBounds.Height$11!=null;return R},HasWidth:function(S,control$21){var R=false;R=true;if($Is(control$21,TLayoutImpl))R=$As(control$21,TLayoutImpl).FBounds.Width$13!=null;return R},SetBottom$1:function(S,control$22,value$37){if($Is(control$22,TLayoutImpl)){TLayoutRect$SetTop$1($As(control$22,TLayoutImpl).FBounds,parseInt((value$37-$As(control$22,TLayoutImpl).FConfig.FMargins.Bottom$1-$As(control$22,TLayoutImpl).FBounds.Height$11),10))}else TW3MovableControl.SetTop($As(control$22,TW3CustomControl),(value$37-TW3MovableControl.GetHeight$($As(control$22,TW3CustomControl))))},SetHeight$5:function(S,control$23,value$38){if($Is(control$23,TLayoutImpl)){TLayoutRect$SetHeight$4($As(control$23,TLayoutImpl).FBounds,value$38-$As(control$23,TLayoutImpl).FConfig.FMargins.Top$3-$As(control$23,TLayoutImpl).FConfig.FMargins.Bottom$1)}else TW3MovableControl.SetHeight$($As(control$23,TW3CustomControl),value$38)},SetLeft$5:function(S,control$24,value$39){if($Is(control$24,TLayoutImpl)){TLayoutRect$SetLeft$4($As(control$24,TLayoutImpl).FBounds,value$39+$As(control$24,TLayoutImpl).FConfig.FMargins.Left$3)}else TW3MovableControl.SetLeft($As(control$24,TW3CustomControl),value$39)},SetRight$4:function(S,control$25,value$40){if($Is(control$25,TLayoutImpl)){TLayoutRect$SetLeft$4($As(control$25,TLayoutImpl).FBounds,parseInt((value$40-$As(control$25,TLayoutImpl).FConfig.FMargins.Right$1-$As(control$25,TLayoutImpl).FBounds.Width$13),10))}else TW3MovableControl.SetLeft($As(control$25,TW3CustomControl),(value$40-TW3MovableControl.GetWidth$($As(control$25,TW3CustomControl))))},SetTop$2:function(S,control$26,value$41){if($Is(control$26,TLayoutImpl)){TLayoutRect$SetTop$1($As(control$26,TLayoutImpl).FBounds,value$41+$As(control$26,TLayoutImpl).FConfig.FMargins.Top$3)}else TW3MovableControl.SetTop($As(control$26,TW3CustomControl),value$41)},SetWidth$6:function(S,control$27,value$42){if($Is(control$27,TLayoutImpl)){TLayoutRect$SetWidth$5($As(control$27,TLayoutImpl).FBounds,value$42-$As(control$27,TLayoutImpl).FConfig.FMargins.Left$3-$As(control$27,TLayoutImpl).FConfig.FMargins.Right$1)}else TW3MovableControl.SetWidth$($As(control$27,TW3CustomControl),value$42)},Destroy:TObject.Destroy};function AlignToString(align$21){var R="";switch(align$21){case 0:R="left";break;case 1:R="top";break;case 2:R="right";break;case 3:R="bottom";break;case 4:R="client";break}
return R};var TW3InputType=["itNone","itColor","itDate","itDateTime","itDateTimeLocal","itEmail","itMonth","itNumber","itRange","itSearch","itTel","itTime","itUrl","itWeek","itPassword","itFile"];var TW3EditBox={$ClassName:"TW3EditBox",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},getAutoCapitalize:function(S){var R=false;var mTemp$10="";R=false;mTemp$10=w3_getAttribAsStr(S.FHandle$1,"autocapitalize");if(mTemp$10.length>0)R=(mTemp$10).toLowerCase()=="on";return R},getAutoCorrect:function(S){var R=false;var mTemp$11="";R=false;mTemp$11=w3_getAttribAsStr(S.FHandle$1,"autocorrect");if(mTemp$11.length>0)R=(mTemp$11).toLowerCase()=="on";return R},getPlaceHolder:function(S){var R="";R=w3_getAttribAsStr(S.FHandle$1,"placeholder");return R},getRange:function(S){var R=undefined;if(S.FHandle$1){R=S.FHandle$1.value}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.getRange",TObject.ClassName(S.ClassType),"Invalid handle error"])}
return R},getText:function(S){var R="";R=w3_getPropertyAsStr(S.FHandle$1,"value");return R},getTextAlign:function(S){var R=0;var mText$1="";mText$1=(w3_GetStyleAsStr(S.FHandle$1,"textAlign")).toLowerCase();if(mText$1=="left"){R=0}else if(mText$1=="center"){R=1}else if(mText$1=="right")R=2;return R},getType:function(S){var R=0;var mText$2="";mText$2=(w3_getAttribAsStr(S.FHandle$1,"type")).toLowerCase();if(mText$2==""){R=0}else if(mText$2=="color"){R=1}else if(mText$2=="date"){R=2}else if(mText$2=="datetime"){R=3}else if(mText$2=="datetime-local"){R=4}else if(mText$2=="email"){R=5}else if(mText$2=="month"){R=6}else if(mText$2=="number"){R=7}else if(mText$2=="range"){R=8}else if(mText$2=="search"){R=9}else if(mText$2=="tel"){R=10}else if(mText$2=="time"){R=11}else if(mText$2=="url"){R=12}else if(mText$2=="week"){R=13}else if(mText$2=="password")R=14;if(mText$2=="file")R=15;return R},MakeElementTagObj:function(S){var R=undefined;R=w3_createHtmlElement("input");if(R)w3_setAttrib(R,"type","text");return R},setAutoCapitalize:function(S,aValue$48){if(S.FHandle$1){switch(aValue$48){case false:w3_setAttrib(S.FHandle$1,"autocapitalize","off");break;case true:w3_setAttrib(S.FHandle$1,"autocapitalize","on");break}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setAutoCapitalize",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setAutoCorrect:function(S,aValue$49){if(S.FHandle$1){switch(aValue$49){case false:w3_setAttrib(S.FHandle$1,"autocorrect","off");break;case true:w3_setAttrib(S.FHandle$1,"autocorrect","on");break}}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setAutoCorrect",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setPlaceHolder:function(S,aValue$50){if(S.FHandle$1){w3_setAttrib(S.FHandle$1,"placeholder",aValue$50)}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setPlaceHolder",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setRange:function(S,aValue$51){if(S.FHandle$1){S.FHandle$1.value=aValue$51}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setRange",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setText:function(S,aValue$52){w3_setProperty(S.FHandle$1,"value",aValue$52)},setTextAlign:function(S,aValue$53){var mToWrite="";switch(aValue$53){case 0:mToWrite="left";break;case 1:mToWrite="center";break;case 2:mToWrite="right";break}
if(S.FHandle$1){w3_SetStyle(S.FHandle$1,"textAlign",mToWrite)}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setTextAlign",TObject.ClassName(S.ClassType),"Invalid handle error"])}},setType:function(S,aValue$54){var mToWrite$1="";if(S.FHandle$1){switch(aValue$54){case 0:mToWrite$1="";break;case 1:mToWrite$1="color";break;case 2:mToWrite$1="date";break;case 3:mToWrite$1="datetime";break;case 4:mToWrite$1="datetime-local";break;case 5:mToWrite$1="email";break;case 6:mToWrite$1="month";break;case 7:mToWrite$1="number";break;case 8:mToWrite$1="range";break;case 9:mToWrite$1="search";break;case 10:mToWrite$1="tel";break;case 11:mToWrite$1="time";break;case 12:mToWrite$1="url";break;case 13:mToWrite$1="week";break;case 14:mToWrite$1="password";break;case 15:mToWrite$1="file";break}
w3_setAttrib(S.FHandle$1,"type",mToWrite$1)}else{throw EW3Exception.CreateFmt($New(EW3Exception),$R[0],["TW3EditBox.setType",TObject.ClassName(S.ClassType),"Invalid handle error"])}},StyleTagObject:function(S){w3_setAttrib(S.FHandle$1,"autocorrect","off");w3_setAttrib(S.FHandle$1,"autocapitalize","off");w3_setAttrib(S.FHandle$1,"placeholder","");w3_SetStyle(S.FHandle$1,"textAlign","left");TW3CustomControl.StyleTagObject(S)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj$:function($){return $.ClassType.MakeElementTagObj($)},Showing:TW3MovableControl.Showing,StyleTagObject$:function($){return $.ClassType.StyleTagObject($)},UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3EditBox.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbPreferencesWindow={$ClassName:"TWbPreferencesWindow",$Parent:TWbWindow,$Init:function($){TWbWindow.$Init($);$.FApply=$.FButtonLayout=$.FCancel=$.FEffectsClose=$.FEffectsCloseLabel=$.FEffectsMaximize=$.FEffectsMaximizeLabel=$.FEffectsMinimize=$.FEffectsMinimizeLabel=$.FEffectsOpen=$.FEffectsOpenLabel=$.FFooter$2=$.FLayout$2=$.FPanel$1=$.FSave=null},FinalizeObject:function(S){TObject.Free(S.FEffectsOpen);TObject.Free(S.FEffectsOpenLabel);TObject.Free(S.FEffectsClose);TObject.Free(S.FEffectsCloseLabel);TObject.Free(S.FEffectsMaximize);TObject.Free(S.FEffectsMaximizeLabel);TObject.Free(S.FEffectsMinimize);TObject.Free(S.FEffectsMinimizeLabel);TWbCustomWindow.FinalizeObject(S)},HandleApply:function(S,Sender$33){var LAccess$10=null;var LWriter$2=null;LAccess$10=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LWriter$2=LAccess$10[7]()[1]();LWriter$2[2]("window.effects.open",S.FEffectsOpen.FChecked);LWriter$2[2]("window.effects.close",S.FEffectsClose.FChecked);LWriter$2[2]("window.effects.minimize",S.FEffectsMinimize.FChecked);LWriter$2[2]("window.effects.maximize",S.FEffectsMaximize.FChecked);TWbCustomWindow.CloseWindow(S)},HandleSave:function(S,Sender$34){var LAccess$11=null;var LWriter$3=null;LAccess$11=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LWriter$3=LAccess$11[7]()[1]();LWriter$3[2]("window.effects.open",S.FEffectsOpen.FChecked);LWriter$3[2]("window.effects.close",S.FEffectsClose.FChecked);LWriter$3[2]("window.effects.minimize",S.FEffectsMinimize.FChecked);LWriter$3[2]("window.effects.maximize",S.FEffectsMaximize.FChecked);try{LAccess$11[10]()}catch($e){var e$41=$W($e);alert(e$41.FMessage)}
TWbCustomWindow.CloseWindow(S)},InitializeObject:function(S){var LAccess$12=null;var LReader$5=null;TWbCustomWindow.InitializeObject(S);S.FEffectsOpenLabel=TW3TagContainer.Create$41$($New(TW3Label),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsOpenLabel,"lbEffectsOpen");TW3MovableControl.SetBounds(S.FEffectsOpenLabel,10,10,200,32);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FEffectsOpenLabel),1,1,2,0);TW3Label.SetCaption$2(S.FEffectsOpenLabel,"Effect Window Open");TW3Label.SetTextAlign$1(S.FEffectsOpenLabel,2);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FEffectsOpenLabel),1,1,2,0);S.FEffectsOpen=TW3TagContainer.Create$41$($New(TW3ToggleSwitch),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsOpen,"btnEffectsOpen");TW3MovableControl.SetBounds(S.FEffectsOpen,220,10,150,32);S.FEffectsCloseLabel=TW3TagContainer.Create$41$($New(TW3Label),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsOpenLabel,"lbEffectsClose");TW3MovableControl.SetBounds(S.FEffectsCloseLabel,10,52,200,32);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FEffectsCloseLabel),1,1,2,0);TW3Label.SetCaption$2(S.FEffectsCloseLabel,"Effect Window Close");TW3Label.SetTextAlign$1(S.FEffectsCloseLabel,2);S.FEffectsClose=TW3TagContainer.Create$41$($New(TW3ToggleSwitch),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsClose,"btnEffectsClose");TW3MovableControl.SetBounds(S.FEffectsClose,220,52,150,32);S.FEffectsMaximizeLabel=TW3TagContainer.Create$41$($New(TW3Label),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsMaximizeLabel,"lbEffectsMaximize");TW3MovableControl.SetBounds(S.FEffectsMaximizeLabel,10,(52+42),200,32);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FEffectsMaximizeLabel),1,1,2,0);TW3Label.SetCaption$2(S.FEffectsMaximizeLabel,"Effect Window Maximize");TW3Label.SetTextAlign$1(S.FEffectsMaximizeLabel,2);S.FEffectsMaximize=TW3TagContainer.Create$41$($New(TW3ToggleSwitch),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsMaximize,"btnEffectsMaximize");TW3MovableControl.SetBounds(S.FEffectsMaximize,220,(52+42),150,32);S.FEffectsMinimizeLabel=TW3TagContainer.Create$41$($New(TW3Label),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsMinimizeLabel,"lbEffectsMinimize");TW3MovableControl.SetBounds(S.FEffectsMinimizeLabel,10,(52+42+42),200,32);TW3TextShadow.Shadow(TW3MovableControl.GetTextShadow(S.FEffectsMinimizeLabel),1,1,2,0);TW3Label.SetCaption$2(S.FEffectsMinimizeLabel,"Effect Window Minimize");TW3Label.SetTextAlign$1(S.FEffectsMinimizeLabel,2);S.FEffectsMinimize=TW3TagContainer.Create$41$($New(TW3ToggleSwitch),S.FContent);TW3TagContainer.SetComponentName(S.FEffectsMaximize,"btnEffectsMinimize");TW3MovableControl.SetBounds(S.FEffectsMinimize,220,(52+42+42),150,32);LAccess$12=$AsIntf($IntfAsClass(GetDesktop(),TObject),"IWbDesktop");LReader$5=LAccess$12[7]()[0]();TW3ToggleSwitch.SetChecked(S.FEffectsOpen,LReader$5[2]("window.effects.open"));TW3ToggleSwitch.SetChecked(S.FEffectsClose,LReader$5[2]("window.effects.close"));TW3ToggleSwitch.SetChecked(S.FEffectsMinimize,LReader$5[2]("window.effects.minimize"));TW3ToggleSwitch.SetChecked(S.FEffectsMaximize,LReader$5[2]("window.effects.maximize"));S.FPanel$1=TW3TagContainer.Create$41$($New(TW3Panel),S.FContent);TW3TagContainer.SetComponentName(S.FPanel$1,"PnlPrefs");S.FFooter$2=TW3TagContainer.Create$41$($New(TW3Panel),S.FContent);TW3TagContainer.SetComponentName(S.FPanel$1,"PnlPrefsFooter");TW3CustomControl.SetStyleClass(S.FFooter$2,"");TW3MovableControl.SetHeight$(S.FFooter$2,32);S.FCancel=TW3TagContainer.Create$41$($New(TW3Button),S.FFooter$2);TW3TagContainer.SetComponentName(S.FCancel,"btnCancel");TW3Button.SetCaption$1(S.FCancel,"Cancel");TW3CustomControl._setMouseClick(S.FCancel,function(Sender$35){TWbCustomWindow.CloseWindow(S)});S.FApply=TW3TagContainer.Create$41$($New(TW3Button),S.FFooter$2);TW3TagContainer.SetComponentName(S.FApply,"btnApply");TW3Button.SetCaption$1(S.FApply,"Apply");TW3CustomControl._setMouseClick(S.FApply,$Event1(S,TWbPreferencesWindow.HandleApply));S.FSave=TW3TagContainer.Create$41$($New(TW3Button),S.FFooter$2);TW3TagContainer.SetComponentName(S.FSave,"btnSave");TW3Button.SetCaption$1(S.FSave,"Save");TW3CustomControl._setMouseClick(S.FSave,$Event1(S,TWbPreferencesWindow.HandleSave))},ObjectReady:function(S){TWbCustomWindow.ObjectReady(S);S.FButtonLayout=Layout.Client(Layout,TLayoutConfig.Spacing$(Layout.Margins$2(Layout,2),10),[Layout.Left$8(Layout,S.FSave),Layout.Client$3(Layout,S.FApply),Layout.Right$7(Layout,S.FCancel)].slice());S.FLayout$2=Layout.Client(Layout,TLayoutConfig.Spacing$(Layout.Margins$2(Layout,4),4),[Layout.Top$8(Layout,[Layout.Top$6(Layout,TLayoutConfig.Margins$(TLayoutConfig.Spacing$(Layout.Stretch$1(Layout),8),2),[Layout.Client$3(Layout,S.FEffectsOpenLabel),Layout.Right$7(Layout,S.FEffectsOpen)].slice()),Layout.Top$6(Layout,TLayoutConfig.Margins$(TLayoutConfig.Spacing$(Layout.Stretch$1(Layout),8),2),[Layout.Client$3(Layout,S.FEffectsCloseLabel),Layout.Right$7(Layout,S.FEffectsClose)].slice()),Layout.Top$6(Layout,TLayoutConfig.Margins$(TLayoutConfig.Spacing$(Layout.Stretch$1(Layout),8),2),[Layout.Client$3(Layout,S.FEffectsMinimizeLabel),Layout.Right$7(Layout,S.FEffectsMinimize)].slice()),Layout.Top$6(Layout,TLayoutConfig.Margins$(TLayoutConfig.Spacing$(Layout.Stretch$1(Layout),8),2),[Layout.Client$3(Layout,S.FEffectsMaximizeLabel),Layout.Right$7(Layout,S.FEffectsMaximize)].slice())].slice()),Layout.Client$3(Layout,S.FPanel$1),Layout.Bottom$5(Layout,Layout.Height$10(Layout,36),S.FFooter$2)].slice());TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FEffectsOpen),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FEffectsOpen),12);TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsOpen.FOnText),TW3CustomControl.a$47(S.FEffectsOpen));TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsOpen.FOffText),TW3CustomControl.a$47(S.FEffectsOpen));TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsOpen.FOnText.FContainer),16777215);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FEffectsOpen.FOnText),6393550);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsOpen.FOffText),16777215);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FEffectsClose),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FEffectsClose),12);TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsClose.FOnText),TW3CustomControl.a$47(S.FEffectsClose));TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsClose.FOffText),TW3CustomControl.a$47(S.FEffectsClose));TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsClose.FOnText.FContainer),16777215);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FEffectsClose.FOnText),6393550);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsClose.FOffText),16777215);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FEffectsMaximize),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FEffectsMaximize),12);TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsMaximize.FOnText),TW3CustomControl.a$47(S.FEffectsMaximize));TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsMaximize.FOffText),TW3CustomControl.a$47(S.FEffectsMaximize));TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsMaximize.FOnText.FContainer),16777215);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FEffectsMaximize.FOnText),6393550);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsMaximize.FOffText),16777215);TW3CustomFont.SetName$1$(TW3CustomControl.a$47(S.FEffectsMinimize),"Ubuntu");TW3CustomFont.SetSize$4$(TW3CustomControl.a$47(S.FEffectsMinimize),12);TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsMinimize.FOnText),TW3CustomControl.a$47(S.FEffectsMinimize));TW3CustomFont.Assign$2(TW3CustomControl.a$47(S.FEffectsMinimize.FOffText),TW3CustomControl.a$47(S.FEffectsMinimize));TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsMinimize.FOnText.FContainer),16777215);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FEffectsMinimize.FOnText),6393550);TW3CustomFont.SetColor$3$(TW3CustomControl.a$47(S.FEffectsMinimize.FOffText),16777215)},Resize:function(S){TWbCustomWindow.Resize(S);if(S.FLayout$2!==null){try{TLayout.Resize$18$(S.FLayout$2,S.FContent)}catch($e){var e$42=$W($e)}}
if(S.FButtonLayout!==null){try{TLayout.Resize$18$(S.FButtonLayout,S.FFooter$2)}catch($e){var e$43=$W($e)}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbCustomWindow.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown:TWbWindow.HandleMouseDown};TWbPreferencesWindow.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TWbEditWindow={$ClassName:"TWbEditWindow",$Parent:TWbWindow,$Init:function($){TWbWindow.$Init($);$.FEditor=null},FinalizeObject:function(S){TObject.Free(S.FEditor);TWbCustomWindow.FinalizeObject(S)},HandleInputDisabled:function(S,Sender$36){TW3CustomControl.SetEnabled$(S.FEditor,false)},HandleInputEnabled:function(S,Sender$37){TW3CustomControl.SetEnabled$(S.FEditor,true)},InitializeObject:function(S){TWbCustomWindow.InitializeObject(S);S.FEditor=TW3TagContainer.Create$41$($New(TW3NiceEdit),S.FContent);S.FContent.OnInputDisabled=$Event1(S,TWbEditWindow.HandleInputDisabled);S.FContent.OnInputEnabled=$Event1(S,TWbEditWindow.HandleInputEnabled);TW3MovableControl.SetSize$3(S,480,406)},ObjectReady:function(S){TWbCustomWindow.ObjectReady(S)},Resize:function(S){TWbCustomWindow.Resize(S);TW3MovableControl.SetBounds(S.FEditor,0,0,TW3MovableControl.ClientWidth(S.FContent),TW3MovableControl.ClientHeight(S.FContent))},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TWbCustomWindow.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled,HandleMouseDown:TWbWindow.HandleMouseDown};TWbEditWindow.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3CustomScrollBar={$ClassName:"TW3CustomScrollBar",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FDownBtn=$.FHandle$16=$.FUpBtn=null;$.FPageSize=$.FPosition=$.FTotal=0},CalcSizeOfHandle:function(S){var R=0;var LRatio=0;LRatio=TW3CustomScrollBar.GetArea$(S)/S.FTotal;R=Math.round(LRatio*S.FPageSize);return R},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetExc(R,1,0,8);return R},FinalizeObject:function(S){TObject.Free(S.FUpBtn);TObject.Free(S.FDownBtn);TObject.Free(S.FHandle$16);TW3CustomControl.FinalizeObject(S)},HandleMaxClick:function(S,Sender$38){if(S.FTotal>0)TW3CustomScrollBar.SetPosition$2(S,S.FPosition+S.FPageSize)},HandleMinClick:function(S,Sender$39){if(S.FTotal>0)TW3CustomScrollBar.SetPosition$2(S,S.FPosition-S.FPageSize)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FUpBtn=TW3TagContainer.Create$41$($New(TW3ScrollbarLowerBtn),S);S.FDownBtn=TW3TagContainer.Create$41$($New(TW3ScrollbarHigherBtn),S);S.FHandle$16=TW3TagContainer.Create$41$($New(TW3ScrollbarHandle),S)},MouseWheelHandler:function(S,Sender$40,Shift$4,WheelDelta,MousePos,Handled$1){var e$44,LDelta=0;if(!$SetIn(S.FComponentState,5,0,6)){if(S.FTotal>0){e$44=window.event;LDelta=Math.max(-1,Math.min(1,WheelDelta|e$44.detail));TW3CustomScrollBar.SetPosition$2(S,Math.round(S.FPosition-LDelta*50));Handled$1.v=true}}},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3CustomControl._setMouseClick(S.FUpBtn,$Event1(S,TW3CustomScrollBar.HandleMinClick));TW3CustomControl._setMouseClick(S.FDownBtn,$Event1(S,TW3CustomScrollBar.HandleMaxClick));TW3CustomControl._setMouseWheel(S,$Event(S,TW3CustomScrollBar.MouseWheelHandler));TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S),16777215);TW3TagObj.a$45(S.FUpBtn,1);TW3TagObj.a$45(S.FHandle$16,1);TW3TagObj.a$45(S.FDownBtn,1)},PixelOffsetToPosition:function(S,aPxPos){var R=0;R=Math.round(aPxPos*S.FTotal/TW3CustomScrollBar.GetArea$(S));return R},PositionToPixelOffset:function(S,aPosition){var R=0;R=Math.round(aPosition*TW3CustomScrollBar.GetArea$(S)/S.FTotal);return R},SetEnabled:function(S,EnabledValue$3){TW3CustomControl.SetEnabled$(S.FUpBtn,EnabledValue$3);TW3CustomControl.SetEnabled$(S.FDownBtn,EnabledValue$3);TW3CustomControl.SetEnabled(S,EnabledValue$3)},SetPageSize:function(S,NewPageSize){NewPageSize=TInteger.EnsureRange(NewPageSize,0,S.FTotal);if(NewPageSize!=S.FPageSize){S.FPageSize=NewPageSize;if(S.FTotal>0){TW3TagObj.BeginUpdate(S);TW3CustomScrollBar.Recalculate$(S);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S);TW3Dispatch.Execute(TW3Dispatch,function(){if(S.FOnChanged)S.FOnChanged(S)},100)}}},SetPosition$2:function(S,NewPosition$2){NewPosition$2=TInteger.EnsureRange(NewPosition$2,0,(S.FTotal-S.FPageSize));if(NewPosition$2!=S.FPosition){S.FPosition=NewPosition$2;if(S.FTotal>0){TW3TagObj.BeginUpdate(S);TW3CustomScrollBar.Recalculate$(S);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S);if(S.FOnChanged)S.FOnChanged(S)}}},SetPositionNoCalc:function(S,NewPosition$3){NewPosition$3=TInteger.EnsureRange(NewPosition$3,0,(S.FTotal-S.FPageSize));if(NewPosition$3!=S.FPosition){S.FPosition=NewPosition$3;if(S.FOnChanged)S.FOnChanged(S)}},SetTotal:function(S,NewTotal){NewTotal=TInteger.EnsureRange(NewTotal,0,2147483647);if(NewTotal!=S.FTotal){S.FTotal=NewTotal;if(S.FPageSize>S.FTotal)S.FPageSize=S.FTotal;if(S.FPosition>S.FTotal-S.FPageSize){if(S.FTotal-S.FPageSize<1){S.FPosition=0}else S.FPosition=S.FTotal-S.FPageSize}
if(TControlHandleHelper$Valid$2(S.FHandle$1)&&$SetIn(S.FComponentState,2,0,6)){TW3TagObj.BeginUpdate(S);TW3CustomScrollBar.Recalculate$(S);TW3TagObj.AddToComponentState(S,[8]);TW3TagObj.EndUpdate(S);TW3Dispatch.Execute(TW3Dispatch,function(){if(S.FOnChanged)S.FOnChanged(S)},100)}}},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)},GetArea$:function($){return $.ClassType.GetArea($)},Recalculate$:function($){return $.ClassType.Recalculate($)}};TW3CustomScrollBar.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3VerticalScrollbar={$ClassName:"TW3VerticalScrollbar",$Parent:TW3CustomScrollBar,$Init:function($){TW3CustomScrollBar.$Init($);$.FDragPos=$.FDragSize=$.FEntry=0;$.FMoving=false},GetArea:function(S){var R=0;R=TW3MovableControl.GetTop(S.FDownBtn)-1-(TW3MovableControl.GetBoundsRect(S.FUpBtn).Bottom$1+1);return R},HandleDragBarMouseDown:function(S,Sender$41,button$8,shiftState$14,x$95,y$45){if(button$8==0){if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHandle$16),x$95,y$45)){TW3CustomControl.SetCapture(S);S.FEntry=y$45-TW3MovableControl.GetTop(S.FHandle$16);S.FMoving=true;TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FHandle$16),16711680)}else{if(y$45<TW3MovableControl.GetTop(S.FHandle$16)&&(!TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FUpBtn),x$95,y$45))){TW3CustomScrollBar.SetPosition$2(S,S.FPosition-S.FPageSize)}else if(y$45>TW3MovableControl.GetBoundsRect(S.FHandle$16).Bottom$1&&(!TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FDownBtn),x$95,y$45)))TW3CustomScrollBar.SetPosition$2(S,S.FPosition+S.FPageSize);TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FHandle$16),255)}}},HandleDragBarMouseMove:function(S,Sender$42,shiftState$15,x$96,y$46){var mNewPos=0;var dy$18=0;if(S.FMoving){dy$18=y$46-S.FEntry;TW3MovableControl.SetTop(S.FHandle$16,TInteger.EnsureRange(dy$18,TW3MovableControl.GetBoundsRect(S.FUpBtn).Bottom$1,(TW3MovableControl.GetTop(S.FDownBtn)-S.FDragSize)));mNewPos=TW3CustomScrollBar.PixelOffsetToPosition(S,(TW3MovableControl.GetTop(S.FHandle$16)-TW3MovableControl.GetBoundsRect(S.FUpBtn).Bottom$1));TW3CustomScrollBar.SetPositionNoCalc(S,mNewPos)}},HandleDragBarMouseUp:function(S,Sender$43,button$9,shiftState$16,x$97,y$47){if(S.FMoving){S.FMoving=false;TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FHandle$16),255);TW3CustomControl.ReleaseCapture(S)}},InitializeObject:function(S){TW3CustomScrollBar.InitializeObject(S);S.FMoving=false;TW3CustomControl.SetStyleClass(S.FUpBtn,"TW3ScrollbarDownBtn");TW3CustomControl.SetStyleClass(S.FDownBtn,"TW3ScrollbarUpBtn");TW3CustomControl.SetStyleClass(S.FHandle$16,"TW3ScrollbarHandle");TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(S.FUpBtn),"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA\/klEQVQ4je2QvUrEQBSFz40PYOHCggiCrQmWlsLiA8xkyDtoq2wharfNylY2+hKZSdJYWIngOwQFkd0n2DbMiU0CMf6gdoKnGc65d757ucCfl3xVVEodisiuiJxZaxc\/AmitLwCMGzv33o+Konj6FkApNROR4168CIJglKbpYzcMPpg86X1eNu8GyVtjzNZnANFaXwE47WRjkqGItKtvknwwxmy\/A8RxfATgoPV1XZ8752Z5ns8B7IvIc1MakrxJkmT1DYDkTmfySZZlk9ZYa1+893udTdarqhoAwErbFEXRHck1ANfOucv+bcqyXIZhaEkORGTqnLvv9\/zrl3oFMYVbLEeX4OkAAAAASUVORK5CYII=");TW3ControlBackgroundSize.SetMode(TW3MovableControl.GetBackGround(S.FUpBtn).FSize$2,4);TW3ControlBackground.FromURL(TW3MovableControl.GetBackGround(S.FDownBtn),"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAABBUlEQVQ4je2PMU7DQBRE5y9ukBsOQGIRhCxouAUV1nrX2pJTAKKLEmq4yhr7AqahpERyChfAHRAWK38aJyIro4gyEtPN\/HmzWuBfOz9NlmVHcRx3dV1\/\/gZIKU+iKPpomuYLAMTyoLW+6LpuQUTPxpjxEKyUmgohXsIwfDLG7K4NMPM5AAIwcc5V\/ohSagpg3tvTtm3H\/sANgNfeTpxzlZRyNACDmWdlWS7Qv7hSkiQHQRBUAKI+apj5gYgulx0imltrZyvv\/1Nrvc\/MjwAO\/RsRXVlr79cyvwQAUsqREKLyRq7zPL\/zu8IPAKAoinchxBkzv\/XR7RC8UWma7imljv8Mbpe+AQXEWbnYo3KmAAAAAElFTkSuQmCC");TW3ControlBackgroundSize.SetMode(TW3MovableControl.GetBackGround(S.FDownBtn).FSize$2,4);TW3CustomControl._setMouseDown(S,$Event(S,TW3VerticalScrollbar.HandleDragBarMouseDown));TW3CustomControl._setMouseMove(S,$Event(S,TW3VerticalScrollbar.HandleDragBarMouseMove));TW3CustomControl._setMouseUp(S,$Event(S,TW3VerticalScrollbar.HandleDragBarMouseUp));TW3CustomControl._setTouchBegins(S,function(Sender$44,Info$3){var LTouch=null;var MouseButton$1=0;var LMouse={X$1:0,Y$1:0};var sr$6={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$3))>0){LTouch=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$3),0);MouseButton$1=0;sr$6=TW3MovableControl.ScreenRect($As(Sender$44,TW3MovableControl));LMouse.X$1=parseInt((LTouch.screenX-sr$6.Left$3),10);LMouse.Y$1=parseInt((LTouch.screenY-sr$6.Top$3),10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3VerticalScrollbar.HandleDragBarMouseDown(S,Sender$44,MouseButton$1,TShiftState.Current$1(),LMouse.X$1,LMouse.Y$1)}});TW3CustomControl._setTouchMoves(S,function(Sender$45,Info$4){var LTouch$1=null;var MouseButton$2=0;var LMouse$1={X$1:0,Y$1:0};var sr$7={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$4))>0){LTouch$1=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$4),0);MouseButton$2=0;sr$7=TW3MovableControl.ScreenRect($As(Sender$45,TW3MovableControl));LMouse$1.X$1=parseInt((LTouch$1.screenX-sr$7.Left$3),10);LMouse$1.Y$1=parseInt((LTouch$1.screenY-sr$7.Top$3),10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3VerticalScrollbar.HandleDragBarMouseMove(S,Sender$45,TShiftState.Current$1(),LMouse$1.X$1,LMouse$1.Y$1)}});TW3CustomControl._setTouchEnds(S,function(Sender$46,Info$5){var LTouch$2=null;var MouseButton$3=0;var LMouse$2={X$1:0,Y$1:0};var sr$8={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$5))>0){LTouch$2=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$5),0);MouseButton$3=0;sr$8=TW3MovableControl.ScreenRect($As(Sender$46,TW3MovableControl));LMouse$2.X$1=parseInt((LTouch$2.screenX-sr$8.Left$3),10);LMouse$2.Y$1=parseInt((LTouch$2.screenY-sr$8.Top$3),10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3VerticalScrollbar.HandleDragBarMouseUp(S,Sender$46,MouseButton$3,TShiftState.Current$1(),LMouse$2.X$1,LMouse$2.Y$1)}})},Recalculate:function(S){S.FDragSize=TW3CustomScrollBar.CalcSizeOfHandle(S);S.FDragPos=TW3CustomScrollBar.PositionToPixelOffset(S,S.FPosition)},Resize:function(S){var mTop=0;TW3MovableControl.Resize(S);TW3MovableControl.SetBounds(S.FUpBtn,0,0,TW3MovableControl.ClientWidth(S),TW3MovableControl.ClientWidth(S));TW3MovableControl.SetBounds(S.FDownBtn,0,(TW3MovableControl.ClientHeight(S)-TW3MovableControl.ClientWidth(S)),TW3MovableControl.ClientWidth(S),TW3MovableControl.ClientWidth(S));TW3CustomScrollBar.Recalculate$(S);if(S.FTotal<1||S.FDragPos<0){TW3MovableControl.SetVisible(S.FHandle$16,false)}else TW3MovableControl.SetVisible(S.FHandle$16,true);mTop=TW3MovableControl.GetTop(S.FUpBtn)+TW3MovableControl.GetHeight$(S.FUpBtn)+1+S.FDragPos;TW3MovableControl.SetBounds(S.FHandle$16,2,mTop,(TW3MovableControl.ClientWidth(S)-4),S.FDragSize)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomScrollBar.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3CustomScrollBar.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3CustomScrollBar.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomScrollBar.SetEnabled,GetArea$:function($){return $.ClassType.GetArea($)},Recalculate$:function($){return $.ClassType.Recalculate($)}};TW3VerticalScrollbar.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ScrollbarLowerBtn={$ClassName:"TW3ScrollbarLowerBtn",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},SetEnabled:function(S,EnabledValue$4){TW3CustomControl.SetEnabled(S,EnabledValue$4);switch(EnabledValue$4){case false:TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"DisabledControl");break;case true:TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"DisabledControl");break}},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetExc(R,6,0,8);return R},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3ScrollbarLowerBtn.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ScrollbarHigherBtn={$ClassName:"TW3ScrollbarHigherBtn",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},SetEnabled:function(S,EnabledValue$5){TW3CustomControl.SetEnabled(S,EnabledValue$5);switch(EnabledValue$5){case false:TW3TagStyle.AddClassToControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"DisabledControl");break;case true:TW3TagStyle.RemoveClassFromControl(TW3CustomControl.GetTagStyle(S).ClassType,S.FHandle$1,"DisabledControl");break}},CreationFlags:function(S){var R=[0];R=TW3TagObj.CreationFlags(S);$SetExc(R,6,0,8);return R},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3ScrollbarHigherBtn.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3ScrollbarHandle={$ClassName:"TW3ScrollbarHandle",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($)},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);TW3TagObj.a$45(S,1)},CreationFlags:function(S){var R=[0];R=[62];return R},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomControl.FinalizeObject,InitializeObject:TW3MovableControl.InitializeObject,AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags$:function($){return $.CreationFlags($)},HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize:TW3MovableControl.Resize,SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3ScrollbarHandle.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3HorizontalScrollbar={$ClassName:"TW3HorizontalScrollbar",$Parent:TW3CustomScrollBar,$Init:function($){TW3CustomScrollBar.$Init($);$.FDragPos$1=$.FDragSize$1=$.FEntry$1=0;$.FMoving$1=false},GetArea:function(S){var R=0;R=TW3MovableControl.GetLeft(S.FDownBtn)-1-(TW3MovableControl.GetBoundsRect(S.FUpBtn).Right$1+1);return R},HandleDragBarMouseDown$1:function(S,Sender$47,button$10,shiftState$17,x$98,y$48){if(button$10==0){if(TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FHandle$16),x$98,y$48)){TW3CustomControl.SetCapture(S);S.FEntry$1=x$98-TW3MovableControl.GetLeft(S.FHandle$16);S.FMoving$1=true}else{if(x$98<TW3MovableControl.GetLeft(S.FHandle$16)&&(!TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FUpBtn),x$98,y$48))){TW3CustomScrollBar.SetPosition$2(S,S.FPosition-S.FPageSize)}else if(x$98>TW3MovableControl.GetBoundsRect(S.FHandle$16).Right$1&&(!TRect$ContainsPos$1(TW3MovableControl.GetBoundsRect(S.FDownBtn),x$98,y$48)))TW3CustomScrollBar.SetPosition$2(S,S.FPosition+S.FPageSize)}}},HandleDragBarMouseMove$1:function(S,Sender$48,shiftState$18,x$99,y$49){var mNewPos$1=0;var dx$19=0;if(S.FMoving$1){dx$19=x$99-S.FEntry$1;TW3MovableControl.SetLeft(S.FHandle$16,TInteger.EnsureRange(dx$19,TW3MovableControl.GetBoundsRect(S.FUpBtn).Right$1,(TW3MovableControl.GetLeft(S.FDownBtn)-S.FDragSize$1)));mNewPos$1=TW3CustomScrollBar.PixelOffsetToPosition(S,(TW3MovableControl.GetLeft(S.FHandle$16)-(TW3MovableControl.GetBoundsRect(S.FUpBtn).Right$1+1)));TW3CustomScrollBar.SetPositionNoCalc(S,mNewPos$1)}},HandleDragBarMouseUp$1:function(S,Sender$49,button$11,shiftState$19,x$100,y$50){if(S.FMoving$1){S.FMoving$1=false;TW3CustomControl.ReleaseCapture(S)}},InitializeObject:function(S){TW3CustomScrollBar.InitializeObject(S);S.FMoving$1=false;TW3CustomControl.SetStyleClass(S.FUpBtn,"TW3ScrollbarLeftBtn");TW3CustomControl.SetStyleClass(S.FDownBtn,"TW3ScrollbarRightBtn");TW3CustomControl.SetStyleClass(S.FHandle$16,"TW3ScrollbarHandle");TW3TagObj.a$40(S.FUpBtn,("<img width=100% height=100% src=\""+"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA6klEQVQ4jcWSMU7EQAxFv0OFaLmEfQVoKBDtZE6ChLYAKRQsokAg7Uk8B4COhprGPgIF1bZImGYjLUMSQrXu\/Of\/J8tjYNe195chpXTJzEVE3s3srX5vpsI5546I7gAcRsTjkGcUkHPuIuKm74loNeSjIbFt23sAiy1pUUp5mAX4T\/gXIKWUiKhsjX2rqt1YGKh20DTND2BErKfCQPWNZubMvAZwtpFOmXnf3Z9nAQDA3V8ryDEzH7j70yxADxGRLwAnG+lIRD7N7KX2jt6Bqi6J6LrvI+J8yDd5iaq6jIgrAB9EdDHl3V19A2PtT5Dyi9aLAAAAAElFTkSuQmCC"+"\">"));TW3TagObj.a$40(S.FDownBtn,("<img width=100% height=100% src=\""+"data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8\/9hAAAABmJLR0QA\/wD\/AP+gvaeTAAAA1UlEQVQ4jc3QsWoCQRDG8f8YsbDOQ9zcK0gaMf3tE\/gKSpBY2AaClU9yB9amiWibcsd3sEmTKnBpPFiOvSVWOt3szPdjd+HW9RA7dM5NVXWnqj0zO1wNqOoH8AhMVPXXzPZXAVmWDURkfGnHKSQKmNmnqv4Azw2S5\/nQe7\/7F3BBji1kFEM6gQAZAE8B8uW9PzU7vRQAUNf1d2reTw2dc+\/Aa9OLyLwsy224I4nwGli0wpv2XvQJRVGswjCwioU7ARGZheGqqt66btr1iS\/AGVimwvdRf3FdSIK1auN+AAAAAElFTkSuQmCC"+"\">"));TW3CustomControl._setMouseDown(S,$Event(S,TW3HorizontalScrollbar.HandleDragBarMouseDown$1));TW3CustomControl._setMouseMove(S,$Event(S,TW3HorizontalScrollbar.HandleDragBarMouseMove$1));TW3CustomControl._setMouseUp(S,$Event(S,TW3HorizontalScrollbar.HandleDragBarMouseUp$1));TW3CustomControl._setTouchBegins(S,function(Sender$50,Info$6){var LTouch$3=null;var MouseButton$4=0;var LMouse$3={X$1:0,Y$1:0};var sr$9={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$6))>0){LTouch$3=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$6),0);MouseButton$4=0;sr$9=TW3MovableControl.ScreenRect($As(Sender$50,TW3MovableControl));LMouse$3.X$1=parseInt(LTouch$3.screenX,10);LMouse$3.Y$1=parseInt(LTouch$3.screenY,10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3HorizontalScrollbar.HandleDragBarMouseDown$1(S,Sender$50,MouseButton$4,TShiftState.Current$1(),LMouse$3.X$1,LMouse$3.Y$1)}});TW3CustomControl._setTouchMoves(S,function(Sender$51,Info$7){var LTouch$4=null;var MouseButton$5=0;var LMouse$4={X$1:0,Y$1:0};var sr$10={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$7))>0){LTouch$4=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$7),0);MouseButton$5=0;sr$10=TW3MovableControl.ScreenRect($As(Sender$51,TW3MovableControl));LMouse$4.X$1=parseInt(LTouch$4.screenX,10);LMouse$4.Y$1=parseInt(LTouch$4.screenY,10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3HorizontalScrollbar.HandleDragBarMouseMove$1(S,Sender$51,TShiftState.Current$1(),LMouse$4.X$1,LMouse$4.Y$1)}});TW3CustomControl._setTouchEnds(S,function(Sender$52,Info$8){var LTouch$5=null;var MouseButton$6=0;var LMouse$5={X$1:0,Y$1:0};var sr$11={Bottom$1:0,Left$3:0,Right$1:0,Top$3:0};if(TW3TouchList.a$91(TW3TouchData.GetTouches(Info$8))>0){LTouch$5=TW3TouchList.a$92(TW3TouchData.GetTouches(Info$8),0);MouseButton$6=0;sr$11=TW3MovableControl.ScreenRect($As(Sender$52,TW3MovableControl));LMouse$5.X$1=parseInt(LTouch$5.screenX,10);LMouse$5.Y$1=parseInt(LTouch$5.screenY,10);TShiftState.SetKeyStateEvent(TShiftState.Current$1(),event);TW3HorizontalScrollbar.HandleDragBarMouseUp$1(S,Sender$52,MouseButton$6,TShiftState.Current$1(),LMouse$5.X$1,LMouse$5.Y$1)}})},Recalculate:function(S){S.FDragSize$1=TW3CustomScrollBar.CalcSizeOfHandle(S);S.FDragPos$1=TW3CustomScrollBar.PositionToPixelOffset(S,S.FPosition)},Resize:function(S){var mLeft=0;TW3MovableControl.Resize(S);TW3MovableControl.SetBounds(S.FUpBtn,0,0,TW3MovableControl.ClientHeight(S),TW3MovableControl.ClientHeight(S));TW3MovableControl.SetBounds(S.FDownBtn,(TW3MovableControl.ClientWidth(S)-TW3MovableControl.ClientHeight(S)),0,TW3MovableControl.ClientHeight(S),TW3MovableControl.ClientHeight(S));TW3CustomScrollBar.Recalculate$(S);if(S.FTotal<1||S.FDragPos$1<0){TW3MovableControl.SetVisible(S.FHandle$16,false)}else TW3MovableControl.SetVisible(S.FHandle$16,true);mLeft=TW3MovableControl.GetLeft(S.FUpBtn)+TW3MovableControl.GetWidth$(S.FUpBtn)+1+S.FDragPos$1;TW3MovableControl.SetBounds(S.FHandle$16,mLeft,2,S.FDragSize$1,(TW3MovableControl.ClientHeight(S)-4))},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject:TW3CustomScrollBar.FinalizeObject,InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3CustomScrollBar.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3CustomScrollBar.ObjectReady,Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomScrollBar.SetEnabled,GetArea$:function($){return $.ClassType.GetArea($)},Recalculate$:function($){return $.ClassType.Recalculate($)}};TW3HorizontalScrollbar.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3NiceEditEngine={$ClassName:"TW3NiceEditEngine",$Parent:TObject,$Init:function($){TObject.$Init($)},SetupLibrary:function(S,CB$9){if(!FInitialized$2){TW3Storage.LoadImage$1(TW3Storage,"\/res\/nicEditorIcons.gif");TW3Storage.LoadScript$1(TW3Storage,"\/lib\/nicEdit.js",function(Filename$6,ScriptObj,Success$2){FInitialized$2=Success$2;if(Success$2){FScriptObj=ScriptObj}else FInternal=true;if(CB$9){CB$9(Success$2)}})}else{if(CB$9)CB$9(true)}},Destroy:TObject.Destroy};var TW3NiceEdit={$ClassName:"TW3NiceEdit",$Parent:TW3CustomControl,$Init:function($){TW3CustomControl.$Init($);$.FChild=$.FHScroll=$.FVScroll=null;$.FInstance$1=undefined},ActivateEditor:function(S){var LObj$2=undefined;var LName$8="";if(!FInitialized$2){TW3CustomControl.SetEnabled$(S,false);TW3TagObj.a$45(S,10);TW3NiceEditEngine.SetupLibrary(TW3NiceEditEngine,function(Success$3){if(Success$3){TW3Dispatch.Execute(TW3Dispatch,function(){TW3NiceEdit.ActivateEditor(S);TW3TagObj.a$45(S,1);TW3CustomControl.SetEnabled$(S,true)},100)}else return});return}
if(!THandleHelper$Valid$4(S.FInstance$1)){LName$8=S.FChild.FTagId;LObj$2=new nicEditor({fullPanel:true}).panelInstance(LName$8);S.FInstance$1=LObj$2;TW3TagObj.a$40(S.FChild,"<b>This is a test<\/b><br>Of NiceEdit which is very cool");TW3Dispatch.Execute(TW3Dispatch,function(){TW3CustomControl.Invalidate$(S)},100)}},DeactivateEditor:function(S){var LId$2="";if(THandleHelper$Valid$4(S.FInstance$1)){LId$2=S.FChild.FTagId;S.FInstance$1=(S.FInstance$1).removeInstance(LId$2);S.FInstance$1=null}},FinalizeObject:function(S){TW3NiceEdit.DeactivateEditor(S);TObject.Free(S.FChild);TObject.Free(S.FHScroll);TObject.Free(S.FVScroll);TW3CustomControl.FinalizeObject(S)},InitializeObject:function(S){TW3MovableControl.InitializeObject(S);S.FChild=TW3TagContainer.Create$41$($New(TW3DIVHtmlElement),S);S.FHScroll=TW3TagContainer.Create$41$($New(TW3HorizontalScrollbar),S);S.FVScroll=TW3TagContainer.Create$41$($New(TW3VerticalScrollbar),S)},ObjectReady:function(S){TW3MovableControl.ObjectReady(S);S.FChild.FHandle$1.style.width="100%";S.FChild.FHandle$1.style.height="100%";TW3NiceEdit.ActivateEditor(S)},Resize:function(S){var LheadTop=0;var dx$20=0;var dy$19=0;var LWrapper=null;TW3MovableControl.Resize(S);if(THandleHelper$Valid$4(S.FInstance$1)){LheadTop=48;LWrapper=TW3HtmlElement.Create$166($New(TW3HtmlElement),S.FHandle$1);if(TW3HtmlElement.a$291(LWrapper).length>1){LWrapper=TW3HtmlElement.Wrap(LWrapper,TW3HtmlElement.a$291(LWrapper)[0]);LWrapper.FHandle$15.style.width="100%";LheadTop=TW3HtmlElement.a$285(LWrapper)}
TW3MovableControl.SetBounds(S.FChild,1,LheadTop,(TW3MovableControl.ClientWidth(S)-24-2),(TW3MovableControl.ClientHeight(S)-LheadTop-24-1))}
if(S.FHScroll){dy$19=TW3MovableControl.ClientHeight(S)-24;TW3MovableControl.SetBounds(S.FHScroll,0,dy$19,(TW3MovableControl.ClientWidth(S)-24),24)}
if(S.FVScroll){dx$20=TW3MovableControl.ClientWidth(S)-24;TW3MovableControl.SetBounds(S.FVScroll,dx$20,LheadTop,24,(TW3MovableControl.ClientHeight(S)-LheadTop-24))}},SetEnabled:function(S,EnabledValue$6){TW3CustomControl.SetEnabled(S,EnabledValue$6);TW3CustomControl.SetEnabled$(S.FHScroll,EnabledValue$6);TW3CustomControl.SetEnabled$(S.FVScroll,EnabledValue$6);if(!EnabledValue$6){TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FChild),536870911)}else TW3ControlBackground.FromColor$1(TW3MovableControl.GetBackGround(S.FChild),16777215)},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3TagObj.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady$:function($){return $.ClassType.ObjectReady($)},Resize$:function($){return $.ClassType.Resize($)},SetHeight:TW3MovableControl.SetHeight,SetWidth:TW3MovableControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3CustomControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled$:function($){return $.ClassType.SetEnabled.apply($.ClassType,arguments)}};TW3NiceEdit.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var TW3HtmlElement={$ClassName:"TW3HtmlElement",$Parent:TObject,$Init:function($){TObject.$Init($);$.FHandle$15=undefined},a$291:function(S){return S.FHandle$15.children},a$286:function(S,Value$40){S.FHandle$15.clientHeight=TW3HtmlElement.IntToPixels(S,Value$40)},a$285:function(S){return TW3HtmlElement.ValueToInt(S,S.FHandle$15.clientHeight)},Create$166:function(S,TagHandle){TObject.Create(S);S.FHandle$15=TagHandle;return S},Create$165:function(S,Parent$4,TagId$2){TObject.Create(S);S.FHandle$15=TControlHandleHelper$GetChildById(Parent$4,TagId$2);return S},Create$164:function(S,TagId$3){TObject.Create(S);S.FHandle$15=document.body.GetChildById(TagId$3);return S},IntToPixels:function(S,Value$41){var R="";R=Value$41.toString()+"px";return R},ValueToInt:function(S,Value$42){var R=0;if(Value$42)
{if(typeof(Value$42)==="number"){R=Value$42}else{if(typeof(Value$42)==="string")
{Value$42=parseInt(Value$42);if(!isNaN(Value$42))
R=Value$42}}}else{R=0}
return R},Wrap:function(S,Handle$26){var R=null;R=TW3HtmlElement.Create$166($New(TW3HtmlElement),Handle$26);return R},Destroy:TObject.Destroy};var TW3CustomGameApplication={$ClassName:"TW3CustomGameApplication",$Parent:TW3CustomApplication,$Init:function($){TW3CustomApplication.$Init($);$.FViewer=null},HandlePaintEvent:function(S,Sender$53,Canvas$2){TW3CustomGameApplication.PaintView(S,Canvas$2)},ApplicationStarting:function(S){S.FViewer=TW3TagContainer.Create$41$($New(TW3GameView),S.FDisplay.FView);TW3CustomApplication.ApplicationStarting(S);S.FViewer.FOnPaint=$Event2(S,TW3CustomGameApplication.HandlePaintEvent)},ApplicationClosing:function(S){if(S.FViewer.FActive$1)TW3GameView.EndSession(S.FViewer);TObject.Free(S.FViewer);TW3CustomApplication.ApplicationClosing(S)},Destroy:TW3CustomApplication.Destroy,ApplicationClosing$:function($){return $.ClassType.ApplicationClosing($)},ApplicationStarted:TW3CustomApplication.ApplicationStarted,ApplicationStarting$:function($){return $.ClassType.ApplicationStarting($)},Create$134:TW3CustomApplication.Create$134};var TW3GameView={$ClassName:"TW3GameView",$Parent:TW3GraphicControl,$Init:function($){TW3GraphicControl.$Init($);$.AutoPause=$.FActive$1=$.FPaused=$.FWithFrameCounter=false;$.FAnimationCallback=null;$.FAnimationTimer=undefined;$.FDelay$2=$.FFrameCount=$.FFrameRate=0;$.FFrameRateReference=$.FLastFrameReference=$.FLastFrameTime=0;$.FFrameTimer=undefined;$.FVisibilityChange=null},EndSession:function(S){if(!S.FPaused)TW3GameView.Suspend(S);S.FActive$1=false},FinalizeObject:function(S){document.removeEventListener(vVisibilityEventName,S.FVisibilityChange);if(S.FActive$1)TW3GameView.EndSession(S);TW3GraphicControl.FinalizeObject(S)},HandleCallBack:function(S){++S.FFrameCount;if(S.FDelay$2>0){S.FAnimationTimer=TW3Dispatch.SetTimeOut(TW3Dispatch,S.FAnimationCallback,S.FDelay$2)}else S.FAnimationTimer=TW3Dispatch.RequestAnimationFrame(TW3Dispatch,S.FAnimationCallback);if(S.FLastFrameReference==0){S.FLastFrameReference=PerformanceTimer.Now$1();S.FLastFrameTime=0}else{S.FLastFrameTime=S.FLastFrameReference;S.FLastFrameReference=PerformanceTimer.Now$1();S.FLastFrameTime=S.FLastFrameReference-S.FLastFrameTime}
TW3GraphicControl.Refresh(S)},HandleFrameRateCallback:function(S){var t$2=0;t$2=S.FFrameRateReference;S.FFrameRateReference=PerformanceTimer.Now$1();S.FFrameRate=Math.round(S.FFrameCount*1000/(S.FFrameRateReference-t$2));S.FFrameCount=0;S.FFrameTimer=TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(S,TW3GameView.HandleFrameRateCallback),1000)},InitializeObject:function(S){TW3GraphicControl.InitializeObject(S);S.FVisibilityChange=$Event0(S,TW3GameView.VisibilityChange);if(vVisibilityEventName==""){if(document["hidden"]!=undefined){vVisibilityEventName="visibilitychange";vVisibilityHiddenName="hidden"}else{vVisibilityEventName="webkitvisibilitychange";vVisibilityHiddenName="webkitHidden"}}
document.addEventListener(vVisibilityEventName,S.FVisibilityChange);S.AutoPause=true},Resume:function(S){S.FAnimationCallback=$Event0(S,TW3GameView.HandleCallBack);if(S.FDelay$2>0){S.FAnimationTimer=TW3Dispatch.SetTimeOut(TW3Dispatch,S.FAnimationCallback,S.FDelay$2)}else S.FAnimationTimer=TW3Dispatch.RequestAnimationFrame(TW3Dispatch,S.FAnimationCallback);S.FLastFrameReference=0;if(S.FWithFrameCounter){S.FFrameTimer=TW3Dispatch.SetTimeOut(TW3Dispatch,$Event0(S,TW3GameView.HandleFrameRateCallback),1000);S.FFrameRateReference=PerformanceTimer.Now$1()}else S.FFrameTimer=null},SetPaused:function(S,value$43){if(value$43!=S.FPaused){if(S.FPaused){TW3GameView.Resume(S)}else TW3GameView.Suspend(S);S.FPaused=value$43}},Suspend:function(S){if(S.FDelay$2==0){TW3Dispatch.CancelRequestAnimationFrame(TW3Dispatch,S.FAnimationTimer)}else TW3Dispatch.ClearTimeOut(TW3Dispatch,S.FAnimationTimer);S.FAnimationTimer=null;if(S.FFrameTimer){TW3Dispatch.ClearTimeOut(TW3Dispatch,S.FFrameTimer);S.FFrameTimer=null}},VisibilityChange:function(S){TW3GameView.SetPaused(S,(document[vVisibilityHiddenName]?true:false))},Destroy:TW3TagObj.Destroy,AcceptOwner:TW3OwnedObject.AcceptOwner,Create$10:TW3TagObj.Create$10,FinalizeObject$:function($){return $.ClassType.FinalizeObject($)},InitializeObject$:function($){return $.ClassType.InitializeObject($)},AfterUpdate:TW3MovableControl.AfterUpdate,CreationFlags:TW3TagObj.CreationFlags,HookEvents:TW3CustomControl.HookEvents,MakeElementTagId:TW3TagObj.MakeElementTagId,MakeElementTagObj:TW3GraphicControl.MakeElementTagObj,Showing:TW3MovableControl.Showing,StyleTagObject:TW3CustomControl.StyleTagObject,UnHookEvents:TW3CustomControl.UnHookEvents,Create$41:TW3TagContainer.Create$41,QueryChildInThisBranch:TW3TagContainer.QueryChildInThisBranch,GetHeight:TW3MovableControl.GetHeight,GetWidth:TW3MovableControl.GetWidth,ObjectReady:TW3MovableControl.ObjectReady,Resize:TW3GraphicControl.Resize,SetHeight:TW3GraphicControl.SetHeight,SetWidth:TW3GraphicControl.SetWidth,SupportAdjustment:TW3MovableControl.SupportAdjustment,CBClick:TW3CustomControl.CBClick,CBKeyDown:TW3CustomControl.CBKeyDown,CBKeyUp:TW3CustomControl.CBKeyUp,CBMouseDown:TW3CustomControl.CBMouseDown,CBMouseMove:TW3CustomControl.CBMouseMove,CBMouseUp:TW3CustomControl.CBMouseUp,GetEnabled:TW3CustomControl.GetEnabled,Invalidate:TW3GraphicControl.Invalidate,MouseDown:TW3CustomControl.MouseDown,MouseMove:TW3CustomControl.MouseMove,MouseUp:TW3CustomControl.MouseUp,SetEnabled:TW3CustomControl.SetEnabled};TW3GameView.$Intf={IW3ZOrderManagement:[TW3TagObj.GetZOrderList],IW3ComponentState:[TW3TagObj.AddToComponentState,TW3TagObj.RemoveFromComponentState],IW3OwnedObjectAccess:[TW3OwnedObject.AcceptOwner,TW3OwnedObject.SetOwner,TW3OwnedObject.GetOwner]}
var __UNIQUE=0;var a$9=0;var a$12=0;var a$11=0;var a$10=0;var a$13=0;var a$14=0;var CRC_Table_Ready=false,CRC_Table_Ready=false;var CRC_Table=function(){for(var r=[],i=0;i<513;i++)r.push(0);return r}();var a$21=null;var a$7=false;var vColorNames=[],vColorNames=["aqua","black","blue","fuchsia","green","gray","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"].slice();var vColorValues=[],vColorValues=["#0ff","#000","#00f","#f0f","#008000","#808080","#0f0","#800000","#000080","#808000","#800080","#f00","#c0c0c0","#008080","#fff","#ff00"].slice();var __SheetID=0;var __StyleID=0;var __Default=null;var vCurrent=null;var _ZIndexCounter=0,_ZIndexCounter=0;var FFocused=null;var FLUT=null;var RegisterComponentsProc=null;var MouseButton=0;var MousePosition={X$1:0,Y$1:0};var __AnimID=0;var DefaultDuration=0,DefaultDuration=2;var DefaultTiming=0,DefaultTiming=1;var ExpirationDelayInDays=0,ExpirationDelayInDays=50*365;var vGetNow,vIsHighResolution=false;var PressedCSSClass="",PressedCSSClass="TW3Button_Pressed";var Instance$1=null;var vCaptureControl=null;var vCaptureInitialized=false;var FInternal=false,FInternal=false;var FInitialized$2=false,FInitialized$2=false;var FScriptObj=undefined;var Application$1=null;var NullConfig=null,Logger="";var LayoutCount=0;var NullConfig=TObject.Create($New(TLayoutConfigImpl));var __LOADED=false;var __LOADED=false;var CNT_AMIGA_FILES=[],__PRELOAD=0;var __DONE=0;var CNT_AMIGA_FILES=["prototypes.js","dms.js","config.js","roms.js","memory.js","autoconf.js","expansion.js","events.js","gayle.js","ide.js","filesys.js","hardfile.js","input.js","serial.js","custom.js","blitter.js","copper.js","playfield.js","video.js","audio.js","cia.js","disk.js","rtc.js","m68k.js","cpu.js","amiga.js"].slice();var __DONE=0;var _BatchLoadImages=[];var GForms=null;var vVisibilityEventName="";var vVisibilityHiddenName="";var LDesktop=null;var _EdgeNameLUT=["","","",""],_StyleNameLUT=["","","","","","",""];var _EdgeNameLUT=["left","top","right","bottom"];var _StyleNameLUT=["none","solid","dotted","double","groove","inset","outset"];var _FontDetect=null;var vRequestAnimFrame=null;var vCancelAnimFrame=null;var __RESERVED=[];var __RESERVED=["$ClassName","$Parent","$Init","toString","toLocaleString","valueOf","indexOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"].slice();var __CURSOR_NAME_LUT,__CURSOR_DATA_LUT,vVendor=0;var vDriver=null;var __CURSOR_NAME_LUT=TVariant.CreateObject();var __CURSOR_DATA_LUT=TVariant.CreateObject();var GlobalRepeaterList=[],__CONV_BUFFER=null;var __CONV_VIEW=null;var __CONV_ARRAY=null;var __SIZES=[0,0,0,0,0,0,0,0,0,0,0],_NAMES=["","","","","","","","","","",""];var __SIZES=[0,1,1,2,2,4,2,4,4,8,8];var _NAMES=["Unknown","Boolean","Byte","Char","Word","Longword","Smallint","Integer","Single","Double","String"];var __UniqueNumber=0;var __TYPE_MAP={Boolean:undefined,Number$1:undefined,String$1:undefined,Object$2:undefined,Undefined:undefined,Function$1:undefined};SetupTypeLUT();SetupMouseCursorTable();SetupConversionLUT();InitAnimationFrameShim();Require().config.enforceDefine=false;Require().config.paths="\/res\/";TApplicationFormsList.RegisterAutoCreate(Forms$2(),"Form1",true,true);TApplicationFormsList.RegisterForm(Forms$2(),"Form1",TForm1);var $Application=function(){try{Application$1=TW3CustomApplication.Create$134$($New(TApplication));TW3CustomApplication.RunApp(Application$1)}catch($e){var e$45=$W($e);alert(e$45.FMessage)}}
$Application();var $Application=function(){if(_FontDetect){TObject.Free(_FontDetect)}}
$Application();
 }
	window.onload = function () { bootstrap(); }
	</script>

</head>

<body></body>

</html>
